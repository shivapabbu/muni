"use strict";(self.webpackChunkmsal_angular_tutorial=self.webpackChunkmsal_angular_tutorial||[]).push([[792],{348:()=>{function ws(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(c){ws(i,r,o,s,a,"next",c)}function a(c){ws(i,r,o,s,a,"throw",c)}s(void 0)})}}let Le=null,Fc=1;const eo=Symbol("SIGNAL");function J(t){const e=Le;return Le=t,e}function IC(t){if((!Ss(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Fc)){if(!t.producerMustRecompute(t)&&!Yh(t))return t.dirty=!1,void(t.lastCleanEpoch=Fc);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Fc}}function Yh(t){Lo(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(IC(n),r!==n.version))return!0}return!1}function Uc(t,e){if(function bC(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Lo(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)Uc(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];Lo(o),o.producerIndexOfThis[r]=e}}function Ss(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Lo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let RC=null;function Re(t){return"function"==typeof t}function Zh(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Xh=Zh(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function ef(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Nt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Re(r))try{r()}catch(i){e=i instanceof Xh?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{PC(i)}catch(s){e=e??[],s instanceof Xh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)PC(e);else{if(e instanceof Nt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ef(n,e)}remove(e){const{_finalizers:n}=this;n&&ef(n,e),e instanceof Nt&&e._removeParent(this)}}Nt.EMPTY=(()=>{const t=new Nt;return t.closed=!0,t})();const kC=Nt.EMPTY;function OC(t){return t instanceof Nt||t&&"closed"in t&&Re(t.remove)&&Re(t.add)&&Re(t.unsubscribe)}function PC(t){Re(t)?t():t.unsubscribe()}const to={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Hc={setTimeout(t,e,...n){const{delegate:r}=Hc;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Hc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xC(t){Hc.setTimeout(()=>{const{onUnhandledError:e}=to;if(!e)throw t;e(t)})}function tf(){}const UN=nf("C",void 0,void 0);function nf(t,e,n){return{kind:t,value:e,error:n}}let no=null;function Bc(t){if(to.useDeprecatedSynchronousErrorHandling){const e=!no;if(e&&(no={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=no;if(no=null,n)throw r}}else t()}class rf extends Nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,OC(e)&&e.add(this)):this.destination=zN}static create(e,n,r){return new af(e,n,r)}next(e){this.isStopped?cf(function BN(t){return nf("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?cf(function HN(t){return nf("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cf(UN,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const VN=Function.prototype.bind;function sf(t,e){return VN.call(t,e)}class $N{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){jc(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){jc(r)}else jc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){jc(n)}}}class af extends rf{constructor(e,n,r){let o;if(super(),Re(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&to.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&sf(e.next,i),error:e.error&&sf(e.error,i),complete:e.complete&&sf(e.complete,i)}):o=e}this.destination=new $N(o)}}function jc(t){to.useDeprecatedSynchronousErrorHandling?function jN(t){to.useDeprecatedSynchronousErrorHandling&&no&&(no.errorThrown=!0,no.error=t)}(t):xC(t)}function cf(t,e){const{onStoppedNotification:n}=to;n&&Hc.setTimeout(()=>n(t,e))}const zN={closed:!0,next:tf,error:function GN(t){throw t},complete:tf},lf="function"==typeof Symbol&&Symbol.observable||"@@observable";function ro(t){return t}function LC(t){return 0===t.length?ro:1===t.length?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}let qe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function WN(t){return t&&t instanceof rf||function KN(t){return t&&Re(t.next)&&Re(t.error)&&Re(t.complete)}(t)&&OC(t)}(n)?n:new af(n,r,o);return Bc(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=FC(r))((o,i)=>{const s=new af({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[lf](){return this}pipe(...n){return LC(n)(this)}toPromise(n){return new(n=FC(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function FC(t){var e;return null!==(e=t??to.Promise)&&void 0!==e?e:Promise}const QN=Zh(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let kt=(()=>{class t extends qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new UC(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new QN}next(n){Bc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Bc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?kC:(this.currentObservers=null,i.push(n),new Nt(()=>{this.currentObservers=null,ef(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new qe;return n.source=this,n}}return t.create=(e,n)=>new UC(e,n),t})();class UC extends kt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:kC}}class Vt extends kt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function HC(t){return Re(t?.lift)}function it(t){return e=>{if(HC(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function et(t,e,n,r,o){return new YN(t,e,n,r,o)}class YN extends rf{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ie(t,e){return it((n,r)=>{let o=0;n.subscribe(et(r,i=>{r.next(t.call(e,i,o++))}))})}const BC="https://g.co/ng/security#xss";class _ extends Error{constructor(e,n){super(function Fo(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function nr(t){return{toString:t}.toString()}const Ho="__parameters__";function jo(t,e,n){return nr(()=>{const r=function uf(t){return function(...n){if(t){const r=t(...n);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(Ho)?c[Ho]:Object.defineProperty(c,Ho,{value:[]})[Ho];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}const he=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("Could not find renamed property on target object.")}function Ke(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Ke).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function df(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ZN=pe({__forward_ref__:pe});function hf(t){return t.__forward_ref__=hf,t.toString=function(){return Ke(this())},t}function B(t){return $c(t)?t():t}function $c(t){return"function"==typeof t&&t.hasOwnProperty(ZN)&&t.__forward_ref__===hf}function k(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Mn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gc(t){return GC(t,qc)||GC(t,zC)}function GC(t,e){return t.hasOwnProperty(e)?t[e]:null}function zc(t){return t&&(t.hasOwnProperty(ff)||t.hasOwnProperty(ok))?t[ff]:null}const qc=pe({\u0275prov:pe}),ff=pe({\u0275inj:pe}),zC=pe({ngInjectableDef:pe}),ok=pe({ngInjectorDef:pe});class R{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=k({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vf(t){return t&&!!t.\u0275providers}const _s=pe({\u0275cmp:pe}),Cf=pe({\u0275dir:pe}),If=pe({\u0275pipe:pe}),KC=pe({\u0275mod:pe}),rr=pe({\u0275fac:pe}),As=pe({__NG_ELEMENT_ID__:pe}),WC=pe({__NG_ENV_ID__:pe});function G(t){return"string"==typeof t?t:null==t?"":String(t)}function Ef(t,e){throw new _(-201,!1)}var te=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(te||{});let wf;function QC(){return wf}function Ot(t){const e=wf;return wf=t,e}function YC(t,e,n){const r=Gc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&te.Optional?null:void 0!==e?e:void Ef()}const Ds={},Tf="__NG_DI_FLAG__",Kc="ngTempTokenPath",uk=/\n/gm,JC="__source";let Vo;function _r(t){const e=Vo;return Vo=t,e}function fk(t,e=te.Default){if(void 0===Vo)throw new _(-203,!1);return null===Vo?YC(t,void 0,e):Vo.get(t,e&te.Optional?null:void 0,e)}function M(t,e=te.Default){return(QC()||fk)(B(t),e)}function T(t,e=te.Default){return M(t,Wc(e))}function Wc(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Sf(t){const e=[];for(let n=0;n<t.length;n++){const r=B(t[n]);if(Array.isArray(r)){if(0===r.length)throw new _(900,!1);let o,i=te.Default;for(let s=0;s<r.length;s++){const a=r[s],c=pk(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}e.push(M(o,i))}else e.push(M(r))}return e}function bs(t,e){return t[Tf]=e,t.prototype[Tf]=e,t}function pk(t){return t[Tf]}const Qc=bs(jo("Optional"),8),Yc=bs(jo("SkipSelf"),4);function oo(t,e){return t.hasOwnProperty(rr)?t[rr]:null}function $o(t,e){t.forEach(n=>Array.isArray(n)?$o(n,e):e(n))}function XC(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Jc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Nn={},se=[],io=new R(""),nI=new R("",-1),Df=new R("");class Xc{get(e,n=Ds){if(n===Ds){const r=new Error(`NullInjectorError: No provider for ${Ke(e)}!`);throw r.name="NullInjectorError",r}return n}}var el=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(el||{}),un=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(un||{}),dn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(dn||{});function Ek(t,e,n){let r=t.length;for(;;){const o=t.indexOf(e,n);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}function bf(t,e,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{const i=o,s=n[++r];oI(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}return r}function rI(t){return 3===t||4===t||6===t}function oI(t){return 64===t.charCodeAt(0)}function Rs(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?n=o:0===n||iI(t,n,o,null,-1===n||2===n?e[++r]:null)}}return t}function iI(t,e,n,r,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}const sI="ng-template";function wk(t,e,n,r){let o=0;if(r){for(;o<e.length&&"string"==typeof e[o];o+=2)if("class"===e[o]&&-1!==Ek(e[o+1].toLowerCase(),n,0))return!0}else if(Rf(t))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&"string"==typeof(i=e[o]);)if(i.toLowerCase()===n)return!0}return!1}function Rf(t){return 4===t.type&&t.value!==sI}function Tk(t,e,n){return e===(4!==t.type||n?t.value:sI)}function Sk(t,e,n){let r=4;const o=t.attrs,i=null!==o?function Dk(t){for(let e=0;e<t.length;e++)if(rI(t[e]))return e;return t.length}(o):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!Tk(t,c,n)||""===c&&1===e.length){if(hn(r))return!1;s=!0}}else if(8&r){if(null===o||!wk(t,o,c,n)){if(hn(r))return!1;s=!0}}else{const l=e[++a],u=_k(c,o,Rf(t),n);if(-1===u){if(hn(r))return!1;s=!0;continue}if(""!==l){let d;if(d=u>i?"":o[u+1].toLowerCase(),2&r&&l!==d){if(hn(r))return!1;s=!0}}}}else{if(!s&&!hn(r)&&!hn(c))return!1;if(s&&hn(c))continue;s=!1,r=c|1&r}}return hn(r)||s}function hn(t){return!(1&t)}function _k(t,e,n,r){if(null===e)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){const s=e[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function bk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function aI(t,e,n=!1){for(let r=0;r<e.length;r++)if(Sk(t,e[r],n))return!0;return!1}function cI(t,e){return t?":not("+e.trim()+")":e}function Mk(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!hn(s)&&(e+=cI(i,o),o=""),r=s,i=i||!hn(r);n++}return""!==o&&(e+=cI(i,o)),e}function Ms(t){return nr(()=>{const e=uI(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===el.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||un.Emulated,styles:t.styles||se,_:null,schemas:t.schemas||null,tView:null,id:""};dI(n);const r=t.dependencies;return n.directiveDefs=tl(r,!1),n.pipeDefs=tl(r,!0),n.id=function Lk(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const o of n)e=Math.imul(31,e)+o.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function Ok(t){return Z(t)||We(t)}function Pk(t){return null!==t}function or(t){return nr(()=>({type:t.type,bootstrap:t.bootstrap||se,declarations:t.declarations||se,imports:t.imports||se,exports:t.exports||se,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function lI(t,e){if(null==t)return Nn;const n={};for(const r in t)if(t.hasOwnProperty(r)){const o=t[r];let i,s,a=dn.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),e?(n[i]=a!==dn.None?[r,a]:r,e[i]=s):n[i]=r}return n}function Ct(t){return nr(()=>{const e=uI(t);return dI(e),e})}function Z(t){return t[_s]||null}function We(t){return t[Cf]||null}function st(t){return t[If]||null}function ct(t,e){const n=t[KC]||null;if(!n&&!0===e)throw new Error(`Type ${Ke(t)} does not have '\u0275mod' property.`);return n}function uI(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Nn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||se,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lI(t.inputs,e),outputs:lI(t.outputs),debugInfo:null}}function dI(t){t.features?.forEach(e=>e(t))}function tl(t,e){if(!t)return null;const n=e?st:Ok;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(Pk)}function Fk(...t){return{\u0275providers:Mf(0,t),\u0275fromNgModule:!0}}function Mf(t,...e){const n=[],r=new Set;let o;const i=s=>{n.push(s)};return $o(e,s=>{const a=s;nl(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&hI(o,i),n}function hI(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:o}=t[n];Nf(o,i=>{e(i,r)})}}function nl(t,e,n,r){if(!(t=B(t)))return!1;let o=null,i=zc(t);const s=!i&&Z(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const c=t.ngModule;if(i=zc(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)nl(l,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let l;r.add(o);try{$o(i.imports,u=>{nl(u,e,n,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&hI(l,e)}if(!a){const l=oo(o)||(()=>new o);e({provide:o,useFactory:l,deps:se},o),e({provide:Df,useValue:o,multi:!0},o),e({provide:io,useValue:()=>M(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const l=t;Nf(c,u=>{e(u,l)})}}}return o!==t&&void 0!==t.providers}function Nf(t,e){for(let n of t)vf(n)&&(n=n.\u0275providers),Array.isArray(n)?Nf(n,e):e(n)}const Uk=pe({provide:String,useValue:pe});function kf(t){return null!==t&&"object"==typeof t&&Uk in t}function so(t){return"function"==typeof t}const Of=new R(""),rl={},Bk={};let Pf;function ol(){return void 0===Pf&&(Pf=new Xc),Pf}class It{}class zo extends It{get destroyed(){return this._destroyed}constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lf(e,s=>this.processProvider(s)),this.records.set(nI,qo(void 0,this)),o.has("environment")&&this.records.set(It,qo(void 0,this));const i=this.records.get(Of);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Df,se,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=J(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=_r(this),r=Ot(void 0);try{return e()}finally{_r(n),Ot(r)}}get(e,n=Ds,r=te.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(WC))return e[WC](this);r=Wc(r);const i=_r(this),s=Ot(void 0);try{if(!(r&te.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function zk(t){return"function"==typeof t||"object"==typeof t&&t instanceof R}(e)&&Gc(e);c=l&&this.injectableDefInScope(l)?qo(xf(e),rl):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&te.Self?ol():this.parent).get(e,n=r&te.Optional&&n===Ds?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Kc]=a[Kc]||[]).unshift(Ke(e)),i)throw a;return function gk(t,e,n,r){const o=t[Kc];throw e[JC]&&o.unshift(e[JC]),t.message=function mk(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let o=Ke(e);if(Array.isArray(e))o=e.map(Ke).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Ke(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(uk,"\n  ")}`}("\n"+t.message,o,n,r),t.ngTokenPath=o,t[Kc]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Ot(s),_r(i)}}resolveInjectorInitializers(){const e=J(null),n=_r(this),r=Ot(void 0);try{const i=this.get(io,se,te.Self);for(const s of i)s()}finally{_r(n),Ot(r),J(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Ke(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _(205,!1)}processProvider(e){let n=so(e=B(e))?e:B(e&&e.provide);const r=function Vk(t){return kf(t)?qo(void 0,t.useValue):qo(function gI(t,e,n){let r;if(so(t)){const o=B(t);return oo(o)||xf(o)}if(kf(t))r=()=>B(t.useValue);else if(function pI(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Sf(t.deps||[]));else if(function fI(t){return!(!t||!t.useExisting)}(t))r=()=>M(B(t.useExisting));else{const o=B(t&&(t.useClass||t.provide));if(!function $k(t){return!!t.deps}(t))return oo(o)||xf(o);r=()=>new o(...Sf(t.deps))}return r}(t),rl)}(e);if(!so(e)&&!0===e.multi){let o=this.records.get(n);o||(o=qo(void 0,rl,!0),o.factory=()=>Sf(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=J(null);try{return n.value===rl&&(n.value=Bk,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Gk(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=B(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function xf(t){const e=Gc(t),n=null!==e?e.factory:oo(t);if(null!==n)return n;if(t instanceof R)throw new _(204,!1);if(t instanceof Function)return function jk(t){if(t.length>0)throw new _(204,!1);const n=function rk(t){return t&&(t[qc]||t[zC])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new _(204,!1)}function qo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Lf(t,e){for(const n of t)Array.isArray(n)?Lf(n,e):n&&vf(n)?Lf(n.\u0275providers,e):e(n)}function kn(t,e){t instanceof zo&&t.assertNotDestroyed();const r=_r(t),o=Ot(void 0);try{return e()}finally{_r(r),Ot(o)}}function mI(){return void 0!==QC()||null!=function hk(){return Vo}()}const ke=0,A=1,L=2,Fe=3,fn=4,lt=5,qt=6,Wo=7,Te=8,$e=9,pn=10,j=11,Os=12,vI=13,Qo=14,Oe=15,Ps=16,Yo=17,ir=18,xs=19,CI=20,Dr=21,al=22,ao=23,z=25,Uf=1,On=7,Jo=9,Ue=10;var Hf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Hf||{});function ut(t){return Array.isArray(t)&&"object"==typeof t[Uf]}function dt(t){return Array.isArray(t)&&!0===t[Uf]}function Bf(t){return!!(4&t.flags)}function co(t){return t.componentOffset>-1}function ll(t){return!(1&~t.flags)}function gn(t){return!!t.template}function jf(t){return!!(512&t[L])}class oO{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function TI(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function lo(){return SI}function SI(t){return t.type.prototype.ngOnChanges&&(t.setInput=sO),iO}function iO(){const t=AI(this),e=t?.current;if(e){const n=t.previous;if(n===Nn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sO(t,e,n,r,o){const i=this.declaredInputs[r],s=AI(t)||function aO(t,e){return t[_I]=e}(t,{previous:Nn,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new oO(l&&l.currentValue,n,c===Nn),TI(t,e,o,n)}lo.ngInherit=!0;const _I="__ngSimpleChanges__";function AI(t){return t[_I]||null}const Pn=function(t,e,n){};let RI=!1;function ve(t){for(;Array.isArray(t);)t=t[ke];return t}function Et(t,e){return ve(e[t.index])}function Us(t,e){return t.data[e]}function Kt(t,e){const n=e[t];return ut(n)?n:n[ke]}function qf(t){return!(128&~t[L])}function xn(t,e){return null==e?null:t[e]}function MI(t){t[Yo]=0}function fO(t){1024&t[L]||(t[L]|=1024,qf(t)&&Hs(t))}function Kf(t){return!!(9216&t[L]||t[ao]?.dirty)}function Wf(t){t[pn].changeDetectionScheduler?.notify(1),Kf(t)?Hs(t):64&t[L]&&(function lO(){return RI}()?(t[L]|=1024,Hs(t)):t[pn].changeDetectionScheduler?.notify())}function Hs(t){t[pn].changeDetectionScheduler?.notify();let e=uo(t);for(;null!==e&&!(8192&e[L])&&(e[L]|=8192,qf(e));)e=uo(e)}function ul(t,e){if(!(256&~t[L]))throw new _(911,!1);null===t[Dr]&&(t[Dr]=[]),t[Dr].push(e)}function uo(t){const e=t[Fe];return dt(e)?e[Fe]:e}const V={lFrame:BI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function OI(){return V.bindingsEnabled}function E(){return V.lFrame.lView}function ne(){return V.lFrame.tView}function Yf(t){return V.lFrame.contextLView=t,t[Te]}function Jf(t){return V.lFrame.contextLView=null,t}function ge(){let t=PI();for(;null!==t&&64===t.type;)t=t.parent;return t}function PI(){return V.lFrame.currentTNode}function Ln(t,e){const n=V.lFrame;n.currentTNode=t,n.isParent=e}function Zf(){return V.lFrame.isParent}function mn(){return V.lFrame.bindingIndex++}function SO(t,e){const n=V.lFrame;n.bindingIndex=n.bindingRootIndex=t,ep(e)}function ep(t){V.lFrame.currentDirectiveIndex=t}function dl(t){V.lFrame.currentQueryIndex=t}function AO(t){const e=t[A];return 2===e.type?e.declTNode:1===e.type?t[lt]:null}function UI(t,e,n){if(n&te.SkipSelf){let o=e,i=t;for(;!(o=o.parent,null!==o||n&te.Host||(o=AO(i),null===o||(i=i[Qo],10&o.type))););if(null===o)return!1;e=o,t=i}const r=V.lFrame=HI();return r.currentTNode=e,r.lView=t,!0}function rp(t){const e=HI(),n=t[A];V.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function HI(){const t=V.lFrame,e=null===t?null:t.child;return null===e?BI(t):e}function BI(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function jI(){const t=V.lFrame;return V.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const VI=jI;function op(){const t=jI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ht(){return V.lFrame.selectedIndex}function ho(t){V.lFrame.selectedIndex=t}function Se(){const t=V.lFrame;return Us(t.tView,t.selectedIndex)}let GI=!0;function js(){return GI}function Fn(t){GI=t}function hl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function fl(t,e,n){zI(t,e,3,n)}function pl(t,e,n,r){(3&t[L])===n&&zI(t,e,n,r)}function ip(t,e){let n=t[L];(3&n)===e&&(n&=16383,n+=1,t[L]=n)}function zI(t,e,n,r){const i=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[Yo]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[Yo]+=65536),(a<i||-1==i)&&(OO(t,n,e,c),t[Yo]=(4294901760&t[Yo])+c+2),c++}function qI(t,e){Pn(4,t,e);const n=J(null);try{e.call(t)}finally{J(n),Pn(5,t,e)}}function OO(t,e,n,r){const o=n[r]<0,i=n[r+1],a=t[o?-n[r]:n[r]];o?t[L]>>14<t[Yo]>>16&&(3&t[L])===e&&(t[L]+=16384,qI(a,i)):qI(a,i)}const ei=-1;class Vs{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ap(t){return t!==ei}function $s(t){return 32767&t}function Gs(t,e){let n=function UO(t){return t>>16}(t),r=e;for(;n>0;)r=r[Qo],n--;return r}let cp=!0;function gl(t){const e=cp;return cp=t,e}const KI=255,WI=5;let HO=0;const Un={};function ml(t,e){const n=QI(t,e);if(-1!==n)return n;const r=e[A];r.firstCreatePass&&(t.injectorIndex=e.length,lp(r.data,t),lp(e,null),lp(r.blueprint,null));const o=yl(t,e),i=t.injectorIndex;if(ap(o)){const s=$s(o),a=Gs(o,e),c=a[A].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function lp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function QI(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function yl(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;null!==o;){if(r=nE(o),null===r)return ei;if(n++,o=o[Qo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ei}function up(t,e,n){!function BO(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(As)&&(r=n[As]),null==r&&(r=n[As]=HO++);const o=r&KI;e.data[t+(o>>WI)]|=1<<o}(t,e,n)}function YI(t,e,n){if(n&te.Optional||void 0!==t)return t;Ef()}function JI(t,e,n,r){if(n&te.Optional&&void 0===r&&(r=null),!(n&(te.Self|te.Host))){const o=t[$e],i=Ot(void 0);try{return o?o.get(e,r,n&te.Optional):YC(e,r,n&te.Optional)}finally{Ot(i)}}return YI(r,0,n)}function ZI(t,e,n,r=te.Default,o){if(null!==t){if(2048&e[L]&&!(r&te.Self)){const s=function zO(t,e,n,r,o){let i=t,s=e;for(;null!==i&&null!==s&&2048&s[L]&&!(512&s[L]);){const a=XI(i,s,n,r|te.Self,Un);if(a!==Un)return a;let c=i.parent;if(!c){const l=s[CI];if(l){const u=l.get(n,Un,r);if(u!==Un)return u}c=nE(s),s=s[Qo]}i=c}return o}(t,e,n,r,Un);if(s!==Un)return s}const i=XI(t,e,n,r,Un);if(i!==Un)return i}return JI(e,n,r,o)}function XI(t,e,n,r,o){const i=function $O(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(As)?t[As]:void 0;return"number"==typeof e?e>=0?e&KI:GO:e}(n);if("function"==typeof i){if(!UI(e,t,r))return r&te.Host?YI(o,0,r):JI(e,n,r,o);try{let s;if(s=i(r),null!=s||r&te.Optional)return s;Ef()}finally{VI()}}else if("number"==typeof i){let s=null,a=QI(t,e),c=ei,l=r&te.Host?e[Oe][lt]:null;for((-1===a||r&te.SkipSelf)&&(c=-1===a?yl(t,e):e[a+8],c!==ei&&tE(r,!1)?(s=e[A],a=$s(c),e=Gs(c,e)):a=-1);-1!==a;){const u=e[A];if(eE(i,a,u.data)){const d=VO(a,e,n,s,r,l);if(d!==Un)return d}c=e[a+8],c!==ei&&tE(r,e[A].data[a+8]===l)&&eE(i,a,e)?(s=u,a=$s(c),e=Gs(c,e)):a=-1}}return o}function VO(t,e,n,r,o,i){const s=e[A],a=s.data[t+8],u=function vl(t,e,n,r,o){const i=t.providerIndexes,s=e.data,a=1048575&i,c=t.directiveStart,u=i>>20,h=o?a+u:t.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(o){const f=s[c];if(f&&gn(f)&&f.type===n)return c}return null}(a,s,n,null==r?co(a)&&cp:r!=s&&!!(3&a.type),o&te.Host&&i===a);return null!==u?fo(e,s,u,a):Un}function fo(t,e,n,r){let o=t[n];const i=e.data;if(function PO(t){return t instanceof Vs}(o)){const s=o;s.resolving&&function ak(t,e){throw e&&e.join(" > "),new _(-200,t)}(function ce(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():G(t)}(i[n]));const a=gl(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Ot(s.injectImpl):null;UI(t,r,te.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function kO(t,e,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=SI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}(n,i[n],e)}finally{null!==l&&Ot(l),gl(a),s.resolving=!1,VI()}}return o}function eE(t,e,n){return!!(n[e+(t>>WI)]&1<<t)}function tE(t,e){return!(t&te.Self||t&te.Host&&e)}class Ye{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ZI(this._tNode,this._lView,e,Wc(r),n)}}function GO(){return new Ye(ge(),E())}function dp(t){return nr(()=>{const e=t.prototype.constructor,n=e[rr]||hp(e),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[rr]||hp(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function hp(t){return $c(t)?()=>{const e=hp(B(t));return e&&e()}:oo(t)}function nE(t){const e=t[A],n=e.type;return 2===n?e.declTNode:1===n?t[lt]:null}function aE(t,e=null,n=null,r){const o=cE(t,e,n,r);return o.resolveInjectorInitializers(),o}function cE(t,e=null,n=null,r,o=new Set){const i=[n||se,Fk(t)];return r=r||("object"==typeof t?void 0:Ke(t)),new zo(i,e||ol(),r||null,o)}let Lt=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Ds}static{this.NULL=new Xc}static create(n,r){if(Array.isArray(n))return aE({name:""},r,n,"");{const o=n.name??"";return aE({name:o},n.parent,n.providers,o)}}static{this.\u0275prov=k({token:t,providedIn:"any",factory:()=>M(nI)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function pp(t){return t.ngOriginalError}class Hn{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&pp(e);for(;n&&pp(n);)n=pp(n);return n||null}}const uE=new R("",{providedIn:"root",factory:()=>T(Hn).handleError.bind(void 0)});let ri=(()=>{class t{static{this.__NG_ELEMENT_ID__=eP}static{this.__NG_ENV_ID__=n=>n}}return t})();class XO extends ri{constructor(e){super(),this._lView=e}onDestroy(e){return ul(this._lView,e),()=>function Qf(t,e){if(null===t[Dr])return;const n=t[Dr].indexOf(e);-1!==n&&t[Dr].splice(n,1)}(this._lView,e)}}function eP(){return new XO(E())}function tP(){return oi(ge(),E())}function oi(t,e){return new br(Et(t,e))}let br=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=tP}}return t})();function gp(t){return e=>{setTimeout(t,void 0,e)}}const Tt=class nP extends kt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,mI()&&(this.destroyRef=T(ri,{optional:!0})??void 0)}emit(e){const n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=gp(i),o&&(o=gp(o)),s&&(s=gp(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof Nt&&e.add(a),a}};function Il(t){return!(128&~t.flags)}const yp=new Map;let iP=0;const Cp="__ngContext__";function ft(t,e){ut(e)?(t[Cp]=e[xs],function aP(t){yp.set(t[xs],t)}(e)):t[Cp]=e}function wE(t){return SE(t[Os])}function TE(t){return SE(t[fn])}function SE(t){for(;null!==t&&!dt(t);)t=t[fn];return t}let Ip;const Tl=new R("",{providedIn:"root",factory:()=>_P}),_P="ng",kE=new R(""),Mr=new R("",{providedIn:"platform",factory:()=>"unknown"}),OE=new R("",{providedIn:"root",factory:()=>function Rr(){if(void 0!==Ip)return Ip;if(typeof document<"u")return document;throw new _(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let PE=()=>null;function bp(t,e,n=!1){return PE(t,e,n)}const HE=new R("",{providedIn:"root",factory:()=>!1});let Nl;function $E(t){return function Op(){if(void 0===Nl&&(Nl=null,he.trustedTypes))try{Nl=he.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nl}()?.createScriptURL(t)||t}class GE{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${BC})`}}function Nr(t){return t instanceof GE?t.changingThisBreaksApplicationSecurity:t}function Zs(t,e){const n=function GP(t){return t instanceof GE&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${BC})`)}return n===e}const WP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ci=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ci||{});function XE(t){const e=ea();return e?e.sanitize(ci.URL,t)||"":Zs(t,"URL")?Nr(t):function Pp(t){return(t=String(t)).match(WP)?t:"unsafe:"+t}(G(t))}function ew(t){const e=ea();if(e)return $E(e.sanitize(ci.RESOURCE_URL,t)||"");if(Zs(t,"ResourceURL"))return $E(Nr(t));throw new _(904,!1)}function ea(){const t=E();return t&&t[pn].sanitizer}function Wt(t){return t instanceof Function?t():t}var kr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(kr||{});let jp;function Vp(t,e){return jp(t,e)}function ui(t,e,n,r,o){if(null!=r){let i,s=!1;dt(r)?i=r:ut(r)&&(s=!0,r=r[ke]);const a=ve(r);0===t&&null!==n?null==o?fw(e,n,a):po(e,n,a,o||null,!0):1===t&&null!==n?po(e,n,a,o||null,!0):2===t?function ra(t,e,n){const r=Fl(t,e);r&&function k0(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=i&&function x0(t,e,n,r,o){const i=n[On];i!==ve(n)&&ui(e,t,r,i,o);for(let a=Ue;a<n.length;a++){const c=n[a];Hl(c[A],c,t,e,r,i)}}(e,t,i,n,o)}}function xl(t,e,n){return t.createElement(e,n)}function uw(t,e){e[pn].changeDetectionScheduler?.notify(1),Hl(t,e,e[j],2,null,null)}function dw(t,e){const n=t[Jo],r=n.indexOf(e);n.splice(r,1)}function ta(t,e){if(t.length<=Ue)return;const n=Ue+e,r=t[n];if(r){const o=r[Ps];null!==o&&o!==t&&dw(o,r),e>0&&(t[n-1][fn]=r[fn]);const i=Jc(t,Ue+e);!function _0(t,e){uw(t,e),e[ke]=null,e[lt]=null}(r[A],r);const s=i[ir];null!==s&&s.detachView(i[A]),r[Fe]=null,r[fn]=null,r[L]&=-129}return r}function Ll(t,e){if(!(256&e[L])){const n=e[j];n.destroyNode&&Hl(t,e,n,3,null,null),function D0(t){let e=t[Os];if(!e)return zp(t[A],t);for(;e;){let n=null;if(ut(e))n=e[Os];else{const r=e[Ue];r&&(n=r)}if(!n){for(;e&&!e[fn]&&e!==t;)ut(e)&&zp(e[A],e),e=e[Fe];null===e&&(e=t),ut(e)&&zp(e[A],e),n=e&&e[fn]}e=n}}(e)}}function zp(t,e){if(256&e[L])return;const n=J(null);try{e[L]&=-129,e[L]|=256,e[ao]&&function AC(t){if(Lo(t),Ss(t))for(let e=0;e<t.producerNode.length;e++)Uc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[ao]),function N0(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const o=e[n[r]];if(!(o instanceof Vs)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];Pn(4,a,c);try{c.call(a)}finally{Pn(5,a,c)}}else{Pn(4,o,i);try{i.call(o)}finally{Pn(5,o,i)}}}}}(t,e),function M0(t,e){const n=t.cleanup,r=e[Wo];if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);null!==r&&(e[Wo]=null);const o=e[Dr];if(null!==o){e[Dr]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(t,e),1===e[A].type&&e[j].destroy();const r=e[Ps];if(null!==r&&dt(e[Fe])){r!==e[Fe]&&dw(r,e);const o=e[ir];null!==o&&o.detachView(t)}!function cP(t){yp.delete(t[xs])}(e)}finally{J(n)}}function qp(t,e,n){return function hw(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[ke];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=t.data[r.directiveStart+o];if(i===un.None||i===un.Emulated)return null}return Et(r,n)}}(t,e.parent,n)}function po(t,e,n,r,o){t.insertBefore(e,n,r,o)}function fw(t,e,n){t.appendChild(e,n)}function pw(t,e,n,r,o){null!==r?po(t,e,n,r,o):fw(t,e,n)}function Fl(t,e){return t.parentNode(e)}let Kp,yw=function mw(t,e,n){return 40&t.type?Et(t,n):null};function Ul(t,e,n,r){const o=qp(t,r,e),i=e[j],a=function gw(t,e,n){return yw(t,e,n)}(r.parent||e[lt],r,e);if(null!=o)if(Array.isArray(n))for(let c=0;c<n.length;c++)pw(i,o,n[c],a,!1);else pw(i,o,n,a,!1);void 0!==Kp&&Kp(i,r,e,n,o)}function na(t,e){if(null!==e){const n=e.type;if(3&n)return Et(e,t);if(4&n)return Wp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return na(t,r);{const o=t[e.index];return dt(o)?Wp(-1,o):ve(o)}}if(32&n)return Vp(e,t)()||ve(t[e.index]);{const r=Cw(t,e);return null!==r?Array.isArray(r)?r[0]:na(uo(t[Oe]),r):na(t,e.next)}}return null}function Cw(t,e){return null!==e?t[Oe][lt].projection[e.projection]:null}function Wp(t,e){const n=Ue+t+1;if(n<e.length){const r=e[n],o=r[A].firstChild;if(null!==o)return na(r,o)}return e[On]}function Qp(t,e,n,r,o,i,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===e&&(a&&ft(ve(a),r),n.flags|=2),32&~n.flags)if(8&c)Qp(t,e,n.child,r,o,i,!1),ui(e,t,o,a,i);else if(32&c){const l=Vp(n,r);let u;for(;u=l();)ui(e,t,o,u,i);ui(e,t,o,a,i)}else 16&c?Ew(t,e,r,n,o,i):ui(e,t,o,a,i);n=s?n.projectionNext:n.next}}function Hl(t,e,n,r,o,i){Qp(n,r,t.firstChild,e,o,i,!1)}function Ew(t,e,n,r,o,i){const s=n[Oe],c=s[lt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)ui(e,t,o,c[l],i);else{let l=c;const u=s[Fe];Il(r)&&(l.flags|=128),Qp(t,e,l,u,o,i,!0)}}function ww(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Tw(t,e,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&bf(t,e,r),null!==o&&ww(t,e,o),null!==i&&function F0(t,e,n){t.setAttribute(e,"style",n)}(t,e,i)}const W={};function pt(t=1){Sw(ne(),E(),ht()+t,!1)}function Sw(t,e,n,r){if(!r)if(3&~e[L]){const i=t.preOrderHooks;null!==i&&pl(e,i,0,n)}else{const i=t.preOrderCheckHooks;null!==i&&fl(e,i,n)}ho(n)}function U(t,e=te.Default){const n=E();return null===n?M(t,e):ZI(ge(),n,B(t),e)}function Aw(t,e,n,r,o,i){const s=J(null);try{let a=null;o&dn.SignalBased&&(a=e[r][eo]),null!==a&&void 0!==a.transformFn&&(i=a.transformFn(i)),o&dn.HasDecoratorInputTransform&&(i=t.inputTransforms[r].call(e,i)),null!==t.setInput?t.setInput(e,a,i,n,r):TI(e,a,r,i)}finally{J(s)}}function Bl(t,e,n,r,o,i,s,a,c,l,u){const d=e.blueprint.slice();return d[ke]=o,d[L]=204|r,(null!==l||t&&2048&t[L])&&(d[L]|=2048),MI(d),d[Fe]=d[Qo]=t,d[Te]=n,d[pn]=s||t&&t[pn],d[j]=a||t&&t[j],d[$e]=c||t&&t[$e]||null,d[lt]=i,d[xs]=function sP(){return iP++}(),d[qt]=u,d[CI]=l,d[Oe]=2==e.type?t[Oe]:d,d}function di(t,e,n,r,o){let i=t.data[e];if(null===i)i=function Yp(t,e,n,r,o){const i=PI(),s=Zf(),c=t.data[e]=function z0(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return function Xo(){return null!==V.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,e,r,o);return null===t.firstChild&&(t.firstChild=c),null!==i&&(s?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c,c.prev=i)),c}(t,e,n,r,o),function TO(){return V.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function Bs(){const t=V.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Ln(i,!0),i}function oa(t,e,n,r){if(0===n)return-1;const o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Dw(t,e,n,r,o){const i=ht(),s=2&r;try{ho(-1),s&&e.length>z&&Sw(t,e,z,!1),Pn(s?2:0,o),n(r,o)}finally{ho(i),Pn(s?3:1,o)}}function Jp(t,e,n){if(Bf(e)){const r=J(null);try{const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{J(r)}}}function Zp(t,e,n){OI()&&(function Z0(t,e,n,r){const o=n.directiveStart,i=n.directiveEnd;co(n)&&function ix(t,e,n){const r=Et(e,t),o=bw(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=jl(t,Bl(t,o,null,s,r,e,null,t[pn].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||ml(n,e),ft(r,e);const s=n.initialInputs;for(let a=o;a<i;a++){const c=t.data[a],l=fo(e,t,a,n);ft(l,e),null!==s&&sx(0,a-o,l,c,0,s),gn(c)&&(Kt(n.index,e)[Te]=fo(e,t,a,n))}}(t,e,n,Et(n,e)),!(64&~n.flags)&&Ow(t,e,n))}function Xp(t,e,n=Et){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(e,t):t[s];t[o++]=a}}}function bw(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=eg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function eg(t,e,n,r,o,i,s,a,c,l,u){const d=z+r,h=d+o,f=function H0(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:W);return n}(d,h),p="function"==typeof l?l():l;return f[A]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let Rw=()=>null;function Mw(t,e,n,r,o){for(let i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];if(void 0===s)continue;r??={};let a,c=dn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=i;if(null!==o){if(!o.hasOwnProperty(i))continue;l=o[i]}0===t?Nw(r,n,l,a,c):Nw(r,n,l,a)}return r}function Nw(t,e,n,r,o){let i;t.hasOwnProperty(n)?(i=t[n]).push(e,r):i=t[n]=[e,r],void 0!==o&&i.push(o)}function tg(t,e,n,r){if(OI()){const o=null===r?null:{"":-1},i=function ex(t,e){const n=t.directiveRegistry;let r=null,o=null;if(n)for(let i=0;i<n.length;i++){const s=n[i];if(aI(e,s.selectors,!1))if(r||(r=[]),gn(s))if(null!==s.findHostDirectiveDefs){const a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s),ng(t,e,a.length)}else r.unshift(s),ng(t,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return null===r?null:[r,o]}(t,n);let s,a;null===i?s=a=null:[s,a]=i,null!==s&&kw(t,e,n,s,o,a),o&&function tx(t,e,n){if(e){const r=t.localNames=[];for(let o=0;o<e.length;o+=2){const i=n[e[o+1]];if(null==i)throw new _(-301,!1);r.push(e[o],i)}}}(n,r,o)}n.mergedAttrs=Rs(n.mergedAttrs,n.attrs)}function kw(t,e,n,r,o,i){for(let l=0;l<r.length;l++)up(ml(n,e),t,r[l].type);!function rx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=oa(t,e,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];n.mergedAttrs=Rs(n.mergedAttrs,u.hostAttrs),ox(t,n,e,c,u),nx(c,u,o),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function q0(t,e,n){const o=e.directiveEnd,i=t.data,s=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<o;u++){const d=i[u],h=n?n.get(d):null,p=h?h.outputs:null;c=Mw(0,d.inputs,u,c,h?h.inputs:null),l=Mw(1,d.outputs,u,l,p);const m=null===c||null===s||Rf(e)?null:ax(c,u,s);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,i)}function Ow(t,e,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function _O(){return V.lFrame.currentDirectiveIndex}();try{ho(i);for(let a=r;a<o;a++){const c=t.data[a],l=e[a];ep(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&X0(c,l)}}finally{ho(-1),ep(s)}}function X0(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ng(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gn(e)&&(n[""]=t)}}function ox(t,e,n,r,o){t.data[r]=o;const i=o.factory||(o.factory=oo(o.type)),s=new Vs(i,gn(o),U);t.blueprint[r]=s,n[r]=s,function Y0(t,e,n,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function J0(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,i)}}(t,e,r,oa(t,n,o.hostVars,W),o)}function Bn(t,e,n,r,o,i){const s=Et(t,e);!function rg(t,e,n,r,o,i,s){if(null==i)t.removeAttribute(e,o,n);else{const a=null==s?G(i):s(i,r||"",o);t.setAttribute(e,o,a,n)}}(e[j],s,i,t.value,n,r,o)}function sx(t,e,n,r,o,i){const s=i[e];if(null!==s)for(let a=0;a<s.length;)Aw(r,n,s[a++],s[a++],s[a++],s[a++])}function ax(t,e,n){let r=null,o=0;for(;o<n.length;){const i=n[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(t.hasOwnProperty(i)){null===r&&(r=[]);const s=t[i];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(i,s[a+1],s[a+2],n[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Pw(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function xw(t,e){const n=t.contentQueries;if(null!==n){const r=J(null);try{for(let o=0;o<n.length;o+=2){const s=n[o+1];if(-1!==s){const a=t.data[s];dl(n[o]),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function jl(t,e){return t[Os]?t[vI][fn]=e:t[Os]=e,t[vI]=e,e}function og(t,e,n){dl(0);const r=J(null);try{e(t,n)}finally{J(r)}}function Vl(t,e){const n=t[$e],r=n?n.get(Hn,null):null;r&&r.handleError(e)}function ig(t,e,n,r,o){for(let i=0;i<n.length;){const s=n[i++],a=n[i++],c=n[i++];Aw(t.data[s],e[s],r,a,c,o)}}function lr(t,e,n){const r=function Fs(t,e){return ve(e[t])}(e,t);!function lw(t,e,n){t.setValue(e,n)}(t[j],r,n)}function cx(t,e){const n=Kt(e,t),r=n[A];!function lx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const o=n[ke];null!==o&&null===n[qt]&&(n[qt]=bp(o,n[$e])),sg(r,n,n[Te])}function sg(t,e,n){rp(e);try{const r=t.viewQuery;null!==r&&og(1,r,n);const o=t.template;null!==o&&Dw(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ir]?.finishViewCreation(t),t.staticContentQueries&&xw(t,e),t.staticViewQueries&&og(2,t.viewQuery,n);const i=t.components;null!==i&&function ux(t,e){for(let n=0;n<e.length;n++)cx(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[L]&=-5,op()}}function hi(t,e){return!e||null===e.firstChild||Il(t)}function sa(t,e,n,r=!0){const o=e[A];if(function b0(t,e,n,r){const o=Ue+r,i=n.length;r>0&&(n[o-1][fn]=e),r<i-Ue?(e[fn]=n[o],XC(n,Ue+r,e)):(n.push(e),e[fn]=null),e[Fe]=n;const s=e[Ps];null!==s&&n!==s&&function R0(t,e){const n=t[Jo];e[Oe]!==e[Fe][Fe][Oe]&&(t[L]|=Hf.HasTransplantedViews),null===n?t[Jo]=[e]:n.push(e)}(s,e);const a=e[ir];null!==a&&a.insertView(t),Wf(e),e[L]|=128}(o,e,t,n),r){const s=Wp(n,t),a=e[j],c=Fl(a,t[On]);null!==c&&function A0(t,e,n,r,o,i){r[ke]=o,r[lt]=e,Hl(t,r,n,1,o,i)}(o,t[lt],a,e,c,s)}const i=e[qt];null!==i&&null!==i.firstChild&&(i.firstChild=null)}function aa(t,e,n,r,o=!1){for(;null!==n;){const i=e[n.index];null!==i&&r.push(ve(i)),dt(i)&&Bw(i,r);const s=n.type;if(8&s)aa(t,e,n.child,r);else if(32&s){const a=Vp(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=Cw(e,n);if(Array.isArray(a))r.push(...a);else{const c=uo(e[Oe]);aa(c[A],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function Bw(t,e){for(let n=Ue;n<t.length;n++){const r=t[n],o=r[A].firstChild;null!==o&&aa(r[A],r,o,e)}t[On]!==t[ke]&&e.push(t[On])}let jw=[];const px={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Hs(t.lView)},consumerOnSignalRead(){this.lView[ao]=this}},Vw=100;function $l(t,e=!0,n=0){const r=t[pn],o=r.rendererFactory;o.begin?.();try{!function gx(t,e){cg(t,e);let n=0;for(;Kf(t);){if(n===Vw)throw new _(103,!1);n++,cg(t,1)}}(t,n)}catch(s){throw e&&Vl(t,s),s}finally{o.end?.(),r.inlineEffectRunner?.flush()}}function mx(t,e,n,r){const o=e[L];if(!(256&~o))return;e[pn].inlineEffectRunner?.flush(),rp(e);let s=null,a=null;(function yx(t){return 2!==t.type})(t)&&(a=function dx(t){return t[ao]??function hx(t){const e=jw.pop()??Object.create(px);return e.lView=t,e}(t)}(e),s=function SC(t){return t&&(t.nextProducerIndex=0),J(t)}(a));try{MI(e),function LI(t){return V.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Dw(t,e,n,2,r);const c=!(3&~o);if(c){const d=t.preOrderCheckHooks;null!==d&&fl(e,d,null)}else{const d=t.preOrderHooks;null!==d&&pl(e,d,0,null),ip(e,0)}if(function vx(t){for(let e=wE(t);null!==e;e=TE(e)){if(!(e[L]&Hf.HasTransplantedViews))continue;const n=e[Jo];for(let r=0;r<n.length;r++){fO(n[r])}}}(e),$w(e,0),null!==t.contentQueries&&xw(t,e),c){const d=t.contentCheckHooks;null!==d&&fl(e,d)}else{const d=t.contentHooks;null!==d&&pl(e,d,1),ip(e,1)}!function U0(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)ho(~o);else{const i=o,s=n[++r],a=n[++r];SO(s,i),a(2,e[i])}}}finally{ho(-1)}}(t,e);const l=t.components;null!==l&&zw(e,l,0);const u=t.viewQuery;if(null!==u&&og(2,u,r),c){const d=t.viewCheckHooks;null!==d&&fl(e,d)}else{const d=t.viewHooks;null!==d&&pl(e,d,2),ip(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[al]){for(const d of e[al])d();e[al]=null}e[L]&=-73}catch(c){throw Hs(e),c}finally{null!==a&&(function _C(t,e){if(J(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ss(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Uc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(a,s),function fx(t){t.lView[ao]!==t&&(t.lView=null,jw.push(t))}(a)),op()}}function $w(t,e){for(let n=wE(t);null!==n;n=TE(n))for(let r=Ue;r<n.length;r++)Gw(n[r],e)}function Cx(t,e,n){Gw(Kt(e,t),n)}function Gw(t,e){qf(t)&&cg(t,e)}function cg(t,e){const r=t[A],o=t[L],i=t[ao];let s=!!(0===e&&16&o);if(s||=!!(64&o&&0===e),s||=!!(1024&o),s||=!(!i?.dirty||!Yh(i)),i&&(i.dirty=!1),t[L]&=-9217,s)mx(r,t,r.template,t[Te]);else if(8192&o){$w(t,1);const a=r.components;null!==a&&zw(t,a,1)}}function zw(t,e,n){for(let r=0;r<e.length;r++)Cx(t,e[r],n)}function ca(t){for(t[pn].changeDetectionScheduler?.notify();t;){t[L]|=64;const e=uo(t);if(jf(t)&&!e)return t;t=e}return null}class la{get rootNodes(){const e=this._lView,n=e[A];return aa(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Te]}set context(e){this._lView[Te]=e}get destroyed(){return!(256&~this._lView[L])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Fe];if(dt(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(ta(e,r),Jc(n,r))}this._attachedToViewContainer=!1}Ll(this._lView[A],this._lView)}onDestroy(e){ul(this._lView,e)}markForCheck(){ca(this._cdRefInjectingView||this._lView)}detach(){this._lView[L]&=-129}reattach(){Wf(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,$l(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,uw(this._lView[A],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _(902,!1);this._appRef=e,Wf(this._lView)}}let ur=(()=>{class t{static{this.__NG_ELEMENT_ID__=wx}}return t})();const Ix=ur,Ex=class extends Ix{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const o=function ia(t,e,n,r){const o=J(null);try{const i=e.tView,c=Bl(t,i,n,4096&t[L]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[Ps]=t[e.index];const u=t[ir];return null!==u&&(c[ir]=u.createEmbeddedView(i)),sg(i,c,n),c}finally{J(o)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new la(o)}};function wx(){return function Gl(t,e){return 4&t.type?new Ex(e,t,oi(t,e)):null}(ge(),E())}class pg{}class qx{}class Zw{}class Wx{resolveComponentFactory(e){throw function Kx(t){const e=Error(`No component factory found for ${Ke(t)}.`);return e.ngComponent=t,e}(e)}}let Ql=(()=>{class t{static{this.NULL=new Wx}}return t})();class eT{}let Yl=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function Qx(){const t=E(),n=Kt(ge().index,t);return(ut(n)?n:t)[j]}()}}return t})(),Yx=(()=>{class t{static{this.\u0275prov=k({token:t,providedIn:"root",factory:()=>null})}}return t})();const gg={},tT=new Set;function jn(t){tT.has(t)||(tT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function nT(...t){}class fe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tt(!1),this.onMicrotaskEmpty=new Tt(!1),this.onStable=new Tt(!1),this.onError=new Tt(!1),typeof Zone>"u")throw new _(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function Jx(){const t="function"==typeof he.requestAnimationFrame;let e=he[t?"requestAnimationFrame":"setTimeout"],n=he[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function eL(t){const e=()=>{!function Xx(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(he,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,yg(t),t.isCheckStableRunning=!0,mg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),yg(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{if(function tL(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(o,i,s,a);try{return rT(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),oT(t)}},onInvoke:(n,r,o,i,s,a,c)=>{try{return rT(t),n.invoke(o,i,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),oT(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,yg(t),mg(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fe.isInAngularZone())throw new _(909,!1)}static assertNotInAngularZone(){if(fe.isInAngularZone())throw new _(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,Zx,nT,nT);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Zx={};function mg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yg(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function rT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function oT(t){t._nesting--,mg(t)}class iT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tt,this.onMicrotaskEmpty=new Tt,this.onStable=new Tt,this.onError=new Tt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}}var go=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(go||{});const sT={destroy(){}};function Cg(t,e){!e&&function il(t){if(!mI())throw new _(-203,!1)}();const n=e?.injector??T(Lt);if(!function yn(t){return"browser"===(t??T(Lt)).get(Mr)}(n))return sT;jn("NgAfterNextRender");const r=n.get(pa),o=r.handler??=new cT,i=e?.phase??go.MixedReadWrite,s=()=>{o.unregister(c),a()},a=n.get(ri).onDestroy(s),c=kn(n,()=>new aT(i,()=>{s(),t()}));return o.register(c),{destroy:s}}class aT{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=T(fe),this.errorHandler=T(Hn,{optional:!0}),T(pg,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class cT{constructor(){this.executingCallbacks=!1,this.buckets={[go.EarlyRead]:new Set,[go.Write]:new Set,[go.MixedReadWrite]:new Set,[go.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let pa=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=k({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Zl(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=df(o,a):2==i&&(r=df(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}class dT extends Ql{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Z(e);return new ya(n,this.ngModule)}}function hT(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}class Xl{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Wc(r);const o=this.injector.get(e,gg,r);return o!==gg||n===gg?o:this.parentInjector.get(e,n,r)}}class ya extends Zw{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=hT(e.inputs);if(null!==n)for(const o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return hT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Nk(t){return t.map(Mk).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,o){const i=J(null);try{let s=(o=o||this.ngModule)instanceof It?o:o?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Xl(e,s):e,c=a.get(eT,null);if(null===c)throw new _(407,!1);const l=a.get(Yx,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(pa,null),changeDetectionScheduler:a.get(pg,null)},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=r?function B0(t,e,n,r){const i=r.get(HE,!1)||n===un.ShadowDom,s=t.selectRootElement(e,i);return function j0(t){Rw(t)}(s),s}(f,r,this.componentDef.encapsulation,a):xl(f,p,function sL(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(p));let y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let C=null;null!==m&&(C=bp(m,a,!0));const I=eg(0,null,null,1,0,null,null,null,null,null,null),D=Bl(null,I,null,y,null,null,h,f,a,null,C);let F,Q;rp(D);try{const de=this.componentDef;let ot,Tr=null;de.findHostDirectiveDefs?(ot=[],Tr=new Map,de.findHostDirectiveDefs(de,ot,Tr),ot.push(de)):ot=[de];const _N=function cL(t,e){const n=t[A],r=z;return t[r]=e,di(n,r,2,"#host",null)}(D,m),MW=function lL(t,e,n,r,o,i,s){const a=o[A];!function uL(t,e,n,r){for(const o of t)e.mergedAttrs=Rs(e.mergedAttrs,o.hostAttrs);null!==e.mergedAttrs&&(Zl(e,e.mergedAttrs,!0),null!==n&&Tw(r,n,e))}(r,t,e,s);let c=null;null!==e&&(c=bp(e,o[$e]));const l=i.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const d=Bl(o,bw(n),null,u,o[t.index],t,i,l,null,null,c);return a.firstCreatePass&&ng(a,t,r.length-1),jl(o,d),o[t.index]=d}(_N,m,de,ot,D,h,f);Q=Us(I,z),m&&function hL(t,e,n,r){if(r)bf(t,n,["ng-version","17.3.12"]);else{const{attrs:o,classes:i}=function kk(t){const e=[],n=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++r]):8===o&&n.push(i);else{if(!hn(o))break;o=i}r++}return{attrs:e,classes:n}}(e.selectors[0]);o&&bf(t,n,o),i&&i.length>0&&ww(t,n,i.join(" "))}}(f,de,m,r),void 0!==n&&function fL(t,e,n){const r=t.projection=[];for(let o=0;o<e.length;o++){const i=n[o];r.push(null!=i?Array.from(i):null)}}(Q,this.ngContentSelectors,n),F=function dL(t,e,n,r,o,i){const s=ge(),a=o[A],c=Et(s,o);kw(a,o,s,n,null,r);for(let u=0;u<n.length;u++)ft(fo(o,a,s.directiveStart+u,s),o);Ow(a,o,s),c&&ft(c,o);const l=fo(o,a,s.directiveStart+s.componentOffset,s);if(t[Te]=o[Te]=l,null!==i)for(const u of i)u(l,e);return Jp(a,s,o),l}(MW,de,ot,Tr,D,[pL]),sg(I,D,null)}finally{op()}return new aL(this.componentType,F,oi(Q,D),D,Q)}finally{J(i)}}}class aL extends qx{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new la(o,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const i=this._rootLView;ig(i[A],i,o,e,n),this.previousInputValues.set(e,n),ca(Kt(this._tNode.index,i))}}get injector(){return new Ye(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function pL(){const t=ge();hl(E()[A],t)}let vn=(()=>{class t{static{this.__NG_ELEMENT_ID__=gL}}return t})();function gL(){return function gT(t,e){let n;const r=e[t.index];return dt(r)?n=r:(n=Pw(r,e,null,t),e[t.index]=n,jl(e,n)),mT(n,e,t,r),new fT(n,t,e)}(ge(),E())}const mL=vn,fT=class extends mL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return oi(this._hostTNode,this._hostLView)}get injector(){return new Ye(this._hostTNode,this._hostLView)}get parentInjector(){const e=yl(this._hostTNode,this._hostLView);if(ap(e)){const n=Gs(e,this._hostLView),r=$s(e);return new Ye(n[A].data[r+8],n)}return new Ye(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=pT(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(e,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(a,o,hi(this._hostTNode,null)),a}createComponent(e,n,r,o,i){const s=e&&!function ks(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const p=n||{};a=p.index,r=p.injector,o=p.projectableNodes,i=p.environmentInjector||p.ngModuleRef}const c=s?e:new ya(Z(e)),l=r||this.parentInjector;if(!i&&null==c.ngModule){const m=(s?l:this.parentInjector).get(It,null);m&&(i=m)}Z(c.componentType??{});const f=c.create(l,o,null,i);return this.insertImpl(f.hostView,a,hi(this._hostTNode,null)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const o=e._lView;if(function hO(t){return dt(t[Fe])}(o)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=o[Fe],l=new fT(c,c[lt],c[Fe]);l.detach(l.indexOf(e))}}const i=this._adjustIndex(n),s=this._lContainer;return sa(s,o,i,r),e.attachToViewContainerRef(),XC(wg(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=pT(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=ta(this._lContainer,n);r&&(Jc(wg(this._lContainer),n),Ll(r[A],r))}detach(e){const n=this._adjustIndex(e,-1),r=ta(this._lContainer,n);return r&&null!=Jc(wg(this._lContainer),n)?new la(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function pT(t){return t[8]}function wg(t){return t[8]||(t[8]=[])}let mT=function vT(t,e,n,r){if(t[On])return;let o;o=8&n.type?ve(r):function yL(t,e){const n=t[j],r=n.createComment(""),o=Et(e,t);return po(n,Fl(n,o),r,function O0(t,e){return t.nextSibling(e)}(n,o),!1),r}(e,n),t[On]=o},Tg=()=>!1;function GT(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const o=e[r];Array.isArray(o)&&o[3]&&(n[r]=o[3])}t.inputTransforms=n}class mo{}class zT{}class kg extends mo{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dT(this);const o=ct(e);this._bootstrapComponents=Wt(o.bootstrap),this._r3Injector=cE(e,n,[{provide:mo,useValue:this},{provide:Ql,useValue:this.componentFactoryResolver},...r],Ke(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Og extends zT{constructor(e){super(),this.moduleType=e}create(e){return new kg(this.moduleType,e,[])}}class qT extends mo{constructor(e){super(),this.componentFactoryResolver=new dT(this),this.instance=null;const n=new zo([...e.providers,{provide:mo,useValue:this},{provide:Ql,useValue:this.componentFactoryResolver}],e.parent||ol(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function nu(t,e,n=null){return new qT({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let xr=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Vt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function He(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function vo(t,e,n,r,o,i,s,a){const c=E(),l=ne(),u=t+z,d=l.firstCreatePass?function eF(t,e,n,r,o,i,s,a,c){const l=e.consts,u=di(e,t,4,s||null,xn(l,a));tg(e,n,u,xn(l,c)),hl(e,u);const d=u.tView=eg(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,n,r,o,i,s):l.data[u];Ln(d,!1);const h=KT(l,c,d,t);js()&&Ul(l,c,h,d),ft(h,c);const f=Pw(h,c,h,d);return c[u]=f,jl(c,f),function yT(t,e,n){return Tg(t,e,n)}(f,d,c),ll(d)&&Zp(l,c,d),null!=s&&Xp(c,d,a),vo}let KT=function WT(t,e,n,r){return Fn(!0),e[j].createComment("")};function Gg(t,e,n,r){const o=E();return He(o,mn(),e)&&(ne(),Bn(Se(),o,t,e,n,r)),Gg}function Ni(t,e,n){const r=E();return He(r,mn(),e)&&function Ut(t,e,n,r,o,i,s,a){const c=Et(e,n);let u,l=e.inputs;!a&&null!=l&&(u=l[r])?(ig(t,n,u,r,o),co(e)&&function W0(t,e){const n=Kt(e,t);16&n[L]||(n[L]|=64)}(n,e.index)):3&e.type&&(r=function K0(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,e.value||"",r):o,i.setProperty(c,r,o))}(ne(),Se(),r,t,e,r[j],n,!1),Ni}function Wg(t,e,n,r,o){const s=o?"class":"style";ig(t,n,e.inputs[s],s,r)}function _e(t,e,n,r){const o=E(),i=ne(),s=z+t,a=o[j],c=i.firstCreatePass?function _1(t,e,n,r,o,i){const s=e.consts,c=di(e,t,2,r,xn(s,o));return tg(e,n,c,xn(s,i)),null!==c.attrs&&Zl(c,c.attrs,!1),null!==c.mergedAttrs&&Zl(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,i,o,e,n,r):i.data[s],l=$S(i,o,c,a,e,t);o[s]=l;const u=ll(c);return Ln(c,!0),Tw(a,l,c),!function Ia(t){return!(32&~t.flags)}(c)&&js()&&Ul(i,o,l,c),0===function pO(){return V.lFrame.elementDepthCount}()&&ft(l,o),function gO(){V.lFrame.elementDepthCount++}(),u&&(Zp(i,o,c),Jp(i,c,o)),null!==r&&Xp(o,c),_e}function ee(){let t=ge();Zf()?function Xf(){V.lFrame.isParent=!1}():(t=t.parent,Ln(t,!1));const e=t;(function yO(t){return V.skipHydrationRootTNode===t})(e)&&function EO(){V.skipHydrationRootTNode=null}(),function mO(){V.lFrame.elementDepthCount--}();const n=ne();return n.firstCreatePass&&(hl(n,t),Bf(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function LO(t){return!!(8&t.flags)}(e)&&Wg(n,e,E(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function FO(t){return!!(16&t.flags)}(e)&&Wg(n,e,E(),e.stylesWithoutHost,!1),ee}function ki(t,e,n,r){return _e(t,e,n,r),ee(),ki}let $S=(t,e,n,r,o,i)=>(Fn(!0),xl(r,o,function $I(){return V.lFrame.currentNamespace}()));function nm(){return E()}const Pi="en-US";let YS=Pi;function Na(t,e,n,r){const o=E(),i=ne(),s=ge();return function im(t,e,n,r,o,i,s){const a=ll(r),l=t.firstCreatePass&&function Fw(t){return t.cleanup||(t.cleanup=[])}(t),u=e[Te],d=function Lw(t){return t[Wo]||(t[Wo]=[])}(e);let h=!0;if(3&r.type||s){const m=Et(r,e),y=s?s(m):m,C=d.length,I=s?F=>s(ve(F[r.index])):r.index;let D=null;if(!s&&a&&(D=function RU(t,e,n,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=e[Wo],c=o[i+2];return a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(t,e,o,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=i,D.__ngLastListenerFn__=i,h=!1;else{i=S_(r,e,u,i,!1);const F=n.listen(y,o,i);d.push(i,F),l&&l.push(o,I,C,C+1)}}else i=S_(r,e,u,i,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[o])){const m=p.length;if(m)for(let y=0;y<m;y+=2){const Q=e[p[y]][p[y+1]].subscribe(i),de=d.length;d.push(i,Q),l&&l.push(o,r.index,de,-(de+1))}}}(i,o,o[j],s,t,e,r),Na}function T_(t,e,n,r){const o=J(null);try{return Pn(6,e,n),!1!==n(r)}catch(i){return Vl(t,i),!1}finally{Pn(7,e,n),J(o)}}function S_(t,e,n,r,o){return function i(s){if(s===Function)return r;ca(t.componentOffset>-1?Kt(t.index,e):e);let c=T_(e,n,r,s),l=i.__ngNextListenerFn__;for(;l;)c=T_(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return o&&!1===c&&s.preventDefault(),c}}function sm(t=1){return function DO(t){return(V.lFrame.contextLView=function NI(t,e){for(;t>0;)e=e[Qo],t--;return e}(t,V.lFrame.contextLView))[Te]}(t)}function ae(t,e=""){const n=E(),r=ne(),o=t+z,i=r.firstCreatePass?di(r,o,1,e,null):r.data[o],s=q_(r,n,i,e,t);n[o]=s,js()&&Ul(r,n,s,i),Ln(i,!1)}let q_=(t,e,n,r,o)=>(Fn(!0),function $p(t,e){return t.createText(e)}(e[j],r));function _t(t,e,n){const r=E(),o=function wi(t,e,n,r){return He(t,mn(),n)?e+G(n)+r:W}(r,t,e,n);return o!==W&&lr(r,ht(),o),_t}let nH=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Mf(0,n.type),o=r.length>0?nu([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=k({token:t,providedIn:"environment",factory:()=>new t(M(It))})}}return t})();function iA(t){jn("NgStandalone"),t.getStandaloneInjector=e=>e.get(nH).getOrCreateStandaloneInjector(t)}function aA(t,e,n){const r=function wt(){const t=V.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,o=E();return o[r]===W?function Vn(t,e,n){return t[e]=n}(o,r,n?e.call(n):e()):function Ca(t,e){return t[e]}(o,r)}let bA=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const OA=new R(""),Eu=new R("");let Cm,ym=(()=>{class t{constructor(n,r,o){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Cm||(function pB(t){Cm=t}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n()},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}static{this.\u0275fac=function(r){return new(r||t)(M(fe),M(vm),M(Eu))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})(),vm=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Cm?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function wu(t){return!!t&&"function"==typeof t.then}function PA(t){return!!t&&"function"==typeof t.subscribe}const Im=new R("");let Em=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=T(Im,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const i=o();if(wu(i))n.push(i);else if(PA(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const wm=new R("");function FA(t,e){return Array.isArray(e)?e.reduce(FA,t):{...t,...e}}let Ur=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=T(uE),this.afterRenderEffectManager=T(pa),this.externalTestViews=new Set,this.beforeRender=new kt,this.afterTick=new kt,this.componentTypes=[],this.components=[],this.isStable=T(xr).hasPendingTasks.pipe(ie(n=>!n)),this._injector=T(It)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const o=n instanceof Zw;if(!this._injector.get(Em).done)throw!o&&function Ar(t){const e=Z(t)||We(t)||st(t);return null!==e&&e.standalone}(n),new _(405,!1);let s;s=o?n:this._injector.get(Ql).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function gB(t){return t.isBoundToModule}(s)?void 0:this._injector.get(mo),l=s.create(Lt.NULL,[],r||s.selector,a),u=l.location.nativeElement,d=l.injector.get(OA,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),Tu(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new _(101,!1);const r=J(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,J(r)}}detectChangesInAttachedViews(n){let r=0;const o=this.afterRenderEffectManager;for(;;){if(r===Vw)throw new _(103,!1);if(n){const i=0===r;this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:a}of this._views)yB(s,i,a)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>Tm(i))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:i})=>Tm(i))))break}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Tu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(wm,[]);[...this._bootstrapListeners,...r].forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Tu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new _(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Tu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function yB(t,e,n){!e&&!Tm(t)||function vB(t,e,n){let r;n?(r=0,t[L]|=1024):r=64&t[L]?0:1,$l(t,e,r)}(t,n,e)}function Tm(t){return Kf(t)}class CB{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let UA=(()=>{class t{compileModuleSync(n){return new Og(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=Wt(ct(n).declarations).reduce((s,a)=>{const c=Z(a);return c&&s.push(new ya(c)),s},[]);return new CB(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),wB=(()=>{class t{constructor(){this.zone=T(fe),this.applicationRef=T(Ur)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function TB(){const t=T(fe),e=T(Hn);return n=>t.runOutsideAngular(()=>e.handleError(n))}let _B=(()=>{class t{constructor(){this.subscription=new Nt,this.initialized=!1,this.zone=T(fe),this.pendingTasks=T(xr)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const dr=new R("",{providedIn:"root",factory:()=>T(dr,te.Optional|te.SkipSelf)||function AB(){return typeof $localize<"u"&&$localize.locale||Pi}()}),Sm=new R("");let VA=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const o=function nL(t="zone.js",e){return"noop"===t?new iT:"zone.js"===t?new fe(e):t}(r?.ngZone,function jA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const i=function WL(t,e,n){return new kg(t,e,n)}(n.moduleType,this.injector,function BA(t){return[{provide:fe,useFactory:t},{provide:io,multi:!0,useFactory:()=>{const e=T(wB,{optional:!0});return()=>e.initialize()}},{provide:io,multi:!0,useFactory:()=>{const e=T(_B);return()=>{e.initialize()}}},{provide:uE,useFactory:TB}]}(()=>o)),s=i.injector.get(Hn,null);return o.runOutsideAngular(()=>{const a=o.onError.subscribe({next:c=>{s.handleError(c)}});i.onDestroy(()=>{Tu(this._modules,i),a.unsubscribe()})}),function LA(t,e,n){try{const r=n();return wu(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,o,()=>{const a=i.injector.get(Em);return a.runInitializers(),a.donePromise.then(()=>(function JS(t){"string"==typeof t&&(YS=t.toLowerCase().replace(/_/g,"-"))}(i.injector.get(dr,Pi)||Pi),this._moduleDoBootstrap(i),i))})})}bootstrapModule(n,r=[]){const o=FA({},r);return function EB(t,e,n){const r=new Og(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(n){const r=n.injector.get(Ur);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new _(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Sm,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||t)(M(Lt))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})(),Hr=null;const $A=new R("");function GA(t,e,n=[]){const r=`Platform: ${e}`,o=new R(r);return(i=[])=>{let s=_m();if(!s||s.injector.get($A,!1)){const a=[...n,...i,{provide:o,useValue:!0}];t?t(a):function RB(t){if(Hr&&!Hr.get($A,!1))throw new _(400,!1);(function xA(){!function ON(t){RC=t}(()=>{throw new _(600,!1)})})(),Hr=t;const e=t.get(VA);(function qA(t){t.get(kE,null)?.forEach(n=>n())})(t)}(function zA(t=[],e){return Lt.create({name:e,providers:[{provide:Of,useValue:"platform"},{provide:Sm,useValue:new Set([()=>Hr=null])},...t]})}(a,r))}return function MB(t){const e=_m();if(!e)throw new _(401,!1);return e}()}}function _m(){return Hr?.get(VA)??null}let _u=(()=>{class t{static{this.__NG_ELEMENT_ID__=kB}}return t})();function kB(t){return function OB(t,e,n){if(co(t)&&!n){const r=Kt(t.index,e);return new la(r,r)}return 47&t.type?new la(e[Oe],e):null}(ge(),E(),!(16&~t))}const zB=GA(null,"core",[]);let qB=(()=>{class t{constructor(n){}static{this.\u0275fac=function(r){return new(r||t)(M(Ur))}}static{this.\u0275mod=or({type:t})}static{this.\u0275inj=Mn({})}}return t})();function Om(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let _D=null;function Ui(){return _D}class Rj{}const Bt=new R("");let Pm=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>T(Nj),providedIn:"platform"})}}return t})();const Mj=new R("");let Nj=(()=>{class t extends Pm{constructor(){super(),this._doc=T(Bt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ui().getBaseHref(this._doc)}onPopState(n){const r=Ui().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Ui().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function xm(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function AD(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function hr(t){return t&&"?"!==t[0]?"?"+t:t}let To=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>T(bD),providedIn:"root"})}}return t})();const DD=new R("");let bD=(()=>{class t extends To{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??T(Bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return xm(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+hr(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+hr(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+hr(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(M(Pm),M(DD,8))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kj=(()=>{class t extends To{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=xm(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+hr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+hr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(M(Pm),M(DD,8))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})(),Br=(()=>{class t{constructor(n){this._subject=new Tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function xj(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(AD(RD(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+hr(r))}normalize(n){return t.stripTrailingSlash(function Pj(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,RD(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hr(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}static{this.normalizeQueryParams=hr}static{this.joinWithSlash=xm}static{this.stripTrailingSlash=AD}static{this.\u0275fac=function(r){return new(r||t)(M(To))}}static{this.\u0275prov=k({token:t,factory:()=>function Oj(){return new Br(M(To))}(),providedIn:"root"})}}return t})();function RD(t){return t.replace(/\/index.html$/,"")}function UD(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}let VD=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new TV,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){$D("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){$D("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(U(vn),U(ur))}}static{this.\u0275dir=Ct({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})();class TV{constructor(){this.$implicit=null,this.ngIf=null}}function $D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Ke(e)}'.`)}let qD=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=or({type:t})}static{this.\u0275inj=Mn({})}}return t})();const KD="browser";function WD(t){return"server"===t}let XV=(()=>{class t{static{this.\u0275prov=k({token:t,providedIn:"root",factory:()=>function ZV(t){return t===KD}(T(Mr))?new e$(T(Bt),window):new n$})}}return t})();class e${constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function t$(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}}class n${setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class QD{}class M$ extends Rj{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Jm extends M${static makeCurrent(){!function bj(t){_D??=t}(new Jm)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function N$(){return ja=ja||document.querySelector("base"),ja?ja.getAttribute("href"):null}();return null==n?null:function k$(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){ja=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return UD(document.cookie,e)}}let ja=null,P$=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();const Zm=new R("");let ob=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new _(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(M(Zm),M(fe))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();class ib{constructor(e){this._doc=e}}const Xm="ng-app-id";let sb=(()=>{class t{constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=WD(i),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Xm}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){const o=this.styleRef;if(o.has(n)){const i=o.get(n);return i.usage+=r,i.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===n)return o.delete(r),i.removeAttribute(Xm),i;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Xm,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){const o=this.getStyleElement(n,r),i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(M(Bt),M(Tl),M(OE,8),M(Mr))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();const ey={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ty=/%COMP%/g,U$=new R("",{providedIn:"root",factory:()=>!0});function cb(t,e){return e.map(n=>n.replace(ty,t))}let lb=(()=>{class t{constructor(n,r,o,i,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=WD(a),this.defaultRenderer=new ny(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===un.ShadowDom&&(r={...r,encapsulation:un.Emulated});const o=this.getOrCreateRenderer(n,r);return o instanceof db?o.applyToHost(n):o instanceof ry&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case un.Emulated:i=new db(c,l,r,this.appId,u,s,a,d);break;case un.ShadowDom:return new V$(c,l,n,r,s,a,this.nonce,d);default:i=new ry(c,l,r,u,s,a,d)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(M(ob),M(sb),M(Tl),M(U$),M(Bt),M(Mr),M(fe),M(OE))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();class ny{constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ey[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ub(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ub(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new _(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const i=ey[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=ey[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(kr.DashCase|kr.Important)?e.style.setProperty(n,r,o&kr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&kr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=Ui().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function ub(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class V$ extends ny{constructor(e,n,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=cb(o.id,o.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ry extends ny{constructor(e,n,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=c?cb(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class db extends ry{constructor(e,n,r,o,i,s,a,c){const l=o+"-"+r.id;super(e,n,r,i,s,a,c,l),this.contentAttr=function H$(t){return"_ngcontent-%COMP%".replace(ty,t)}(l),this.hostAttr=function B$(t){return"_nghost-%COMP%".replace(ty,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let $$=(()=>{class t extends ib{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||t)(M(Bt))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();const hb=["alt","control","meta","shift"],G$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let q$=(()=>{class t extends ib{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ui().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),hb.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let o=G$[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),hb.forEach(s=>{s!==o&&(0,z$[s])(n)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(M(Bt))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();const Y$=GA(zB,"browser",[{provide:Mr,useValue:KD},{provide:kE,useValue:function K$(){Jm.makeCurrent()},multi:!0},{provide:Bt,useFactory:function Q$(){return function SP(t){Ip=t}(document),document},deps:[]}]),J$=new R(""),gb=[{provide:Eu,useClass:class O${addToWindow(e){he.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new _(5103,!1);return i},he.getAllAngularTestabilities=()=>e.getAllTestabilities(),he.getAllAngularRootElements=()=>e.getAllRootElements(),he.frameworkStabilizers||(he.frameworkStabilizers=[]),he.frameworkStabilizers.push(r=>{const o=he.getAllAngularTestabilities();let i=o.length;const s=function(){i--,0==i&&r()};o.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Ui().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:OA,useClass:ym,deps:[fe,vm,Eu]},{provide:ym,useClass:ym,deps:[fe,vm,Eu]}],mb=[{provide:Of,useValue:"root"},{provide:Hn,useFactory:function W$(){return new Hn},deps:[]},{provide:Zm,useClass:$$,multi:!0,deps:[Bt,fe,Mr]},{provide:Zm,useClass:q$,multi:!0,deps:[Bt]},lb,sb,ob,{provide:eT,useExisting:lb},{provide:QD,useClass:P$,deps:[]},[]];let Z$=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Tl,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||t)(M(J$,12))}}static{this.\u0275mod=or({type:t})}static{this.\u0275inj=Mn({providers:[...mb,...gb],imports:[qD,qB]})}}return t})(),X$=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(M(Bt))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function oy(t){return t[t.length-1]}function Wu(t){return function r2(t){return t&&Re(t.schedule)}(oy(t))?t.pop():void 0}function jr(t){return this instanceof jr?(this.v=t,this):new jr(t)}function Tb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function cy(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}(a,c,(s=t[i](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Sb=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function _b(t){return Re(t?.then)}function Ab(t){return Re(t[lf])}function Db(t){return Symbol.asyncIterator&&Re(t?.[Symbol.asyncIterator])}function bb(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Rb=function N2(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Mb(t){return Re(t?.[Rb])}function Nb(t){return function wb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(f){return function(p){return Promise.resolve(p).then(f,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(f,p){r[f]&&(o[f]=function(m){return new Promise(function(y,C){i.push([f,m,y,C])>1||c(f,m)})},p&&(o[f]=p(o[f])))}function c(f,p){try{!function l(f){f.value instanceof jr?Promise.resolve(f.value.v).then(u,d):h(i[0][2],f)}(r[f](p))}catch(m){h(i[0][3],m)}}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:o}=yield jr(n.read());if(o)return yield jr(void 0);yield yield jr(r)}}finally{n.releaseLock()}})}function kb(t){return Re(t?.getReader)}function gr(t){if(t instanceof qe)return t;if(null!=t){if(Ab(t))return function k2(t){return new qe(e=>{const n=t[lf]();if(Re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Sb(t))return function O2(t){return new qe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(_b(t))return function P2(t){return new qe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,xC)})}(t);if(Db(t))return Ob(t);if(Mb(t))return function x2(t){return new qe(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(kb(t))return function L2(t){return Ob(Nb(t))}(t)}throw bb(t)}function Ob(t){return new qe(e=>{(function F2(t,e){var n,r,o,i;return function Ib(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):function o(i){return i instanceof n?i:new n(function(s){s(i)})}(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Tb(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function mr(t,e,n,r=0,o=!1){const i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function Pb(t,e=0){return it((n,r)=>{n.subscribe(et(r,o=>mr(r,t,()=>r.next(o),e),()=>mr(r,t,()=>r.complete(),e),o=>mr(r,t,()=>r.error(o),e)))})}function xb(t,e=0){return it((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Lb(t,e){if(!t)throw new Error("Iterable cannot be null");return new qe(n=>{mr(n,e,()=>{const r=t[Symbol.asyncIterator]();mr(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function me(t,e){return e?function $2(t,e){if(null!=t){if(Ab(t))return function U2(t,e){return gr(t).pipe(xb(e),Pb(e))}(t,e);if(Sb(t))return function B2(t,e){return new qe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(_b(t))return function H2(t,e){return gr(t).pipe(xb(e),Pb(e))}(t,e);if(Db(t))return Lb(t,e);if(Mb(t))return function j2(t,e){return new qe(n=>{let r;return mr(n,e,()=>{r=t[Rb](),mr(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void n.error(s)}i?n.complete():n.next(o)},0,!0)}),()=>Re(r?.return)&&r.return()})}(t,e);if(kb(t))return function V2(t,e){return Lb(Nb(t),e)}(t,e)}throw bb(t)}(t,e):gr(t)}function x(...t){return me(t,Wu(t))}function gt(t,e,n=1/0){return Re(e)?gt((r,o)=>ie((i,s)=>e(r,i,o,s))(gr(t(r,o))),n):("number"==typeof e&&(n=e),it((r,o)=>function G2(t,e,n,r,o,i,s,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<r?p(m):c.push(m),p=m=>{i&&e.next(m),l++;let y=!1;gr(n(m,u++)).subscribe(et(e,C=>{o?.(C),i?f(C):e.next(C)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){const C=c.shift();s?mr(e,s,()=>p(C)):p(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(et(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,o,t,n)))}function Vr(t,e){return Re(e)?gt(t,e,1):gt(t,1)}function bt(t,e){return it((n,r)=>{let o=0;n.subscribe(et(r,i=>t.call(e,i,o++)&&r.next(i)))})}function $a(t){return it((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function mt(t,e){return it((n,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();n.subscribe(et(r,c=>{o?.unsubscribe();let l=0;const u=i++;gr(t(c,u)).subscribe(o=et(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}class Qu{}class Yu{}class sn{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const o=n.slice(0,r),i=o.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof sn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new sn;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof sn?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const o=("a"===e.op?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class z2{encodeKey(e){return Fb(e)}encodeValue(e){return Fb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const K2=/%(\d[a-f0-9])/gi,W2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Fb(t){return encodeURIComponent(t).replace(K2,(e,n)=>W2[n]??e)}function Ju(t){return`${t}`}class $r{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new z2,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function q2(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],o=Array.isArray(r)?r.map(Ju):[Ju(r)];this.map.set(n,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new $r({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Ju(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(Ju(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Q2{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Ub(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Hb(t){return typeof Blob<"u"&&t instanceof Blob}function Bb(t){return typeof FormData<"u"&&t instanceof FormData}class Ga{constructor(e,n,r,o){let i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Y2(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new sn,this.context??=new Q2,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new $r,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||Ub(this.body)||Hb(this.body)||Bb(this.body)||function J2(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof $r?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Bb(this.body)?null:Hb(this.body)?this.body.type||null:Ub(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $r?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.transferCache??this.transferCache,s=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Ga(n,r,s,{params:u,headers:l,context:d,reportProgress:c,responseType:o,withCredentials:a,transferCache:i})}}var Gr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Gr||{});class uy{constructor(e,n=za.Ok,r="OK"){this.headers=e.headers||new sn,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Zu extends uy{constructor(e={}){super(e),this.type=Gr.ResponseHeader}clone(e={}){return new Zu({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class So extends uy{constructor(e={}){super(e),this.type=Gr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new So({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Bi extends uy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}var za=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(za||{});function dy(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let jb=(()=>{class t{constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof Ga)i=n;else{let c,l;c=o.headers instanceof sn?o.headers:new sn(o.headers),o.params&&(l=o.params instanceof $r?o.params:new $r({fromObject:o.params})),i=new Ga(n,r,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}const s=x(i).pipe(Vr(c=>this.handler.handle(c)));if(n instanceof Ga||"events"===o.observe)return s;const a=s.pipe(bt(c=>c instanceof So));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(ie(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ie(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ie(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(ie(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new $r).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,dy(o,r))}post(n,r,o={}){return this.request("POST",n,dy(o,r))}put(n,r,o={}){return this.request("PUT",n,dy(o,r))}static{this.\u0275fac=function(r){return new(r||t)(M(Qu))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();function $b(t,e){return e(t)}function nG(t,e){return(n,r)=>e.intercept(n,{handle:o=>t(o,r)})}const oG=new R(""),qa=new R(""),Gb=new R(""),zb=new R("");function iG(){let t=null;return(e,n)=>{null===t&&(t=(T(oG,{optional:!0})??[]).reduceRight(nG,$b));const r=T(xr),o=r.add();return t(e,n).pipe($a(()=>r.remove(o)))}}let qb=(()=>{class t extends Qu{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=T(xr);const o=T(zb,{optional:!0});this.backend=o??n}handle(n){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(qa),...this.injector.get(Gb,[])]));this.chain=o.reduceRight((i,s)=>function rG(t,e,n){return(r,o)=>kn(n,()=>e(r,i=>t(i,o)))}(i,s,this.injector),$b)}const r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe($a(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||t)(M(Yu),M(It))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();const uG=/^\)\]\}',?\n/;let Wb=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new _(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?me(r.\u0275loadImpl()):x(null)).pipe(mt(()=>new qe(i=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((m,y)=>s.setRequestHeader(m,y.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const m=n.detectContentTypeHeader();null!==m&&s.setRequestHeader("Content-Type",m)}if(n.responseType){const m=n.responseType.toLowerCase();s.responseType="json"!==m?m:"text"}const a=n.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const m=s.statusText||"OK",y=new sn(s.getAllResponseHeaders()),C=function dG(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(s)||n.url;return c=new Zu({headers:y,status:s.status,statusText:m,url:C}),c},u=()=>{let{headers:m,status:y,statusText:C,url:I}=l(),D=null;y!==za.NoContent&&(D=typeof s.response>"u"?s.responseText:s.response),0===y&&(y=D?za.Ok:0);let F=y>=200&&y<300;if("json"===n.responseType&&"string"==typeof D){const Q=D;D=D.replace(uG,"");try{D=""!==D?JSON.parse(D):null}catch(de){D=Q,F&&(F=!1,D={error:de,text:D})}}F?(i.next(new So({body:D,headers:m,status:y,statusText:C,url:I||void 0})),i.complete()):i.error(new Bi({error:D,headers:m,status:y,statusText:C,url:I||void 0}))},d=m=>{const{url:y}=l(),C=new Bi({error:m,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});i.error(C)};let h=!1;const f=m=>{h||(i.next(l()),h=!0);let y={type:Gr.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),"text"===n.responseType&&s.responseText&&(y.partialText=s.responseText),i.next(y)},p=m=>{let y={type:Gr.UploadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),i.next(y)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",f),null!==a&&s.upload&&s.upload.addEventListener("progress",p)),s.send(a),i.next({type:Gr.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),n.reportProgress&&(s.removeEventListener("progress",f),null!==a&&s.upload&&s.upload.removeEventListener("progress",p)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(r){return new(r||t)(M(QD))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();const py=new R(""),Qb=new R("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Yb=new R("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Jb{}let pG=(()=>{class t{constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=UD(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||t)(M(Bt),M(Mr),M(Qb))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();function gG(t,e){const n=t.url.toLowerCase();if(!T(py)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=T(Jb).getToken(),o=T(Yb);return null!=r&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,r)})),e(t)}var zr=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(zr||{});function _o(t,e){return{\u0275kind:t,\u0275providers:e}}function mG(...t){const e=[jb,Wb,qb,{provide:Qu,useExisting:qb},{provide:Yu,useExisting:Wb},{provide:qa,useValue:gG,multi:!0},{provide:py,useValue:!0},{provide:Jb,useClass:pG}];for(const n of t)e.push(...n.\u0275providers);return function Ns(t){return{\u0275providers:t}}(e)}const Zb=new R("");let vG=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=or({type:t})}static{this.\u0275inj=Mn({providers:[mG(_o(zr.LegacyInterceptors,[{provide:Zb,useFactory:iG},{provide:qa,useExisting:Zb,multi:!0}]))]})}}return t})();const{isArray:_G}=Array,{getPrototypeOf:AG,prototype:DG,keys:bG}=Object;const{isArray:NG}=Array;function gy(...t){const e=Wu(t),n=function o2(t){return Re(oy(t))?t.pop():void 0}(t),{args:r,keys:o}=function RG(t){if(1===t.length){const e=t[0];if(_G(e))return{args:e,keys:null};if(function MG(t){return t&&"object"==typeof t&&AG(t)===DG}(e)){const n=bG(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return me([],e);const i=new qe(function xG(t,e,n=ro){return r=>{sR(e,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)sR(e,()=>{const l=me(t[c],e);let u=!1;l.subscribe(et(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>function PG(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}(o,s):ro));return n?i.pipe(function OG(t){return ie(e=>function kG(t,e){return NG(e)?t(...e):t(e)}(t,e))}(n)):i}function sR(t,e,n){t?mr(n,t,e):e()}const ed=Zh(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Ka(t=1/0){return gt(ro,t)}function my(...t){return function LG(){return Ka(1)}()(me(t,Wu(t)))}function aR(t){return new qe(e=>{gr(t()).subscribe(e)})}function td(t,e){const n=Re(t)?t:()=>t,r=o=>o.error(n());return new qe(e?o=>e.schedule(r,0,o):r)}const Tn=new qe(t=>t.complete());function yy(){return it((t,e)=>{let n=null;t._refCount++;const r=et(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const o=t._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class cR extends qe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,HC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Nt;const n=this.getSubject();e.add(this.source.subscribe(et(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Nt.EMPTY)}return e}refCount(){return yy()(this)}}function yr(t){return t<=0?()=>Tn:it((e,n)=>{let r=0;e.subscribe(et(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function nd(t){return it((e,n)=>{let r=!1;e.subscribe(et(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}function lR(t=HG){return it((e,n)=>{let r=!1;e.subscribe(et(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function HG(){return new ed}function Ao(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bt((o,i)=>t(o,i,r)):ro,yr(1),n?nd(e):lR(()=>new ed))}function Rt(t,e,n){const r=Re(t)||e||n?{next:t,error:e,complete:n}:t;return r?it((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(et(i,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),i.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):ro}function qr(t){return it((e,n)=>{let i,r=null,o=!1;r=e.subscribe(et(n,void 0,void 0,s=>{i=gr(t(s,qr(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function vy(t){return t<=0?()=>Tn:it((e,n)=>{let r=[];e.subscribe(et(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}const Y="primary",Wa=Symbol("RouteTitle");class zG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ji(t){return new zG(t)}function qG(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function zn(t,e){const n=t?Cy(t):void 0,r=e?Cy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!uR(t[o],e[o]))return!1;return!0}function Cy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function uR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}return t===e}function dR(t){return t.length>0?t[t.length-1]:null}function Kr(t){return function SG(t){return!!t&&(t instanceof qe||Re(t.lift)&&Re(t.subscribe))}(t)?t:wu(t)?me(Promise.resolve(t)):x(t)}const WG={exact:function pR(t,e,n){if(!Do(t.segments,e.segments)||!rd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!pR(t.children[r],e.children[r],n))return!1;return!0},subset:gR},hR={exact:function QG(t,e){return zn(t,e)},subset:function YG(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>uR(t[n],e[n]))},ignored:()=>!0};function fR(t,e,n){return WG[n.paths](t.root,e.root,n.matrixParams)&&hR[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function gR(t,e,n){return mR(t,e,e.segments,n)}function mR(t,e,n,r){if(t.segments.length>n.length){const o=t.segments.slice(0,n.length);return!(!Do(o,n)||e.hasChildren()||!rd(o,n,r))}if(t.segments.length===n.length){if(!Do(t.segments,n)||!rd(t.segments,n,r))return!1;for(const o in e.children)if(!t.children[o]||!gR(t.children[o],e.children[o],r))return!1;return!0}{const o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(Do(t.segments,o)&&rd(t.segments,o,r)&&t.children[Y])&&mR(t.children[Y],e,i,r)}}function rd(t,e,n){return e.every((r,o)=>hR[n](t[o].parameters,r.parameters))}class Vi{constructor(e=new Ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ji(this.queryParams),this._queryParamMap}toString(){return XG.serialize(this)}}class Ce{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return od(this)}}class Qa{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ji(this.parameters),this._parameterMap}toString(){return CR(this)}}function Do(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let $i=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>new Iy,providedIn:"root"})}}return t})();class Iy{parse(e){const n=new uz(e);return new Vi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Ya(e.root,!0)}`,r=function nz(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${id(n)}=${id(o)}`).join("&"):`${id(n)}=${id(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function ez(t){return encodeURI(t)}(e.fragment)}`:""}`}}const XG=new Iy;function od(t){return t.segments.map(e=>CR(e)).join("/")}function Ya(t,e){if(!t.hasChildren())return od(t);if(e){const n=t.children[Y]?Ya(t.children[Y],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==Y&&r.push(`${o}:${Ya(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function ZG(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===Y&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==Y&&(n=n.concat(e(o,r)))}),n}(t,(r,o)=>o===Y?[Ya(t.children[Y],!1)]:[`${o}:${Ya(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Y]?`${od(t)}/${n[0]}`:`${od(t)}/(${n.join("//")})`}}function yR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function id(t){return yR(t).replace(/%3B/gi,";")}function Ey(t){return yR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sd(t){return decodeURIComponent(t)}function vR(t){return sd(t.replace(/\+/g,"%20"))}function CR(t){return`${Ey(t.path)}${function tz(t){return Object.entries(t).map(([e,n])=>`;${Ey(e)}=${Ey(n)}`).join("")}(t.parameters)}`}const rz=/^[^\/()?;#]+/;function wy(t){const e=t.match(rz);return e?e[0]:""}const oz=/^[^\/()?;=#]+/,sz=/^[^=?&#]+/,cz=/^[^&#]+/;class uz{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Y]=new Ce(e,n)),r}parseSegment(){const e=wy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _(4009,!1);return this.capture(e),new Qa(sd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function iz(t){const e=t.match(oz);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=wy(this.remaining);o&&(r=o,this.capture(r))}e[sd(n)]=sd(r)}parseQueryParam(e){const n=function az(t){const e=t.match(sz);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function lz(t){const e=t.match(cz);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=vR(n),i=vR(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wy(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new _(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Y);const s=this.parseChildren();n[i]=1===Object.keys(s).length?s[Y]:new Ce([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _(4011,!1)}}function IR(t){return t.segments.length>0?new Ce([],{[Y]:t}):t}function ER(t){const e={};for(const[r,o]of Object.entries(t.children)){const i=ER(o);if(r===Y&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function dz(t){if(1===t.numberOfChildren&&t.children[Y]){const e=t.children[Y];return new Ce(t.segments.concat(e.segments),e.children)}return t}(new Ce(t.segments,e))}function Gi(t){return t instanceof Vi}function wR(t){let e;const o=IR(function n(i){const s={};for(const c of i.children){const l=n(c);s[c.outlet]=l}const a=new Ce(i.url,s);return i===t&&(e=a),a}(t.root));return e??o}function TR(t,e,n,r){let o=t;for(;o.parent;)o=o.parent;if(0===e.length)return Ty(o,o,o,n,r);const i=function fz(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new _R(!0,0,t);let e=0,n=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new _R(n,e,r)}(e);if(i.toRoot())return Ty(o,o,new Ce([],{}),n,r);const s=function pz(t,e,n){if(t.isAbsolute)return new cd(e,!0,0);if(!n)return new cd(e,!1,NaN);if(null===n.parent)return new cd(n,!0,0);const r=ad(t.commands[0])?0:1;return function gz(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new _(4005,!1);o=r.segments.length}return new cd(r,!1,o-i)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(i,o,t),a=s.processChildren?Za(s.segmentGroup,s.index,i.commands):AR(s.segmentGroup,s.index,i.commands);return Ty(o,s.segmentGroup,a,n,r)}function ad(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ja(t){return"object"==typeof t&&null!=t&&t.outlets}function Ty(t,e,n,r,o){let s,i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=t===e?n:SR(t,e,n);const a=IR(ER(s));return new Vi(a,i,o)}function SR(t,e,n){const r={};return Object.entries(t.children).forEach(([o,i])=>{r[o]=i===e?n:SR(i,e,n)}),new Ce(t.segments,r)}class _R{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ad(r[0]))throw new _(4003,!1);const o=r.find(Ja);if(o&&o!==dR(r))throw new _(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cd{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function AR(t,e,n){if(t??=new Ce([],{}),0===t.segments.length&&t.hasChildren())return Za(t,e,n);const r=function yz(t,e,n){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;const s=t.segments[o],a=n[r];if(Ja(a))break;const c=`${a}`,l=r<n.length-1?n[r+1]:null;if(o>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!bR(c,l,s))return i;r+=2}else{if(!bR(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new Ce(t.segments.slice(0,r.pathIndex),{});return i.children[Y]=new Ce(t.segments.slice(r.pathIndex),t.children),Za(i,0,o)}return r.match&&0===o.length?new Ce(t.segments,{}):r.match&&!t.hasChildren()?Sy(t,e,n):r.match?Za(t,0,o):Sy(t,e,n)}function Za(t,e,n){if(0===n.length)return new Ce(t.segments,{});{const r=function mz(t){return Ja(t[0])?t[0].outlets:{[Y]:t}}(n),o={};if(Object.keys(r).some(i=>i!==Y)&&t.children[Y]&&1===t.numberOfChildren&&0===t.children[Y].segments.length){const i=Za(t.children[Y],e,n);return new Ce(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=AR(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new Ce(t.segments,o)}}function Sy(t,e,n){const r=t.segments.slice(0,e);let o=0;for(;o<n.length;){const i=n[o];if(Ja(i)){const c=vz(i.outlets);return new Ce(r,c)}if(0===o&&ad(n[0])){r.push(new Qa(t.segments[e].path,DR(n[0]))),o++;continue}const s=Ja(i)?i.outlets[Y]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&ad(a)?(r.push(new Qa(s,DR(a))),o+=2):(r.push(new Qa(s,{})),o++)}return new Ce(r,{})}function vz(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Sy(new Ce([],{}),0,r))}),e}function DR(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function bR(t,e,n){return t==n.path&&zn(e,n.parameters)}const Xa="imperative";var re=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(re||{});class qn{constructor(e,n){this.id=e,this.url=n}}class ld extends qn{constructor(e,n,r="imperative",o=null){super(e,n),this.type=re.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vr extends qn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=re.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Jt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Jt||{}),ud=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ud||{});class zi extends qn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=re.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qi extends qn{constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o,this.type=re.NavigationSkipped}}class dd extends qn{constructor(e,n,r,o){super(e,n),this.error=r,this.target=o,this.type=re.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class RR extends qn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=re.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cz extends qn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=re.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iz extends qn{constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=re.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ez extends qn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=re.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wz extends qn{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o,this.type=re.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tz{constructor(e){this.route=e,this.type=re.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Sz{constructor(e){this.route=e,this.type=re.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _z{constructor(e){this.snapshot=e,this.type=re.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Az{constructor(e){this.snapshot=e,this.type=re.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dz{constructor(e){this.snapshot=e,this.type=re.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bz{constructor(e){this.snapshot=e,this.type=re.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MR{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=re.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _y{}class Ay{constructor(e){this.url=e}}class Rz{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ec,this.attachRef=null}}let ec=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Rz,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class NR{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Dy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Dy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=by(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return by(e,this._root).map(n=>n.value)}}function Dy(t,e){if(t===e.value)return e;for(const n of e.children){const r=Dy(t,n);if(r)return r}return null}function by(t,e){if(t===e.value)return[e];for(const n of e.children){const r=by(t,n);if(r.length)return r.unshift(e),r}return[]}class Sn{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ki(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class kR extends NR{constructor(e,n){super(e),this.snapshot=n,Ny(this,e)}toString(){return this.snapshot.toString()}}function OR(t){const e=function Mz(t){const i=new My([],{},{},"",{},Y,t,null,{});return new PR("",new Sn(i,[]))}(t),n=new Vt([new Qa("",{})]),r=new Vt({}),o=new Vt({}),i=new Vt({}),s=new Vt(""),a=new Wi(n,r,i,s,o,Y,t,e.root);return a.snapshot=e.root,new kR(new Sn(a,[]),e)}class Wi{constructor(e,n,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ie(l=>l[Wa]))??x(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>ji(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>ji(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ry(t,e,n="emptyOnly"){let r;const{routeConfig:o}=t;return r=null===e||"always"!==n&&""!==o?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...o?.data,...t._resolvedData}},o&&LR(o)&&(r.resolve[Wa]=o.title),r}class My{get title(){return this.data?.[Wa]}constructor(e,n,r,o,i,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ji(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ji(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class PR extends NR{constructor(e,n){super(n),this.url=e,Ny(this,n)}toString(){return xR(this._root)}}function Ny(t,e){e.value._routerState=t,e.children.forEach(n=>Ny(t,n))}function xR(t){const e=t.children.length>0?` { ${t.children.map(xR).join(", ")} } `:"";return`${t.value}${e}`}function ky(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),zn(e.params,n.params)||t.paramsSubject.next(n.params),function KG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!zn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),zn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Oy(t,e){const n=zn(t.params,e.params)&&function JG(t,e){return Do(t,e)&&t.every((n,r)=>zn(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Oy(t.parent,e.parent))}function LR(t){return"string"==typeof t.title||null===t.title}let Py=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new Tt,this.deactivateEvents=new Tt,this.attachEvents=new Tt,this.detachEvents=new Tt,this.parentContexts=T(ec),this.location=T(vn),this.changeDetector=T(_u),this.environmentInjector=T(It),this.inputBinder=T(hd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new _(4013,!1);this._activatedRoute=n;const o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new xy(n,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=Ct({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[lo]})}}return t})();class xy{__ngOutletInjector(e){return new xy(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Wi?this.route:e===ec?this.childContexts:this.parent.get(e,n)}}const hd=new R("");let FR=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,o=gy([r.queryParams,r.params,r.data]).pipe(mt(([i,s,a],c)=>(a={...i,...s,...a},0===c?x(a):Promise.resolve(a)))).subscribe(i=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function Dj(t){const e=Z(t);if(!e)return null;const n=new ya(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,o)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();function tc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const o=function kz(t,e,n){return e.children.map(r=>{for(const o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return tc(t,r,o);return tc(t,r)})}(t,e,n);return new Sn(r,o)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>tc(t,a)),s}}const r=function Oz(t){return new Wi(new Vt(t.url),new Vt(t.params),new Vt(t.queryParams),new Vt(t.fragment),new Vt(t.data),t.outlet,t.component,t)}(e.value),o=e.children.map(i=>tc(t,i));return new Sn(r,o)}}const UR="ngNavigationCancelingError";function HR(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Gi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=BR(!1,Jt.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function BR(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[UR]=!0,n.cancellationCode=e,n}function jR(t){return!!t&&t[UR]}let VR=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ms({type:t,selectors:[["ng-component"]],standalone:!0,features:[iA],decls:1,vars:0,template:function(r,o){1&r&&ki(0,"router-outlet")},dependencies:[Py],encapsulation:2})}}return t})();function Ly(t){const e=t.children&&t.children.map(Ly),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=VR),n}function Kn(t){return t.outlet||Y}function nc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class jz{constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ky(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const o=Ki(n);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ki(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Ki(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const o=Ki(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new bz(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Az(e.value.snapshot))}activateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(ky(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ky(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=nc(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class $R{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class fd{constructor(e,n){this.component=e,this.route=n}}function Vz(t,e,n){const r=t._root;return rc(r,e?e._root:null,n,[r.value])}function Qi(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function nk(t){return null!==Gc(t)}(t)?e.get(t):t:r}function rc(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ki(e);return t.children.forEach(s=>{(function Gz(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function zz(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Do(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Do(t.url,e.url)||!zn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oy(t,e)||!zn(t.queryParams,e.queryParams);default:return!Oy(t,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new $R(r)):(i.data=s.data,i._resolvedData=s._resolvedData),rc(t,e,i.component?a?a.children:null:n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new fd(a.outlet.component,s))}else s&&oc(e,a,o),o.canActivateChecks.push(new $R(r)),rc(t,null,i.component?a?a.children:null:n,r,o)})(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>oc(a,n.getContext(s),o)),o}function oc(t,e,n){const r=Ki(t),o=t.value;Object.entries(r).forEach(([i,s])=>{oc(s,o.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new fd(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function ic(t){return"function"==typeof t}function GR(t){return t instanceof ed||"EmptyError"===t?.name}const pd=Symbol("INITIAL_VALUE");function Yi(){return mt(t=>gy(t.map(e=>e.pipe(yr(1),function UG(...t){const e=Wu(t);return it((n,r)=>{(e?my(t,n,e):my(t,n)).subscribe(r)})}(pd)))).pipe(ie(e=>{for(const n of e)if(!0!==n){if(n===pd)return pd;if(!1===n||n instanceof Vi)return n}return!0}),bt(e=>e!==pd),yr(1)))}function zR(t){return function qN(...t){return LC(t)}(Rt(e=>{if(Gi(e))throw HR(0,e)}),ie(e=>!0===e))}class Fy{constructor(e){this.segmentGroup=e||null}}class Uy extends Error{constructor(e){super(),this.urlTree=e}}function Ji(t){return td(new Fy(t))}class uq{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return x(r);if(o.numberOfChildren>1||!o.children[Y])return td(new _(4e3,!1));o=o.children[Y]}}applyRedirectCommands(e,n,r){const o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Uy(o);return o}applyRedirectCreateUrlTree(e,n,r,o){const i=this.createSegmentGroup(e,n.root,r,o);return new Vi(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){const i=this.createSegments(e,n.segments,r,o);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new Ce(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){const o=r[n.path.substring(1)];if(!o)throw new _(4001,!1);return o}findOrReturn(e,n){let r=0;for(const o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}}const Hy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dq(t,e,n,r,o){const i=By(t,e,n);return i.matched?(r=function xz(t,e){return t.providers&&!t._injector&&(t._injector=nu(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function aq(t,e,n,r){const o=e.canMatch;return o&&0!==o.length?x(o.map(s=>{const a=Qi(s,t);return Kr(function Jz(t){return t&&ic(t.canMatch)}(a)?a.canMatch(e,n):kn(t,()=>a(e,n)))})).pipe(Yi(),zR()):x(!0)}(r,e,n).pipe(ie(s=>!0===s?i:{...Hy}))):x(i)}function By(t,e,n){if("**"===e.path)return function hq(t){return{matched:!0,parameters:t.length>0?dR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Hy}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(e.matcher||qG)(n,t,e);if(!o)return{...Hy};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function qR(t,e,n,r){return n.length>0&&function gq(t,e,n){return n.some(r=>gd(t,e,r)&&Kn(r)!==Y)}(t,n,r)?{segmentGroup:new Ce(e,pq(r,new Ce(n,t.children))),slicedSegments:[]}:0===n.length&&function mq(t,e,n){return n.some(r=>gd(t,e,r))}(t,n,r)?{segmentGroup:new Ce(t.segments,fq(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ce(t.segments,t.children),slicedSegments:n}}function fq(t,e,n,r){const o={};for(const i of n)if(gd(t,e,i)&&!r[Kn(i)]){const s=new Ce([],{});o[Kn(i)]=s}return{...r,...o}}function pq(t,e){const n={};n[Y]=e;for(const r of t)if(""===r.path&&Kn(r)!==Y){const o=new Ce([],{});n[Kn(r)]=o}return n}function gd(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class Cq{}class wq{constructor(e,n,r,o,i,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new uq(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new _(4002,`'${e.segmentGroup}'`)}recognize(){const e=qR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(n=>{const r=new My([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Y,this.rootComponentType,null,{}),o=new Sn(r,n),i=new PR("",o),s=function hz(t,e,n=null,r=null){return TR(wR(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(i._root,null),{state:i,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Y).pipe(qr(r=>{if(r instanceof Uy)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fy?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,o=Ry(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(o.params),r.data=Object.freeze(o.data),e.children.forEach(i=>this.inheritParamsAndData(i,r))}processSegmentGroup(e,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,o,!0).pipe(ie(i=>i instanceof Sn?[i]:[]))}processChildren(e,n,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return me(o).pipe(Vr(i=>{const s=r.children[i],a=function Hz(t,e){const n=t.filter(r=>Kn(r)===e);return n.push(...t.filter(r=>Kn(r)!==e)),n}(n,i);return this.processSegmentGroup(e,a,s,i)}),function jG(t,e){return it(function BG(t,e,n,r,o){return(i,s)=>{let a=n,c=e,l=0;i.subscribe(et(s,u=>{const d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}(t,e,arguments.length>=2,!0))}((i,s)=>(i.push(...s),i)),nd(null),function VG(t,e){const n=arguments.length>=2;return r=>r.pipe(t?bt((o,i)=>t(o,i,r)):ro,vy(1),n?nd(e):lR(()=>new ed))}(),gt(i=>{if(null===i)return Ji(r);const s=KR(i);return function Tq(t){t.sort((e,n)=>e.value.outlet===Y?-1:n.value.outlet===Y?1:e.value.outlet.localeCompare(n.value.outlet))}(s),x(s)}))}processSegment(e,n,r,o,i,s){return me(n).pipe(Vr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,o,i,s).pipe(qr(c=>{if(c instanceof Fy)return x(null);throw c}))),Ao(a=>!!a),qr(a=>{if(GR(a))return function vq(t,e,n){return 0===e.length&&!t.children[n]}(r,o,i)?x(new Cq):Ji(r);throw a}))}processSegmentAgainstRoute(e,n,r,o,i,s,a){return function yq(t,e,n,r){return!!(Kn(t)===r||r!==Y&&gd(e,n,t))&&By(e,t,n).matched}(r,o,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,o,r,i,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s):Ji(o):Ji(o)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){const{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=By(n,o,i);if(!a)return Ji(n);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const d=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,l);return this.applyRedirects.lineralizeSegments(o,d).pipe(gt(h=>this.processSegment(e,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,o,i){const s=dq(n,r,o,e);return"**"===r.path&&(n.children={}),s.pipe(mt(a=>a.matched?this.getChildConfig(e=r._injector??e,r,o).pipe(mt(({routes:c})=>{const l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new My(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function _q(t){return t.data||{}}(r),Kn(r),r.component??r._loadedComponent??null,r,function Aq(t){return t.resolve||{}}(r)),{segmentGroup:p,slicedSegments:m}=qR(n,u,d,c);if(0===m.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(ie(C=>null===C?null:new Sn(f,C)));if(0===c.length&&0===m.length)return x(new Sn(f,[]));const y=Kn(r)===i;return this.processSegment(l,c,p,m,y?Y:i,!0).pipe(ie(C=>new Sn(f,C instanceof Sn?[C]:[])))})):Ji(n)))}getChildConfig(e,n,r){return n.children?x({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?x({routes:n._loadedRoutes,injector:n._loadedInjector}):function sq(t,e,n,r){const o=e.canLoad;return void 0===o||0===o.length?x(!0):x(o.map(s=>{const a=Qi(s,t);return Kr(function Kz(t){return t&&ic(t.canLoad)}(a)?a.canLoad(e,n):kn(t,()=>a(e,n)))})).pipe(Yi(),zR())}(e,n,r).pipe(gt(o=>o?this.configLoader.loadChildren(e,n).pipe(Rt(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):function lq(t){return td(BR(!1,Jt.GuardRejected))}())):x({routes:[],injector:e})}}function Sq(t){const e=t.value.routeConfig;return e&&""===e.path}function KR(t){const e=[],n=new Set;for(const r of t){if(!Sq(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):e.push(r)}for(const r of n){const o=KR(r.children);e.push(new Sn(r.value,o))}return e.filter(r=>!n.has(r))}function WR(t){const e=t.children.map(n=>WR(n)).flat();return[t,...e]}function jy(t){return mt(e=>{const n=t(e);return n?me(n).pipe(ie(()=>e)):x(e)})}let QR=(()=>{class t{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Y);return r}getResolvedTitleForRoute(n){return n.data[Wa]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>T(kq),providedIn:"root"})}}return t})(),kq=(()=>{class t extends QR{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(M(X$))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Zi=new R("",{providedIn:"root",factory:()=>({})}),Xi=new R("");let Vy=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=T(UA)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return x(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Kr(n.loadComponent()).pipe(ie(YR),Rt(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),$a(()=>{this.componentLoaders.delete(n)})),o=new cR(r,()=>new kt).pipe(yy());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return x({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function Oq(t,e,n,r){return Kr(t.loadChildren()).pipe(ie(YR),gt(o=>o instanceof zT||Array.isArray(o)?x(o):me(e.compileModuleAsync(o))),ie(o=>{r&&r(t);let i,s,a=!1;return Array.isArray(o)?(s=o,!0):(i=o.create(n).injector,s=i.get(Xi,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ly),injector:i}}))}(r,this.compiler,n,this.onLoadEndListener).pipe($a(()=>{this.childrenLoaders.delete(r)})),s=new cR(i,()=>new kt).pipe(yy());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function YR(t){return function Pq(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let $y=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>T(xq),providedIn:"root"})}}return t})(),xq=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const JR=new R(""),ZR=new R("");function Lq(t,e,n){const r=t.get(ZR),o=t.get(Bt);return t.get(fe).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i;const s=new Promise(l=>{i=l}),a=o.startViewTransition(()=>(i(),function Fq(t){return new Promise(e=>{Cg(e,{injector:t})})}(t))),{onViewTransitionCreated:c}=r;return c&&kn(t,()=>c({transition:a,from:e,to:n})),s})}let md=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new kt,this.transitionAbortSubject=new kt,this.configLoader=T(Vy),this.environmentInjector=T(It),this.urlSerializer=T($i),this.rootContexts=T(ec),this.location=T(Br),this.inputBindingEnabled=null!==T(hd,{optional:!0}),this.titleStrategy=T(QR),this.options=T(Zi,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=T($y),this.createViewTransition=T(JR,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>x(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new Sz(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Tz(o))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,o){return this.transitions=new Vt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(bt(i=>0!==i.id),ie(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),mt(i=>{let s=!1,a=!1;return x(i).pipe(mt(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Jt.SupersededByNewNavigation),Tn;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const d="";return this.events.next(new qi(c.id,this.urlSerializer.serialize(c.rawUrl),d,ud.IgnoredSameUrlNavigation)),c.resolve(null),Tn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return x(c).pipe(mt(d=>{const h=this.transitions?.getValue();return this.events.next(new ld(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Tn:Promise.resolve(d)}),function Dq(t,e,n,r,o,i){return gt(s=>function Iq(t,e,n,r,o,i,s="emptyOnly"){return new wq(t,e,n,r,o,s,i).recognize()}(t,e,n,r,s.extractedUrl,o,i).pipe(ie(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Rt(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects};const h=new RR(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:m}=c,y=new ld(d,this.urlSerializer.serialize(h),f,p);this.events.next(y);const C=OR(this.rootComponentType).snapshot;return this.currentTransition=i={...c,targetSnapshot:C,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=h,x(i)}{const d="";return this.events.next(new qi(c.id,this.urlSerializer.serialize(c.extractedUrl),d,ud.IgnoredByUrlHandlingStrategy)),c.resolve(null),Tn}}),Rt(c=>{const l=new Cz(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ie(c=>(this.currentTransition=i={...c,guards:Vz(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},i)),function Zz(t,e){return gt(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return 0===s.length&&0===i.length?x({...n,guardsResult:!0}):function Xz(t,e,n,r){return me(t).pipe(gt(o=>function iq(t,e,n,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?x(i.map(a=>{const c=nc(e)??o,l=Qi(a,c);return Kr(function Yz(t){return t&&ic(t.canDeactivate)}(l)?l.canDeactivate(t,e,n,r):kn(c,()=>l(t,e,n,r))).pipe(Ao())})).pipe(Yi()):x(!0)}(o.component,o.route,n,e,r)),Ao(o=>!0!==o,!0))}(s,r,o,t).pipe(gt(a=>a&&function qz(t){return"boolean"==typeof t}(a)?function eq(t,e,n,r){return me(e).pipe(Vr(o=>my(function nq(t,e){return null!==t&&e&&e(new _z(t)),x(!0)}(o.route.parent,r),function tq(t,e){return null!==t&&e&&e(new Dz(t)),x(!0)}(o.route,r),function oq(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function $z(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>aR(()=>x(s.guards.map(c=>{const l=nc(s.node)??n,u=Qi(c,l);return Kr(function Qz(t){return t&&ic(t.canActivateChild)}(u)?u.canActivateChild(r,t):kn(l,()=>u(r,t))).pipe(Ao())})).pipe(Yi())));return x(i).pipe(Yi())}(t,o.path,n),function rq(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return x(!0);const o=r.map(i=>aR(()=>{const s=nc(e)??n,a=Qi(i,s);return Kr(function Wz(t){return t&&ic(t.canActivate)}(a)?a.canActivate(e,t):kn(s,()=>a(e,t))).pipe(Ao())}));return x(o).pipe(Yi())}(t,o.route,n))),Ao(o=>!0!==o,!0))}(r,i,t,e):x(a)),ie(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Rt(c=>{if(i.guardsResult=c.guardsResult,Gi(c.guardsResult))throw HR(0,c.guardsResult);const l=new Iz(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),bt(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Jt.GuardRejected),!1)),jy(c=>{if(c.guards.canActivateChecks.length)return x(c).pipe(Rt(l=>{const u=new Ez(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),mt(l=>{let u=!1;return x(l).pipe(function bq(t,e){return gt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return x(n);const i=new Set(o.map(c=>c.route)),s=new Set;for(const c of i)if(!s.has(c))for(const l of WR(c))s.add(l);let a=0;return me(s).pipe(Vr(c=>i.has(c)?function Rq(t,e,n,r){const o=t.routeConfig,i=t._resolve;return void 0!==o?.title&&!LR(o)&&(i[Wa]=o.title),function Mq(t,e,n,r){const o=Cy(t);if(0===o.length)return x({});const i={};return me(o).pipe(gt(s=>function Nq(t,e,n,r){const o=nc(e)??r,i=Qi(t,o);return Kr(i.resolve?i.resolve(e,n):kn(o,()=>i(e,n)))}(t[s],e,n,r).pipe(Ao(),Rt(a=>{i[s]=a}))),vy(1),function $G(t){return ie(()=>t)}(i),qr(s=>GR(s)?Tn:td(s)))}(i,t,e,r).pipe(ie(s=>(t._resolvedData=s,t.data=Ry(t,t.parent,n).resolve,null)))}(c,r,t,e):(c.data=Ry(c,c.parent,t).resolve,x(void 0))),Rt(()=>a++),vy(1),gt(c=>a===s.size?x(n):Tn))})}(this.paramsInheritanceStrategy,this.environmentInjector),Rt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Jt.NoDataFromResolver)}}))}),Rt(l=>{const u=new wz(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),jy(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Rt(h=>{u.component=h}),ie(()=>{})));for(const h of u.children)d.push(...l(h));return d};return gy(l(c.targetSnapshot.root)).pipe(nd(null),yr(1))}),jy(()=>this.afterPreactivation()),mt(()=>{const{currentSnapshot:c,targetSnapshot:l}=i,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?me(u).pipe(ie(()=>i)):x(i)}),ie(c=>{const l=function Nz(t,e,n){const r=tc(t,e._root,n?n._root:void 0);return new kR(r,e)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,i}),Rt(()=>{this.events.next(new _y)}),((t,e,n,r)=>ie(o=>(new jz(e,o.targetRouterState,o.currentRouterState,n,r).activate(t),o)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),yr(1),Rt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function GG(t){return it((e,n)=>{gr(t).subscribe(et(n,()=>n.complete(),tf)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(Rt(c=>{throw c}))),$a(()=>{!s&&!a&&this.cancelNavigationTransition(i,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),qr(c=>{if(a=!0,jR(c))this.events.next(new zi(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),function Pz(t){return jR(t)&&Gi(t.url)}(c)?this.events.next(new Ay(c.url)):i.resolve(!1);else{this.events.next(new dd(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0));try{i.resolve(n.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return Tn}))}))}cancelNavigationTransition(n,r,o){const i=new zi(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Uq(t){return t!==Xa}let Hq=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>T(jq),providedIn:"root"})}}return t})();class Bq{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let jq=(()=>{class t extends Bq{static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=dp(t)))(o||t)}})()}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),XR=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:()=>T(Vq),providedIn:"root"})}}return t})(),Vq=(()=>{class t extends XR{constructor(){super(...arguments),this.location=T(Br),this.urlSerializer=T($i),this.options=T(Zi,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=T($y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=OR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ld)this.stateMemento=this.createStateMemento();else if(n instanceof qi)this.rawUrlTree=r.initialUrl;else if(n instanceof RR){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else n instanceof _y?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof zi&&(n.code===Jt.GuardRejected||n.code===Jt.NoDataFromResolver)?this.restoreHistory(r):n instanceof dd?this.restoreHistory(r,!0):n instanceof vr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",s)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===n.finalUrl&&0===i&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=dp(t)))(o||t)}})()}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var sc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(sc||{});function eM(t,e){t.events.pipe(bt(n=>n instanceof vr||n instanceof zi||n instanceof dd||n instanceof qi),ie(n=>n instanceof vr||n instanceof qi?sc.COMPLETE:n instanceof zi&&(n.code===Jt.Redirect||n.code===Jt.SupersededByNewNavigation)?sc.REDIRECTING:sc.FAILED),bt(n=>n!==sc.REDIRECTING),yr(1)).subscribe(()=>{e()})}function $q(t){throw t}const Gq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let an=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=T(bA),this.stateManager=T(XR),this.options=T(Zi,{optional:!0})||{},this.pendingTasks=T(xr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=T(md),this.urlSerializer=T($i),this.location=T(Br),this.urlHandlingStrategy=T($y),this._events=new kt,this.errorHandler=this.options.errorHandler||$q,this.navigated=!1,this.routeReuseStrategy=T(Hq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=T(Xi,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!T(hd,{optional:!0}),this.eventsSubscription=new Nt,this.isNgZoneEnabled=T(fe)instanceof fe&&fe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(null!==o&&null!==i)if(this.stateManager.handleRouterEvent(r,i),r instanceof zi&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof vr)this.navigated=!0;else if(r instanceof Ay){const s=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),a={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Uq(o.source)};this.scheduleNavigation(s,Xa,null,a,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function Kq(t){return!(t instanceof _y||t instanceof Ay)})(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ly),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...i};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}null!==u&&(u=this.removeEmptyProps(u));try{d=wR(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return TR(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=Gi(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Xa,null,r)}navigate(n,r={skipLocationChange:!1}){return function qq(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new _(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let o;if(o=!0===r?{...Gq}:!1===r?{...zq}:r,Gi(n))return fR(this.currentUrlTree,n,o);const i=this.parseUrl(n);return fR(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(null!=i&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return eM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),yd=(()=>{class t{constructor(n,r,o,i,s,a){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new kt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof vr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,o,i,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==n||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.href=null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;const r=null===this.href?null:function tw(t,e,n){return function u0(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?ew:XE}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,n,r):o.removeAttribute(i,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||t)(U(an),U(Wi),function zs(t){return function jO(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let o=0;for(;o<r;){const i=n[o];if(rI(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof n[o];)o++;else{if(i===e)return n[o+1];o+=2}}}return null}(ge(),t)}("tabindex"),U(Yl),U(br),U(To))}}static{this.\u0275dir=Ct({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){1&r&&Na("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Gg("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[dn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Om],skipLocationChange:[dn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Om],replaceUrl:[dn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Om],routerLink:"routerLink"},standalone:!0,features:[GT,lo]})}}return t})();class tM{}let Yq=(()=>{class t{constructor(n,r,o,i,s){this.router=n,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(bt(n=>n instanceof vr),Vr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=nu(i.providers,n,`Route: ${i.path}`));const s=i._injector??n,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return me(o).pipe(Ka())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):x(null);const i=o.pipe(gt(s=>null===s?x(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?me([i,this.loader.loadComponent(r)]).pipe(Ka()):i})}static{this.\u0275fac=function(r){return new(r||t)(M(an),M(UA),M(It),M(tM),M(Vy))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Gy=new R("");let nM=(()=>{class t{constructor(n,r,o,i,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=T(It),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof ld?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof vr?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof qi&&n.code===ud.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof MR&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){var o=this;this.zone.runOutsideAngular(v(function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Cg(()=>{i()},{injector:o.environmentInjector})}),o.zone.run(()=>{o.transitions.events.next(new MR(n,"popstate"===o.lastSource?o.store[o.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function _w(){throw new Error("invalid")}()}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac})}}return t})();function Wn(t,e){return{\u0275kind:t,\u0275providers:e}}function oM(){const t=T(Lt);return e=>{const n=t.get(Ur);if(e!==n.components[0])return;const r=t.get(an),o=t.get(iM);1===t.get(zy)&&r.initialNavigation(),t.get(sM,null,te.Optional)?.setUpPreloading(),t.get(Gy,null,te.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const iM=new R("",{factory:()=>new kt}),zy=new R("",{providedIn:"root",factory:()=>1}),sM=new R("");function eK(t){return Wn(0,[{provide:sM,useExisting:Yq},{provide:tM,useExisting:t}])}function nK(t){return Wn(9,[{provide:JR,useValue:Lq},{provide:ZR,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const aM=new R("ROUTER_FORROOT_GUARD"),rK=[Br,{provide:$i,useClass:Iy},an,ec,{provide:Wi,useFactory:function rM(t){return t.routerState.root},deps:[an]},Vy,[]];let cM=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[rK,[],{provide:Xi,multi:!0,useValue:n},{provide:aM,useFactory:aK,deps:[[an,new Qc,new Yc]]},{provide:Zi,useValue:r||{}},r?.useHash?{provide:To,useClass:kj}:{provide:To,useClass:bD},{provide:Gy,useFactory:()=>{const t=T(XV),e=T(fe),n=T(Zi),r=T(md),o=T($i);return n.scrollOffset&&t.setOffset(n.scrollOffset),new nM(o,r,t,e,n)}},r?.preloadingStrategy?eK(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?cK(r):[],r?.bindToComponentInputs?Wn(8,[FR,{provide:hd,useExisting:FR}]).\u0275providers:[],r?.enableViewTransitions?nK().\u0275providers:[],[{provide:lM,useFactory:oM},{provide:wm,multi:!0,useExisting:lM}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Xi,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(M(aM,8))}}static{this.\u0275mod=or({type:t})}static{this.\u0275inj=Mn({})}}return t})();function aK(t){return"guarded"}function cK(t){return["disabled"===t.initialNavigation?Wn(3,[{provide:Im,multi:!0,useFactory:()=>{const e=T(an);return()=>{e.setUpLocationChangeListener()}}},{provide:zy,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Wn(2,[{provide:zy,useValue:0},{provide:Im,multi:!0,deps:[Lt],useFactory:e=>{const n=e.get(Mj,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const o=e.get(an),i=e.get(iM);eM(o,()=>{r(!0)}),e.get(md).afterPreactivation=()=>(r(!0),i.closed?x(void 0):i),o.initialNavigation()}))}}]).\u0275providers:[]]}const lM=new R("");let uK=(()=>{class t{constructor(n){this.http=n}ngOnInit(){console.log("\u{1f50d} ProfileComponent: Starting to fetch user profile data..."),alert("\u{1f50d} Fetching your profile data from Microsoft Graph API..."),this.http.get("https://graph.microsoft.com/v1.0/me").subscribe({next:n=>{console.log("\u2705 ProfileComponent: Successfully fetched profile data:",n),alert("\u2705 Profile data loaded successfully!"),this.profile=n},error:n=>{console.error("\u274c ProfileComponent: Error fetching profile:",n),alert("\u274c Error loading profile: "+n.message)}}),this.tokenExpiration=localStorage.getItem("tokenExpiration"),console.log("\u{1f511} ProfileComponent: Token expiration:",this.tokenExpiration)}static{this.\u0275fac=function(r){return new(r||t)(U(jb))}}static{this.\u0275cmp=Ms({type:t,selectors:[["app-profile"]],decls:57,vars:12,consts:[[1,"profile"]],template:function(r,o){1&r&&(_e(0,"div",0)(1,"h3"),ae(2,"\u{1f510} Microsoft Graph API - User Profile Data"),ee(),_e(3,"p")(4,"strong"),ae(5,"Business Phones:"),ee(),ae(6),ee(),_e(7,"p")(8,"strong"),ae(9,"Display Name:"),ee(),ae(10),ee(),_e(11,"p")(12,"strong"),ae(13,"Given Name:"),ee(),ae(14),ee(),_e(15,"p")(16,"strong"),ae(17,"Job Title:"),ee(),ae(18),ee(),_e(19,"p")(20,"strong"),ae(21,"Mail:"),ee(),ae(22),ee(),_e(23,"p")(24,"strong"),ae(25,"Mobile Phone:"),ee(),ae(26),ee(),_e(27,"p")(28,"strong"),ae(29,"Office Location:"),ee(),ae(30),ee(),_e(31,"p")(32,"strong"),ae(33,"Preferred Language:"),ee(),ae(34),ee(),_e(35,"p")(36,"strong"),ae(37,"Surname:"),ee(),ae(38),ee(),_e(39,"p")(40,"strong"),ae(41,"User Principal Name:"),ee(),ae(42),ee(),_e(43,"p")(44,"strong"),ae(45,"Profile Id:"),ee(),ae(46),ee(),ki(47,"br")(48,"br"),_e(49,"p")(50,"strong"),ae(51,"Token Expiration:"),ee(),ae(52),ee(),ki(53,"br")(54,"br"),_e(55,"p"),ae(56,"Refreshing this page will continue to use the cached access token until it nears expiration, at which point a new access token will be requested."),ee()()),2&r&&(pt(6),_t(" ",null==o.profile?null:o.profile.businessPhones,""),pt(4),_t(" ",null==o.profile?null:o.profile.displayName,""),pt(4),_t(" ",null==o.profile?null:o.profile.givenName,""),pt(4),_t(" ",null==o.profile?null:o.profile.jobTitle,""),pt(4),_t(" ",null==o.profile?null:o.profile.mail,""),pt(4),_t(" ",null==o.profile?null:o.profile.mobilePhone,""),pt(4),_t(" ",null==o.profile?null:o.profile.officeLocation,""),pt(4),_t(" ",null==o.profile?null:o.profile.preferredLanguage,""),pt(4),_t(" ",null==o.profile?null:o.profile.surname,""),pt(4),_t(" ",null==o.profile?null:o.profile.userPrincipalName,""),pt(4),_t(" ",null==o.profile?null:o.profile.id,""),pt(6),_t(" ",o.tokenExpiration,""))},encapsulation:2})}}return t})();const w={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},es=[w.OPENID_SCOPE,w.PROFILE_SCOPE,w.OFFLINE_ACCESS_SCOPE],uM=[...es,w.EMAIL_SCOPE],tt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},nt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},dM={PLAIN:"plain",S256:"S256"},ac={QUERY:"query",FRAGMENT:"fragment"},dK={...ac,FORM_POST:"form_post"},yt={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},q={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},qy="appmetadata",at={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ie={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Xt={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},ns_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836";var O=function(t){return t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none",t}(O||{});const mM={scopes:es},yM="jwk",Wy="msal.db",yK=`${Wy}.keys`,vK=[0,5,4];class EK{static getInteractionStatusFromEvent(e,n){switch(e.eventType){case"msal:loginStart":return"login";case"msal:ssoSilentStart":return"ssoSilent";case"msal:acquireTokenStart":if(e.interactionType===O.Redirect||e.interactionType===O.Popup)return"acquireToken";break;case"msal:handleRedirectStart":return"handleRedirect";case"msal:logoutStart":return"logout";case"msal:ssoSilentSuccess":case"msal:ssoSilentFailure":if(n&&"ssoSilent"!==n)break;return"none";case"msal:logoutEnd":if(n&&"logout"!==n)break;return"none";case"msal:handleRedirectEnd":if(n&&"handleRedirect"!==n)break;return"none";case"msal:loginSuccess":case"msal:loginFailure":case"msal:acquireTokenSuccess":case"msal:acquireTokenFailure":case"msal:restoreFromBFCache":if(e.interactionType===O.Redirect||e.interactionType===O.Popup){if(n&&"login"!==n&&"acquireToken"!==n)break;return"none"}}return null}}const uc="unexpected_error",Sd={[uc]:"Unexpected error in authentication.",post_request_failed:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Ne extends Error{constructor(e,n,r){super(n?`${e}: ${n}`:e),Object.setPrototypeOf(this,Ne.prototype),this.errorCode=e||w.EMPTY_STRING,this.errorMessage=n||w.EMPTY_STRING,this.subError=r||w.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function vM(t,e){return new Ne(t,e?`${Sd[t]} ${e}`:Sd[t])}const dc="storage_not_supported",_d="in_mem_redirect_unavailable",Ad={[dc]:"Given storage configuration option was not supported.",stubbed_public_client_application_called:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[_d]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class hc extends Ne{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,hc.prototype)}}function Jy(t){return new hc(t,Ad[t])}const Dd="redirect_uri_empty",bd="authority_uri_insecure",Ro="url_parse_error",Rd="empty_url_error",Md="empty_input_scopes_error",Nd="invalid_prompt_value",fc="invalid_claims",kd="token_request_empty",Od="logout_request_empty",Pd="invalid_code_challenge_method",pc="pkce_params_missing",gc="invalid_cloud_discovery_metadata",xd="invalid_authority_metadata",Ld="untrusted_authority",rs="missing_ssh_jwk",Fd="missing_ssh_kid",Ud="cannot_set_OIDCOptions",Hd="cannot_allow_native_broker",Bd="authority_mismatch",Pe={[Dd]:"A redirect URI is required for all calls, and none has been set.",claims_request_parsing_error:"Could not parse the given claims request object.",[bd]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ro]:"URL could not be parsed into appropriate segments.",[Rd]:"URL was empty or null.",[Md]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Nd]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[fc]:"Given claims parameter must be a stringified JSON object.",[kd]:"Token request was empty and not found in cache.",[Od]:"The logout request was null or undefined.",[Pd]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[pc]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[gc]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[xd]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ld]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[rs]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Fd]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",missing_nonce_authentication_header:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",invalid_authentication_header:"Invalid authentication header provided",[Ud]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Hd]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Bd]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class tv extends Ne{constructor(e){super(e,Pe[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,tv.prototype)}}function we(t){return new tv(t)}class ln{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return 0===Object.keys(n).length}catch{}return!0}static startsWith(e,n){return 0===e.indexOf(n)}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(n[o(s)]=o(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}const mc="client_info_decoding_error",jd="client_info_empty_error",yc="token_parsing_error",Vd="null_or_empty_token",_n="endpoints_resolution_error",$d="network_error",Gd="openid_config_error",zd="hash_not_deserialized",Yr="invalid_state",qd="state_mismatch",os="state_not_found",Kd="nonce_mismatch",vc="auth_time_not_found",Wd="max_age_transpired",Qd="multiple_matching_appMetadata",Yd="request_cannot_be_made",Jd="cannot_remove_empty_scope",Zd="cannot_append_scopeset",Cc="empty_input_scopeset",Ic="no_account_in_silent_request",Xd="invalid_cache_record",Ec="invalid_cache_environment",wc="no_account_found",Tc="no_crypto_object",Sc="unexpected_credential_type",An="token_refresh_required",eh="token_claims_cnf_required_for_signedjwt",th="authorization_code_missing_from_server_response",nh="end_session_endpoint_not_supported",_c="key_id_missing",X="method_not_implemented",K={[mc]:"The client info could not be parsed/decoded correctly",[jd]:"The client info was empty",[yc]:"Token cannot be parsed",[Vd]:"The token is null or empty",[_n]:"Endpoints cannot be resolved",[$d]:"Network request failed",[Gd]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[zd]:"The hash parameters could not be deserialized",[Yr]:"State was not the expected format",[qd]:"State mismatch error",[os]:"State not found",[Kd]:"Nonce mismatch error",[vc]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Wd]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",multiple_matching_tokens:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",multiple_matching_accounts:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Qd]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Yd]:"Token request cannot be made without authorization code or refresh token.",[Jd]:"Cannot remove null or empty scope from ScopeSet",[Zd]:"Cannot append ScopeSet",[Cc]:"Empty input ScopeSet cannot be processed",device_code_polling_cancelled:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",device_code_expired:"Device code is expired.",device_code_unknown_error:"Device code stopped polling for unknown reasons.",[Ic]:"Please pass an account object, silent flow is not supported without account information",[Xd]:"Cache record object was null or undefined.",[Ec]:"Invalid environment when attempting to create cache entry",[wc]:"No account found in cache for given key.",[Tc]:"No crypto object detected.",[Sc]:"Unexpected credential type.",invalid_assertion:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",invalid_client_credential:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[An]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",user_timeout_reached:"User defined timeout for device code polling reached",[eh]:"Cannot generate a POP jwt if the token_claims are not populated",[th]:"Server response does not contain an authorization code to proceed",binding_key_not_removed:"Could not remove the credential's binding key from storage.",[nh]:"The provided authority does not support logout",[_c]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",no_network_connectivity:"No network connectivity. Check your internet connection.",user_canceled:"User cancelled the flow.",missing_tenant_id_error:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[X]:"This method has not been implemented",nested_app_auth_bridge_disabled:"The nested app auth bridge is disabled"};class rh extends Ne{constructor(e,n){super(e,n?`${K[e]}: ${n}`:K[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,rh.prototype)}}function S(t,e){return new rh(t,e)}function CM(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function oh(t){if(!t||t.indexOf("=")<0)return null;try{const e=CM(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.error||n.error_description||n.state)return n}catch{throw S(zd)}return null}class oe{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw we(Rd);e.includes("#")||(this._urlString=oe.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return ln.endsWith(n,"?")?n=n.slice(0,-1):ln.endsWith(n,"?/")&&(n=n.slice(0,-2)),ln.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw we(Ro)}if(!e.HostNameAndPort||!e.PathSegments)throw we(Ro);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw we(bd)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return oe.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&0!==r.length&&("common"===r[0]||"organizations"===r[0])&&(r[0]=e),oe.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw we(Ro);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw we(Ro);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===w.FORWARD_SLASH){const o=new oe(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new oe(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!oh(e)}}const Ac="pkce_not_created",Dc="crypto_nonexistent",is="empty_navigate_uri",ih="hash_empty_error",bc="no_state_in_hash",sh="hash_does_not_contain_known_properties",ah="unable_to_parse_state",ch="state_interaction_type_mismatch",lh="interaction_in_progress",uh="popup_window_error",dh="empty_window_error",Cr="user_cancelled",hh="monitor_window_timeout",fh="redirect_in_iframe",ph="block_iframe_reload",gh="block_nested_popups",ss="silent_logout_unsupported",mh="no_account_error",yh="no_token_request_cache_error",vh="unable_to_parse_token_request_cache_error",Rc="no_cached_authority_error",as="non_browser_environment",Jr="database_not_open",cs="no_network_connectivity",Ch="post_request_failed",Ih="get_request_failed",Mc="failed_to_parse_response",Eh="unable_to_load_token",Nc="crypto_key_not_found",wh="auth_code_required",Th="auth_code_or_nativeAccountId_required",Sh="spa_code_and_nativeAccountId_present",kc="database_unavailable",_h="unable_to_acquire_token_from_native_platform",Ah="native_handshake_timeout",Dh="native_extension_not_installed",Mo="native_connection_not_established",bh="uninitialized_public_client_application",Rh="native_prompt_not_supported",Mh="invalid_base64_string",Nh="invalid_pop_token_request",IM="failed_to_build_headers",EM="failed_to_parse_headers",Ir="For more visit: aka.ms/msaljs/browser-errors",$={[Ac]:"The PKCE code challenge and verifier could not be generated.",[Dc]:"The crypto object or function is not available.",[is]:"Navigation URI is empty. Please check stack trace for more info.",[ih]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Ir}`,[bc]:"Hash does not contain state. Please verify that the request originated from msal.",[sh]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Ir}`,[ah]:"Unable to parse state. Please verify that the request originated from msal.",[ch]:"Hash contains state but the interaction type does not match the caller.",[lh]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Ir}`,[uh]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[dh]:"window.open returned null or undefined window object.",[Cr]:"User cancelled the flow.",monitor_popup_timeout:`Token acquisition in popup failed due to timeout.  ${Ir}`,[hh]:`Token acquisition in iframe failed due to timeout.  ${Ir}`,[fh]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[ph]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Ir}`,[gh]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",iframe_closed_prematurely:"The iframe being monitored was closed prematurely.",[ss]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[mh]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",silent_prompt_value_error:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[yh]:"No token request found in cache.",[vh]:"The cached token request could not be parsed.",[Rc]:"No cached authority found.",auth_request_not_set_error:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",invalid_cache_type:"Invalid cache type",[as]:"Login and token requests are not supported in non-browser environments.",[Jr]:"Database is not open!",[cs]:"No network connectivity. Check your internet connection.",[Ch]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Ih]:"Network request failed. Please check the network trace to determine root cause.",[Mc]:"Failed to parse network response. Check network trace.",[Eh]:"Error loading token to cache.",[Nc]:"Cryptographic Key or Keypair not found in browser storage.",[wh]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Th]:"An authorization code or nativeAccountId must be provided to this flow.",[Sh]:"Request cannot contain both spa code and native account id.",[kc]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[_h]:`Unable to acquire token from native platform.  ${Ir}`,[Ah]:"Timed out while attempting to establish connection to browser extension",[Dh]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Mo]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Ir}`,[bh]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Ir}`,[Rh]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Mh]:"Invalid base64 encoded string.",[Nh]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[IM]:"Failed to build request headers object.",[EM]:"Failed to parse response headers"};class Oc extends Ne{constructor(e,n){super(e,$[e],n),Object.setPrototypeOf(this,Oc.prototype),this.name="BrowserAuthError"}}function P(t,e){return new Oc(t,e)}const g={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"};function kh(t){return encodeURIComponent(Iv(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Oh(t){return wM(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Iv(t){return wM((new TextEncoder).encode(t))}function wM(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}const TM="SHA-256",_K=new Uint8Array([1,0,1]),SM="0123456789abcdef",_M=new Uint32Array(1),Ev={name:"RSASSA-PKCS1-v1_5",hash:TM,modulusLength:2048,publicExponent:_K};function AM(t,e,n){return wv.apply(this,arguments)}function wv(){return(wv=v(function*(t,e,n){e?.addQueueMeasurement(g.Sha256Digest,n);const o=(new TextEncoder).encode(t);return window.crypto.subtle.digest(TM,o)})).apply(this,arguments)}function bK(t){return window.crypto.getRandomValues(t)}function Tv(){return window.crypto.getRandomValues(_M),_M[0]}function Qn(){const t=Date.now(),e=1024*Tv()+(1023&Tv()),n=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Tv();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/65536,n[4]=t/256,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let s="";for(let a=0;a<n.length;a++)s+=SM.charAt(n[a]>>>4),s+=SM.charAt(15&n[a]),(3===a||5===a||7===a||9===a)&&(s+="-");return s}function Sv(){return(Sv=v(function*(t,e){return window.crypto.subtle.generateKey(Ev,t,e)})).apply(this,arguments)}function _v(t){return Av.apply(this,arguments)}function Av(){return(Av=v(function*(t){return window.crypto.subtle.exportKey(yM,t)})).apply(this,arguments)}function Dv(){return(Dv=v(function*(t,e,n){return window.crypto.subtle.importKey(yM,t,Ev,e,n)})).apply(this,arguments)}function bv(){return(bv=v(function*(t,e){return window.crypto.subtle.sign(Ev,t,e)})).apply(this,arguments)}function DM(t){return Rv.apply(this,arguments)}function Rv(){return(Rv=v(function*(t){const e=yield AM(t);return Oh(new Uint8Array(e))})).apply(this,arguments)}function Ph(){return window.parent!==window}function Er(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function bM(){if(typeof window>"u")throw P(as)}function RM(t){if(!t)throw P(bh)}function Mv(t){bM(),function LK(){if(oe.hashContainsKnownProperties(window.location.hash)&&Ph())throw P(ph)}(),function UK(){if(function PK(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${Xt.POPUP_NAME_PREFIX}.`)}())throw P(gh)}(),RM(t)}function MM(t,e){if(Mv(t),function FK(t){if(Ph()&&!t)throw P(fh)}(e.system.allowRedirectInIframe),"memoryStorage"===e.cache.cacheLocation&&!e.cache.storeAuthStateInCookie)throw Jy(_d)}function NM(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const kM={now:()=>(kM.delegate||Date).now(),delegate:void 0};class BK extends kt{constructor(e=1/0,n=1/0,r=kM){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;n||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const s=n.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}const OM="@azure/msal-angular",Nv="3.1.0",xh=new R("MSAL_INSTANCE"),PM=new R("MSAL_GUARD_CONFIG"),kv=new R("MSAL_INTERCEPTOR_CONFIG"),jK=new R("MSAL_BROADCAST_CONFIG");let No=(()=>{class t{constructor(n,r){this.instance=n,this.location=r;const o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary("@azure/msal-angular",Nv)}initialize(){return me(this.instance.initialize())}acquireTokenPopup(n){return me(this.instance.acquireTokenPopup(n))}acquireTokenRedirect(n){return me(this.instance.acquireTokenRedirect(n))}acquireTokenSilent(n){return me(this.instance.acquireTokenSilent(n))}handleRedirectObservable(n){return me(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(n||this.redirectHash)))}loginPopup(n){return me(this.instance.loginPopup(n))}loginRedirect(n){return me(this.instance.loginRedirect(n))}logout(n){return me(this.instance.logout(n))}logoutRedirect(n){return me(this.instance.logoutRedirect(n))}logoutPopup(n){return me(this.instance.logoutPopup(n))}ssoSilent(n){return me(this.instance.ssoSilent(n))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(OM,Nv)),this.logger}setLogger(n){this.logger=n.clone(OM,Nv),this.instance.setLogger(n)}}return t.\u0275fac=function(n){return new(n||t)(M(xh),M(Br))},t.\u0275prov=k({token:t,factory:t.\u0275fac}),t})(),ls=(()=>{class t{constructor(n,r,o){this.msalInstance=n,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new BK(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new kt,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Vt("startup"),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);const s=EK.getInteractionStatusFromEvent(i,this._inProgress.value);null!==s&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return t.\u0275fac=function(n){return new(n||t)(M(xh),M(No),M(jK,8))},t.\u0275prov=k({token:t,factory:t.\u0275fac}),t})(),Ov=(()=>{class t{constructor(n,r,o,i,s){this.msalGuardConfig=n,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(n){return this.router.parseUrl(n)}getDestinationUrl(n){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(n);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${n}`}loginInteractively(n){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,n):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===O.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(ie(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(n.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(ie(()=>!1))}activateHelper(n){if(this.msalGuardConfig.interactionType!==O.Popup&&this.msalGuardConfig.interactionType!==O.Redirect)throw new hc("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),x(!0);if(oe.hashContainsKnownProperties(window.location.hash)&&Ph()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),x(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(Vr(()=>this.authService.handleRedirectObservable()),Vr(()=>{if(!this.authService.instance.getAllAccounts().length)return n?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(n)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),x(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),n){const o=this.includesCode(n.url),i=!!n.root&&!!n.root.fragment&&this.includesCode(`#${n.root.fragment}`),s=0===this.location.prepareExternalUrl(n.url).indexOf("#");if(o&&(i||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?x(this.parseUrl(this.location.path())):x(this.parseUrl(""))}return x(!0)}),qr(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&n?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),x(this.loginFailedRoute)):x(!1))))}includesCode(n){return n.lastIndexOf("/code")>-1&&n.lastIndexOf("/code")===n.length-5||n.indexOf("#code=")>-1||n.indexOf("&code=")>-1}canActivate(n,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(n,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return t.\u0275fac=function(n){return new(n||t)(M(PM),M(ls),M(No),M(Br),M(an))},t.\u0275prov=k({token:t,factory:t.\u0275fac}),t})(),VK=(()=>{class t{constructor(n,r,o,i,s){this.msalInterceptorConfig=n,this.authService=r,this.location=o,this.msalBroadcastService=i,this._document=s}intercept(n,r){if(this.msalInterceptorConfig.interactionType!==O.Popup&&this.msalInterceptorConfig.interactionType!==O.Redirect)throw new hc("invalid_interaction_type","Invalid interaction type provided to MSAL Interceptor. InteractionType.Popup, InteractionType.Redirect must be provided in the msalInterceptorConfiguration");this.authService.getLogger().verbose("MSAL Interceptor activated");const o=this.getScopesForEndpoint(n.url,n.method);if(!o||0===o.length)return this.authService.getLogger().verbose("Interceptor - no scopes for endpoint"),r.handle(n);let i;this.authService.instance.getActiveAccount()?(this.authService.getLogger().verbose("Interceptor - active account selected"),i=this.authService.instance.getActiveAccount()):(this.authService.getLogger().verbose("Interceptor - no active account, fallback to first account"),i=this.authService.instance.getAllAccounts()[0]);const s="function"==typeof this.msalInterceptorConfig.authRequest?this.msalInterceptorConfig.authRequest(this.authService,n,{account:i}):{...this.msalInterceptorConfig.authRequest,account:i};return this.authService.getLogger().info(`Interceptor - ${o.length} scopes found for endpoint`),this.authService.getLogger().infoPii(`Interceptor - [${o}] scopes found for ${n.url}`),this.acquireToken(s,o,i).pipe(mt(a=>{this.authService.getLogger().verbose("Interceptor - setting authorization headers");const c=n.headers.set("Authorization",`Bearer ${a.accessToken}`),l=n.clone({headers:c});return r.handle(l)}))}acquireToken(n,r,o){return this.authService.acquireTokenSilent({...n,scopes:r,account:o}).pipe(qr(()=>(this.authService.getLogger().error("Interceptor - acquireTokenSilent rejected with error. Invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(yr(1),mt(i=>"none"===i?this.acquireTokenInteractively(n,r):this.msalBroadcastService.inProgress$.pipe(bt(s=>"none"===s),yr(1),mt(()=>this.acquireToken(n,r,o))))))),mt(i=>i.accessToken?x(i):(this.authService.getLogger().error("Interceptor - acquireTokenSilent resolved with null access token. Known issue with B2C tenants, invoking interaction to resolve."),this.msalBroadcastService.inProgress$.pipe(bt(s=>"none"===s),yr(1),mt(()=>this.acquireTokenInteractively(n,r))))))}acquireTokenInteractively(n,r){if(this.msalInterceptorConfig.interactionType===O.Popup)return this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by popup"),this.authService.acquireTokenPopup({...n,scopes:r});this.authService.getLogger().verbose("Interceptor - error acquiring token silently, acquiring by redirect");const o=window.location.href;return this.authService.acquireTokenRedirect({...n,scopes:r,redirectStartPage:o}),Tn}getScopesForEndpoint(n,r){this.authService.getLogger().verbose("Interceptor - getting scopes for endpoint");const o=this.location.normalize(n),i=Array.from(this.msalInterceptorConfig.protectedResourceMap.keys()),s=this.matchResourcesToEndpoint(i,o);return s.length>0?this.matchScopesToEndpoint(this.msalInterceptorConfig.protectedResourceMap,s,r):null}matchResourcesToEndpoint(n,r){const o=[];return n.forEach(i=>{const s=this.location.normalize(i),a=this.getAbsoluteUrl(s),c=new URL(a),l=this.getAbsoluteUrl(r),u=new URL(l);this.checkUrlComponents(c,u)&&o.push(i)}),o}checkUrlComponents(n,r){const o=["protocol","host","pathname","search","hash"];for(const i of o)if(n[i]){const s=decodeURIComponent(n[i]);if(!ln.matchPattern(s,r[i]))return!1}return!0}getAbsoluteUrl(n){const r=this._document.createElement("a");return r.href=n,r.href}matchScopesToEndpoint(n,r,o){const i=[];return r.forEach(s=>{const a=[],c=n.get(s);null!==c?(c.forEach(l=>{if("string"==typeof l)a.push(l);else{const u=o.toLowerCase();l.httpMethod.toLowerCase()===u&&(null===l.scopes?i.push(null):l.scopes.forEach(h=>{a.push(h)}))}}),a.length>0&&i.push(a)):i.push(null)}),i.length>0?(i.length>1&&this.authService.getLogger().warning("Interceptor - More than 1 matching scopes for endpoint found."),i[0]):null}}return t.\u0275fac=function(n){return new(n||t)(M(kv),M(No),M(Br),M(ls),M(Bt))},t.\u0275prov=k({token:t,factory:t.\u0275fac}),t})(),$K=(()=>{class t{static forRoot(n,r,o){return{ngModule:t,providers:[{provide:xh,useValue:n},{provide:PM,useValue:r},{provide:kv,useValue:o},No]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=or({type:t}),t.\u0275inj=Mn({providers:[Ov,ls],imports:[qD]}),t})();const GK=[{path:"profile",component:uK,canActivate:[Ov]},{path:"**",component:(()=>{class t{constructor(n,r){this.authService=n,this.msalBroadcastService=r}ngOnInit(){this.msalBroadcastService.msalSubject$.pipe(bt(n=>"msal:loginSuccess"===n.eventType)).subscribe(n=>{this.authService.instance.setActiveAccount(n.payload.account)})}static{this.\u0275fac=function(r){return new(r||t)(U(No),U(ls))}}static{this.\u0275cmp=Ms({type:t,selectors:[["app-home"]],decls:5,vars:0,consts:[[1,"title"]],template:function(r,o){1&r&&(_e(0,"div",0)(1,"h5"),ae(2," Welcome to the Microsoft Authentication Library For JavaScript - Angular SPA "),ee(),_e(3,"p"),ae(4,'View your data from Microsoft Graph by clicking the "View Profile" link above.'),ee()())},encapsulation:2})}}return t})()}];let zK=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=or({type:t})}static{this.\u0275inj=Mn({imports:[cM.forRoot(GK,{useHash:!0}),cM]})}}return t})();const qK=()=>["profile"];function KK(t,e){if(1&t){const n=nm();_e(0,"button",6),Na("click",function(){return Yf(n),Jf(sm().login())}),ae(1,"Sign In"),ee()}}function WK(t,e){if(1&t){const n=nm();_e(0,"button",6),Na("click",function(){return Yf(n),Jf(sm().logout())}),ae(1,"Sign Out"),ee()}}function QK(t,e){1&t&&(_e(0,"a",7),ae(1,"View Profile"),ee()),2&t&&Ni("routerLink",aA(1,qK))}let YK=(()=>{class t{constructor(n,r){this.authService=n,this.msalBroadcastService=r,this.loginDisplay=!1}ngOnInit(){console.log("\u{1f680} AppComponent: Initializing authentication..."),alert("\u{1f680} App is initializing authentication system..."),this.msalBroadcastService.msalSubject$.pipe(bt(n=>"msal:loginSuccess"===n.eventType)).subscribe(n=>{console.log("\u2705 AppComponent: Login successful!",n),alert("\u2705 Login successful! Welcome to the app!"),this.authService.instance.setActiveAccount(n.payload.account),this.setLoginDisplay()}),this.msalBroadcastService.msalSubject$.pipe(bt(n=>"msal:loginFailure"===n.eventType)).subscribe(n=>{console.error("\u274c AppComponent: Login failed!",n),alert("\u274c Login failed: "+(n.error?.message||"Unknown error"))}),this.msalBroadcastService.msalSubject$.pipe(bt(n=>"msal:logoutSuccess"===n.eventType)).subscribe(n=>{console.log("\u{1f44b} AppComponent: Logout successful!",n),alert("\u{1f44b} Logout successful! You have been signed out."),this.setLoginDisplay()}),this.setLoginDisplay()}setLoginDisplay(){this.loginDisplay=this.authService.instance.getAllAccounts().length>0,console.log("\u{1f50d} AppComponent: Login display status:",this.loginDisplay),console.log("\u{1f464} AppComponent: Active accounts:",this.authService.instance.getAllAccounts())}login(){console.log("\u{1f510} AppComponent: Initiating login redirect..."),alert("\u{1f510} Redirecting to Microsoft Entra ID for authentication..."),this.authService.loginRedirect()}logout(){console.log("\u{1f44b} AppComponent: Initiating logout redirect..."),alert("\u{1f44b} Signing you out..."),this.authService.logoutRedirect()}static{this.\u0275fac=function(r){return new(r||t)(U(No),U(ls))}}static{this.\u0275cmp=Ms({type:t,selectors:[["app-root"]],decls:10,vars:3,consts:[[1,"navbar","navbar-dark","bg-primary"],[1,"navbar-brand"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"profileButton"],["class","btn btn-secondary",3,"routerLink",4,"ngIf"],[1,"container"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary",3,"routerLink"]],template:function(r,o){1&r&&(_e(0,"nav",0)(1,"a",1),ae(2,"Microsoft Identity Platform"),ee(),_e(3,"div"),vo(4,KK,2,0,"button",2)(5,WK,2,0,"button",2),ee()(),_e(6,"div",3),vo(7,QK,2,2,"a",4),ee(),_e(8,"div",5),ki(9,"router-outlet"),ee()),2&r&&(pt(4),Ni("ngIf",!o.loginDisplay),pt(),Ni("ngIf",o.loginDisplay),pt(2),Ni("ngIf",o.loginDisplay))},dependencies:[VD,Py,yd]})}}return t})();var xe=function(t){return t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace",t}(xe||{});class Zr{constructor(e,n,r){this.level=xe.Info;const i=e||Zr.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:xe.Info,this.correlationId=i.correlationId||w.EMPTY_STRING,this.packageName=n||w.EMPTY_STRING,this.packageVersion=r||w.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xe.Info}}clone(e,n,r){return new Zr({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const i=`[${(new Date).toUTCString()}] : [${n.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${xe[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,i,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:xe.Error,containsPii:!1,correlationId:n||w.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:xe.Error,containsPii:!0,correlationId:n||w.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:xe.Warning,containsPii:!1,correlationId:n||w.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:xe.Warning,containsPii:!0,correlationId:n||w.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:xe.Info,containsPii:!1,correlationId:n||w.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:xe.Info,containsPii:!0,correlationId:n||w.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:xe.Verbose,containsPii:!1,correlationId:n||w.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:xe.Verbose,containsPii:!0,correlationId:n||w.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:xe.Trace,containsPii:!1,correlationId:n||w.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:xe.Trace,containsPii:!0,correlationId:n||w.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Lh={createNewGuid:()=>{throw S(X)},base64Decode:()=>{throw S(X)},base64Encode:()=>{throw S(X)},base64UrlEncode:()=>{throw S(X)},encodeKid:()=>{throw S(X)},getPublicKeyThumbprint:()=>v(function*(){throw S(X)})(),removeTokenBindingKey:()=>v(function*(){throw S(X)})(),clearKeystore:()=>v(function*(){throw S(X)})(),signJwt:()=>v(function*(){throw S(X)})(),hashString:()=>v(function*(){throw S(X)})()},xM="@azure/msal-common",xv="14.16.1";function ko(t,e){const n=function JK(t){if(!t)throw S(Vd);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw S(yc);return n[2]}(t);try{const r=e(n);return JSON.parse(r)}catch{throw S(yc)}}function LM(t,e){if(0===e||Date.now()-3e5>t+e)throw S(Wd)}function Yn(){return Math.round((new Date).getTime()/1e3)}function Lv(t,e){const n=Number(t)||0;return Yn()+e>n}function us(t){return[XK(t),e3(t),t3(t),n3(t),r3(t)].join(yt.CACHE_KEY_SEPARATOR).toLowerCase()}function Fh(t,e,n,r,o){return{credentialType:q.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:o}}function Uh(t,e,n,r,o,i,s,a,c,l,u,d,h,f,p){const m={homeAccountId:t,credentialType:q.ACCESS_TOKEN,secret:n,cachedAt:Yn().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||Ie.BEARER};if(d&&(m.userAssertionHash=d),l&&(m.refreshOn=l.toString()),f&&(m.requestedClaims=f,m.requestedClaimsHash=p),m.tokenType?.toLowerCase()!==Ie.BEARER.toLowerCase())switch(m.credentialType=q.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case Ie.POP:const y=ko(n,c);if(!y?.cnf?.kid)throw S(eh);m.keyId=y.cnf.kid;break;case Ie.SSH:m.keyId=h}return m}function FM(t,e,n,r,o,i,s){const a={credentialType:q.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function Fv(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function UM(t){return!!t&&Fv(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===q.ACCESS_TOKEN||t.credentialType===q.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function HM(t){return!!t&&Fv(t)&&t.hasOwnProperty("realm")&&t.credentialType===q.ID_TOKEN}function BM(t){return!!t&&Fv(t)&&t.credentialType===q.REFRESH_TOKEN}function XK(t){return[t.homeAccountId,t.environment].join(yt.CACHE_KEY_SEPARATOR).toLowerCase()}function e3(t){return[t.credentialType,t.credentialType===q.REFRESH_TOKEN&&t.familyId||t.clientId,t.realm||""].join(yt.CACHE_KEY_SEPARATOR).toLowerCase()}function t3(t){return(t.target||"").toLowerCase()}function n3(t){return(t.requestedClaimsHash||"").toLowerCase()}function r3(t){return t.tokenType&&t.tokenType.toLowerCase()!==Ie.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function jM(){return Yn()+86400}function Hh(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function Uv(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function VM(t){return t.expiresAt<=Yn()}class Ve{constructor(e){const n=e?ln.trimArrayEntries([...e]):[],r=n?ln.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||w.EMPTY_STRING).split(" ");return new Ve(r)}static createSearchScopes(e){const n=new Ve(e);return n.containsOnlyOIDCScopes()?n.removeScope(w.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}validateInputScopes(e){if(!e||e.length<1)throw we(Md)}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new Ve(n);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return uM.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw S(Zd)}}removeScope(e){if(!e)throw S(Jd);this.scopes.delete(e.trim())}removeOIDCScopes(){uM.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw S(Cc);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw S(Cc);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return n.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):w.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Bh(t,e){if(!t)throw S(jd);try{const n=e(t);return JSON.parse(n)}catch{throw S(mc)}}function ds(t){if(!t)throw S(mc);const e=t.split(yt.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?w.EMPTY_STRING:e[1]}}function jh(t,e){return!!t&&!!e&&t===e.split(".")[1]}function Hv(t,e,n,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l}=r,u=s||c||l||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:jh(u,t)}}return{tenantId:n,localAccountId:e,isHomeTenant:jh(n,t)}}function Bv(t,e,n,r){let o=t;if(e){const{isHomeTenant:i,...s}=e;o={...t,...s}}if(n){const{isHomeTenant:i,...s}=Hv(t.homeAccountId,t.localAccountId,t.tenantId,n);return o={...o,...s,idTokenClaims:n,idToken:r},o}return o}function $M(t){return t&&(t.tid||t.tfp||t.acr)||null}class Xe{generateAccountId(){return[this.homeAccountId,this.environment].join(yt.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return Xe.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join(yt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,n,r){const o=new Xe;let i;o.authorityType=1===n.authorityType?"ADFS":"AAD"===n.protocolMode?"MSSTS":"Generic",e.clientInfo&&r&&(i=Bh(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||n&&n.getPreferredCache();if(!s)throw S(Ec);if(o.environment=s,o.realm=i?.utid||$M(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"",o.username=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn||(e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null)||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const l=Hv(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,n,r){const o=new Xe;return o.authorityType=e.authorityType||"Generic",o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=n,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,n,r,o,i){if(1!==n&&2!==n){if(e)try{const s=Bh(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=n.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&o}}const zM={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},jv={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},qM=new Set;function KM(t,e,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const o=Vh(e,t);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Vh(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}jv.metadata.forEach(t=>{t.aliases.forEach(e=>{qM.add(e)})});const Vv="cache_quota_exceeded",$v="cache_error_unknown",Gv={[Vv]:"Exceeded cache storage capacity.",[$v]:"Unexpected error occurred when using cache storage."};class hs extends Error{constructor(e,n){const r=n||(Gv[e]?Gv[e]:Gv[$v]);super(`${e}: ${r}`),Object.setPrototypeOf(this,hs.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function WM(t){return t instanceof Error?"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||t.message.includes("exceeded the quota")?new hs(Vv):new hs(t.name,t.message):new hs($v)}class fs{constructor(e,n,r,o){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(xM,xv),this.staticAuthorityOptions=o}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(n||{},e),e,n)}getAccountInfoFilteredBy(e,n){const r=this.getAllAccounts(n,e);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,n,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,o,i){let a,s=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const c=this.getIdToken(e,o,n,r.tenantId);return c&&(a=ko(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=Bv(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,n,r,o){const i=e.getAccountInfo();let s=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const l=s.get(r);if(!l)return[];s=new Map([[r,l]])}const c=[];return s.forEach(l=>{const u=this.getTenantedAccountInfoByFilter(i,a,l,n,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||void 0!==n.isHomeTenant&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}saveCacheRecord(e,n,r){var o=this;return v(function*(){if(!e)throw S(Xd);try{e.account&&o.setAccount(e.account,n),e.idToken&&!1!==r?.idToken&&o.setIdTokenCredential(e.idToken,n),e.accessToken&&!1!==r?.accessToken&&(yield o.saveAccessToken(e.accessToken,n)),e.refreshToken&&!1!==r?.refreshToken&&o.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&o.setAppMetadata(e.appMetadata,n)}catch(i){throw o.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Ne?i:WM(i)}})()}saveAccessToken(e,n){var r=this;return v(function*(){const o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=r.getTokenKeys(),s=Ve.fromString(e.target);i.accessToken.forEach(a=>{if(!r.accessTokenKeyMatchesFilter(a,o,!1))return;const c=r.getAccessTokenCredential(a,n);c&&r.credentialMatchesFilter(c,o)&&Ve.fromString(c.target).intersectingScopeSets(s)&&r.removeAccessToken(a,n)}),r.setAccessTokenCredential(e,n)})()}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),o=[];return r.forEach(i=>{if(!this.isAccountKey(i,e.homeAccountId))return;const s=this.getAccount(i,n,this.commonLogger);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;const a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&0===c.length||o.push(s)}),o}isAccountKey(e,n,r){return!(e.split(yt.CACHE_KEY_SEPARATOR).length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(yt.CACHE_KEY_SEPARATOR).length<6)return!1;const n=e.toLowerCase();if(-1===n.indexOf(q.ID_TOKEN.toLowerCase())&&-1===n.indexOf(q.ACCESS_TOKEN.toLowerCase())&&-1===n.indexOf(q.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===n.indexOf(q.REFRESH_TOKEN.toLowerCase()))return!1;if(n.indexOf(q.REFRESH_TOKEN.toLowerCase())>-1){const o=`${q.REFRESH_TOKEN}${yt.CACHE_KEY_SEPARATOR}1${yt.CACHE_KEY_SEPARATOR}`;if(-1===n.indexOf(`${q.REFRESH_TOKEN}${yt.CACHE_KEY_SEPARATOR}${this.clientId}${yt.CACHE_KEY_SEPARATOR}`.toLowerCase())&&-1===n.indexOf(o.toLowerCase()))return!1}else if(-1===n.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||"string"==typeof n.homeAccountId&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===q.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===Ie.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(o=>{if(!this.isAuthorityMetadata(o)||-1===o.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(o);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(e){var n=this;return v(function*(){const r=n.getAccountKeys(),o=[];r.forEach(i=>{o.push(n.removeAccount(i,e))}),yield Promise.all(o)})()}removeAccount(e,n){var r=this;return v(function*(){const o=r.getAccount(e,n,r.commonLogger);o&&(yield r.removeAccountContext(o,n),r.removeItem(e,n))})()}removeAccountContext(e,n){var r=this;return v(function*(){const o=r.getTokenKeys(),i=e.generateAccountId();o.idToken.forEach(s=>{0===s.indexOf(i)&&r.removeIdToken(s,n)}),o.accessToken.forEach(s=>{0===s.indexOf(i)&&r.removeAccessToken(s,n)}),o.refreshToken.forEach(s=>{0===s.indexOf(i)&&r.removeRefreshToken(s,n)}),r.getKeys().forEach(s=>{s.includes(i)&&r.removeItem(s,n)})})()}updateOutdatedCachedAccount(e,n,r,o){if(n&&n.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(u=>u.startsWith(n.homeAccountId)),s=[];i.forEach(u=>{const d=this.getCachedAccountEntity(u,r);d&&s.push(d)});const a=s.find(u=>jh(u.realm,u.homeAccountId))||s[0];a.tenantProfiles=s.map(u=>({tenantId:u.realm,localAccountId:u.localAccountId,name:u.name,isHomeTenant:jh(u.realm,u.homeAccountId)}));const c=fs.toObject(new Xe,{...a}),l=c.generateAccountKey();return i.forEach(u=>{u!==l&&this.removeOutdatedAccount(e,r)}),this.setAccount(c,r),o?.verbose("Updated an outdated account entity in the cache"),c}return n}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),!r||r.credentialType.toLowerCase()!==q.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==Ie.POP)return;const o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error("Binding key could not be removed")})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}readAccountFromCache(e,n){const r=Xe.generateAccountCacheKey(e);return this.getAccount(r,n,this.commonLogger)}getIdToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a=this.getIdTokensByFilter({homeAccountId:e.homeAccountId,environment:e.environment,credentialType:q.ID_TOKEN,clientId:this.clientId,realm:o},n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){const u=new Map;a.forEach((h,f)=>{h.realm===e.tenantId&&u.set(f,h)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,d)=>{this.removeIdToken(d,n)}),i&&n&&i.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(s,n);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&-1===r.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===r.indexOf(n.homeAccountId.toLowerCase()))}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const s=Ve.createSearchScopes(n.scopes),a=n.authenticationScheme||Ie.BEARER,c=a&&a.toLowerCase()!==Ie.BEARER.toLowerCase()?q.ACCESS_TOKEN_WITH_AUTH_SCHEME:q.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach(f=>{if(this.accessTokenKeyMatchesFilter(f,l,!0)){const p=this.getAccessTokenCredential(f,n.correlationId);p&&this.credentialMatchesFilter(p,l)&&d.push(p)}});const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach(f=>{this.removeAccessToken(us(f),n.correlationId)}),i&&n.correlationId&&i.addFields({multiMatchedAT:d.length},n.correlationId),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,n,r){const o=e.toLowerCase();if(n.clientId&&-1===o.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===o.indexOf(n.homeAccountId.toLowerCase())||n.realm&&-1===o.indexOf(n.realm.toLowerCase())||n.requestedClaimsHash&&-1===o.indexOf(n.requestedClaimsHash.toLowerCase()))return!1;if(n.target){const i=n.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;const s=this.getAccessTokenCredential(i,n);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:q.REFRESH_TOKEN,clientId:this.clientId,familyId:n?"1":void 0},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d,r);h&&this.credentialMatchesFilter(h,a)&&l.push(h)}});const u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&-1===r.indexOf(n.familyId.toLowerCase())||!n.familyId&&n.clientId&&-1===r.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===r.indexOf(n.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const r=this.getAppMetadataFilteredBy({environment:e,clientId:this.clientId}),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw S(Qd);return o[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!(!n||"1"!==n.familyId)}matchHomeAccountId(e,n){return"string"==typeof e.homeAccountId&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){return n===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){return n.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,n){return!(!e||"string"!=typeof e||n?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,n){return!(!e.userAssertionHash||n!==e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const o=function u3(t,e){let n;const r=t.canonicalAuthority;if(r){const o=new oe(r).getUrlComponents().HostNameAndPort;n=KM(o,t.cloudDiscoveryMetadata?.metadata,"config",e)||KM(o,jv.metadata,"hardcoded_values",e)||t.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(o.includes(n)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!(!e.clientId||n!==e.clientId)}matchFamilyId(e,n){return!(!e.familyId||n!==e.familyId)}matchRealm(e,n){return e.realm?.toLowerCase()===n.toLowerCase()}matchNativeAccountId(e,n){return!(!e.nativeAccountId||n!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!(!e.authorityType||n.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,n){return!(e.credentialType!==q.ACCESS_TOKEN&&e.credentialType!==q.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&Ve.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!(!e.tokenType||e.tokenType!==n)}matchKeyId(e,n){return!(!e.keyId||e.keyId!==n)}isAppMetadata(e){return-1!==e.indexOf(qy)}isAuthorityMetadata(e){return-1!==e.indexOf("authority-metadata")}generateAuthorityMetadataCacheKey(e){return`authority-metadata-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class h3 extends fs{setAccount(){throw S(X)}getAccount(){throw S(X)}getCachedAccountEntity(){throw S(X)}setIdTokenCredential(){throw S(X)}getIdTokenCredential(){throw S(X)}setAccessTokenCredential(){throw S(X)}getAccessTokenCredential(){throw S(X)}setRefreshTokenCredential(){throw S(X)}getRefreshTokenCredential(){throw S(X)}setAppMetadata(){throw S(X)}getAppMetadata(){throw S(X)}setServerTelemetry(){throw S(X)}getServerTelemetry(){throw S(X)}setAuthorityMetadata(){throw S(X)}getAuthorityMetadata(){throw S(X)}getAuthorityMetadataKeys(){throw S(X)}setThrottlingCache(){throw S(X)}getThrottlingCache(){throw S(X)}removeItem(){throw S(X)}getKeys(){throw S(X)}getAccountKeys(){throw S(X)}getTokenKeys(){throw S(X)}updateCredentialCacheKey(){throw S(X)}removeOutdatedAccount(){throw S(X)}}const QM={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},f3={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xe.Info,correlationId:w.EMPTY_STRING},p3={claimsBasedCachingEnabled:!1},g3={sendGetRequestAsync:()=>v(function*(){throw S(X)})(),sendPostRequestAsync:()=>v(function*(){throw S(X)})()},m3={sku:w.SKU,version:xv,cpu:w.EMPTY_STRING,os:w.EMPTY_STRING},y3={clientSecret:w.EMPTY_STRING,clientAssertion:void 0},v3={azureCloudInstance:"none",tenant:`${w.DEFAULT_COMMON_TENANT}`},C3={application:{appName:"",appVersion:""}};function E3(t){return{clientCapabilities:[],azureCloudOptions:v3,skipAuthorityMetadataCache:!1,instanceAware:!1,...t}}function zv(t){return"OIDC"===t.authOptions.authority.options.protocolMode}const w3={sendGetRequestAsync:()=>Promise.reject(S(X)),sendPostRequestAsync:()=>Promise.reject(S(X))};class YM{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class T3{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new YM}}startPerformanceMeasurement(){return new YM}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}class $h{navigateInternal(e,n){return $h.defaultNavigateWindow(e,n)}navigateExternal(e,n){return $h.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},n.timeout)})}}class Gh extends Ne{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Gh.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function JM(t,e,n){return new Gh(t,e,n)}class S3{sendGetRequestAsync(e,n){return v(function*(){let r,o={},i=0;const s=ZM(n);try{r=yield fetch(e,{method:"GET",headers:s})}catch{throw P(window.navigator.onLine?Ih:cs)}o=XM(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch{throw JM(P(Mc),i,o)}})()}sendPostRequestAsync(e,n){return v(function*(){const r=n&&n.body||"",o=ZM(n);let i,s=0,a={};try{i=yield fetch(e,{method:"POST",headers:o,body:r})}catch{throw P(window.navigator.onLine?Ch:cs)}a=XM(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch{throw JM(P(Mc),s,a)}})()}}function ZM(t){try{const e=new Headers;return t&&t.headers?(Object.entries(t.headers).forEach(([r,o])=>{e.append(r,o)}),e):e}catch{throw P(IM)}}function XM(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw P(EM)}}const qv=1e4,ps="3.30.0";class Kv{static loggerCallback(e,n){switch(e){case xe.Error:return void console.error(n);case xe.Info:return void console.info(n);case xe.Verbose:return void console.debug(n);case xe.Warning:return void console.warn(n);default:return void console.log(n)}}constructor(e){let n;this.browserEnvironment=typeof window<"u",this.config=function b3({auth:t,cache:e,system:n,telemetry:r},o){const i={clientId:w.EMPTY_STRING,authority:`${w.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:w.EMPTY_STRING,authorityMetadata:w.EMPTY_STRING,redirectUri:typeof window<"u"?Er():"",postLogoutRedirectUri:w.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:"AAD",OIDCOptions:{serverResponseType:ac.FRAGMENT,defaultScopes:[w.OPENID_SCOPE,w.PROFILE_SCOPE,w.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:"none",tenant:w.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:"sessionStorage",temporaryCacheLocation:"sessionStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!e||"localStorage"!==e.cacheLocation),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:xe.Info,piiLoggingEnabled:!1},l={...{...QM,loggerOptions:a,networkClient:o?new S3:w3,navigationClient:new $h,loadFrameTimeout:0,windowHashTimeout:n?.loadFrameTimeout||6e4,iframeHashTimeout:n?.loadFrameTimeout||qv,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:n?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:Xt.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:n?.loggerOptions||a},u={application:{appName:w.EMPTY_STRING,appVersion:w.EMPTY_STRING},client:new T3};if("OIDC"!==t?.protocolMode&&t?.OIDCOptions&&new Zr(l.loggerOptions).warning(JSON.stringify(we(Ud))),t?.protocolMode&&"AAD"!==t.protocolMode&&l?.allowNativeBroker)throw we(Hd);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t?.OIDCOptions}},cache:{...s,...e},system:l,telemetry:{...u,...r}}}(e,this.browserEnvironment);try{n=window.sessionStorage}catch{}const r=n?.getItem("msal.browser.log.level"),o=n?.getItem("msal.browser.log.pii")?.toLowerCase(),i="true"===o||"false"!==o&&void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(xe).includes(r)?xe[r]:void 0;a&&(s.loggerCallback=Kv.loggerCallback,s.logLevel=a),void 0!==i&&(s.piiLoggingEnabled=i),this.logger=new Zr(s,"@azure/msal-browser",ps),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let eN=(()=>{class t extends Kv{getModuleName(){return t.MODULE_NAME}getId(){return t.ID}initialize(){var n=this;return v(function*(){return n.available=typeof window<"u",n.available})()}}return t.MODULE_NAME="",t.ID="StandardOperatingContext",t})();const tN="missing_kid_error",nN="missing_alg_error",M3={[tN]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[nN]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Wv extends Ne{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,Wv.prototype)}}function rN(t){return new Wv(t,M3[t])}class Qv{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw rN(tN);if(!e.alg)throw rN(nN);const n=new Qv({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(n)}}function Jn(t){return(new TextDecoder).decode(function N3(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw P(Mh)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}(t))}class k3{constructor(){this.dbName=Wy,this.version=1,this.tableName=yK,this.dbOpen=!1}open(){var e=this;return v(function*(){return new Promise((n,r)=>{const o=window.indexedDB.open(e.dbName,e.version);o.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(e.tableName)}),o.addEventListener("success",i=>{e.db=i.target.result,e.dbOpen=!0,n()}),o.addEventListener("error",()=>r(P(kc)))})})()}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){var e=this;return v(function*(){if(!e.dbOpen)return e.open()})()}getItem(e){var n=this;return v(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(P(Jr));const a=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).get(e);a.addEventListener("success",c=>{const l=c;n.closeConnection(),r(l.target.result)}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}setItem(e,n){var r=this;return v(function*(){return yield r.validateDbIsOpen(),new Promise((o,i)=>{if(!r.db)return i(P(Jr));const c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(n,e);c.addEventListener("success",()=>{r.closeConnection(),o()}),c.addEventListener("error",l=>{r.closeConnection(),i(l)})})})()}removeItem(e){var n=this;return v(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(P(Jr));const a=n.db.transaction([n.tableName],"readwrite").objectStore(n.tableName).delete(e);a.addEventListener("success",()=>{n.closeConnection(),r()}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}getKeys(){var e=this;return v(function*(){return yield e.validateDbIsOpen(),new Promise((n,r)=>{if(!e.db)return r(P(Jr));const s=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();s.addEventListener("success",a=>{const c=a;e.closeConnection(),n(c.target.result)}),s.addEventListener("error",a=>{e.closeConnection(),r(a)})})})()}containsKey(e){var n=this;return v(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(P(Jr));const a=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).count(e);a.addEventListener("success",c=>{const l=c;n.closeConnection(),r(1===l.target.result)}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}deleteDatabase(){var e=this;return v(function*(){return e.db&&e.dbOpen&&e.closeConnection(),new Promise((n,r)=>{const o=window.indexedDB.deleteDatabase(Wy),i=setTimeout(()=>r(!1),200);o.addEventListener("success",()=>(clearTimeout(i),n(!0))),o.addEventListener("blocked",()=>(clearTimeout(i),n(!0))),o.addEventListener("error",()=>(clearTimeout(i),r(!1)))})})()}}class Yv{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,n){this.cache.set(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class O3{constructor(e){this.inMemoryCache=new Yv,this.indexedDBCache=new k3,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Oc&&e.errorCode===kc))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(e){var n=this;return v(function*(){const r=n.inMemoryCache.getItem(e);if(!r)try{return n.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield n.indexedDBCache.getItem(e)}catch(o){n.handleDatabaseAccessError(o)}return r})()}setItem(e,n){var r=this;return v(function*(){r.inMemoryCache.setItem(e,n);try{yield r.indexedDBCache.setItem(e,n)}catch(o){r.handleDatabaseAccessError(o)}})()}removeItem(e){var n=this;return v(function*(){n.inMemoryCache.removeItem(e);try{yield n.indexedDBCache.removeItem(e)}catch(r){n.handleDatabaseAccessError(r)}})()}getKeys(){var e=this;return v(function*(){const n=e.inMemoryCache.getKeys();if(0===n.length)try{return e.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield e.indexedDBCache.getKeys()}catch(r){e.handleDatabaseAccessError(r)}return n})()}containsKey(e){var n=this;return v(function*(){const r=n.inMemoryCache.containsKey(e);if(!r)try{return n.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield n.indexedDBCache.containsKey(e)}catch(o){n.handleDatabaseAccessError(o)}return r})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var e=this;return v(function*(){try{e.logger.verbose("Deleting persistent keystore");const n=yield e.indexedDBCache.deleteDatabase();return n&&e.logger.verbose("Persistent keystore deleted"),n}catch(n){return e.handleDatabaseAccessError(n),!1}})()}}let P3=(()=>{class t{constructor(n,r,o){this.logger=n,function DK(t){if(!window)throw P(as);if(!window.crypto)throw P(Dc);if(!t&&!window.crypto.subtle)throw P(Dc,"crypto_subtle_undefined")}(o??!1),this.cache=new O3(this.logger),this.performanceClient=r}createNewGuid(){return Qn()}base64Encode(n){return Iv(n)}base64Decode(n){return Jn(n)}base64UrlEncode(n){return kh(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}getPublicKeyThumbprint(n){var r=this;return v(function*(){const o=r.performanceClient?.startMeasurement(g.CryptoOptsGetPublicKeyThumbprint,n.correlationId),i=yield function RK(t,e){return Sv.apply(this,arguments)}(t.EXTRACTABLE,t.POP_KEY_USAGES),s=yield _v(i.publicKey),c=oN({e:s.e,kty:s.kty,n:s.n}),l=yield r.hashString(c),u=yield _v(i.privateKey),d=yield function MK(t,e,n){return Dv.apply(this,arguments)}(u,!1,["sign"]);return yield r.cache.setItem(l,{privateKey:d,publicKey:i.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri}),o&&o.end({success:!0}),l})()}removeTokenBindingKey(n){var r=this;return v(function*(){return yield r.cache.removeItem(n),!(yield r.cache.containsKey(n))})()}clearKeystore(){var n=this;return v(function*(){n.cache.clearInMemory();try{return yield n.cache.clearPersistent(),!0}catch(r){return r instanceof Error?n.logger.error(`Clearing keystore failed with error: ${r.message}`):n.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(n,r,o,i){var s=this;return v(function*(){const a=s.performanceClient?.startMeasurement(g.CryptoOptsSignJwt,i),c=yield s.cache.getItem(r);if(!c)throw P(Nc);const l=yield _v(c.publicKey),u=oN(l),d=kh(JSON.stringify({kid:r})),f=kh(Qv.getShrHeaderString({...o?.header,alg:l.alg,kid:d}));n.cnf={jwk:JSON.parse(u)};const m=`${f}.${kh(JSON.stringify(n))}`,C=(new TextEncoder).encode(m),I=yield function NK(t,e){return bv.apply(this,arguments)}(c.privateKey,C),F=`${m}.${Oh(new Uint8Array(I))}`;return a&&a.end({success:!0}),F})()}hashString(n){return v(function*(){return DM(n)})()}}return t.POP_KEY_USAGES=["sign","verify"],t.EXTRACTABLE=!0,t})();function oN(t){return JSON.stringify(t,Object.keys(t).sort())}const Oo=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{const a=t(...i);return s?.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},b=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),t(...i).then(a=>(n.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};let U3=(()=>{class t{constructor(n,r,o,i){this.networkInterface=n,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(n,r){var o=this;return v(function*(){o.performanceClient?.addQueueMeasurement(g.RegionDiscoveryDetectRegion,o.correlationId);let i=n;if(i)r.region_source="3";else{const s=t.IMDS_OPTIONS;try{const a=yield b(o.getRegionFromIMDS.bind(o),g.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(w.IMDS_VERSION,s);if(200===a.status&&(i=a.body,r.region_source="4"),400===a.status){const c=yield b(o.getCurrentVersion.bind(o),g.RegionDiscoveryGetCurrentVersion,o.logger,o.performanceClient,o.correlationId)(s);if(!c)return r.region_source="1",null;const l=yield b(o.getRegionFromIMDS.bind(o),g.RegionDiscoveryGetRegionFromIMDS,o.logger,o.performanceClient,o.correlationId)(c,s);200===l.status&&(i=l.body,r.region_source="4")}}catch{return r.region_source="1",null}}return i||(r.region_source="1"),i||null})()}getRegionFromIMDS(n,r){var o=this;return v(function*(){return o.performanceClient?.addQueueMeasurement(g.RegionDiscoveryGetRegionFromIMDS,o.correlationId),o.networkInterface.sendGetRequestAsync(`${w.IMDS_ENDPOINT}?api-version=${n}&format=text`,r,w.IMDS_TIMEOUT)})()}getCurrentVersion(n){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(g.RegionDiscoveryGetCurrentVersion,r.correlationId);try{const o=yield r.networkInterface.sendGetRequestAsync(`${w.IMDS_ENDPOINT}?format=json`,n);return 400===o.status&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})()}}return t.IMDS_OPTIONS={headers:{Metadata:"true"}},t})();class vt{constructor(e,n,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new U3(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(w.CIAM_AUTH_URL))return 3;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case w.ADFS:return 1;case w.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new oe(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw S(_n)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw S(_n)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw S(_n)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw S(nh);return this.replacePath(this.metadata.end_session_endpoint)}throw S(_n)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw S(_n)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw S(_n)}canReplaceTenant(e){return 1===e.PathSegments.length&&!vt.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&"AAD"===this.protocolMode}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new oe(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(0===c&&this.canReplaceTenant(o)){const u=new oe(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(n=n.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||"AAD"!==this.protocolMode&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var e=this;return v(function*(){e.performanceClient?.addQueueMeasurement(g.AuthorityResolveEndpointsAsync,e.correlationId);const n=e.getCurrentMetadataEntity(),r=yield b(e.updateCloudDiscoveryMetadata.bind(e),g.AuthorityUpdateCloudDiscoveryMetadata,e.logger,e.performanceClient,e.correlationId)(n);e.canonicalAuthority=e.canonicalAuthority.replace(e.hostnameAndPort,n.preferred_network);const o=yield b(e.updateEndpointMetadata.bind(e),g.AuthorityUpdateEndpointMetadata,e.logger,e.performanceClient,e.correlationId)(n);e.updateCachedMetadata(n,r,{source:o}),e.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},e.correlationId)})()}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:jM(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){"cache"!==n&&"cache"!==r?.source&&(e.expiresAt=jM(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.AuthorityUpdateEndpointMetadata,n.correlationId);const r=n.updateEndpointMetadataFromLocalSources(e);if(r){if("hardcoded_values"===r.source&&n.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){const i=yield b(n.updateMetadataWithRegionalInformation.bind(n),g.AuthorityUpdateMetadataWithRegionalInformation,n.logger,n.performanceClient,n.correlationId)(r.metadata);Hh(e,i,!1),e.canonical_authority=n.canonicalAuthority}return r.source}let o=yield b(n.getEndpointMetadataFromNetwork.bind(n),g.AuthorityGetEndpointMetadataFromNetwork,n.logger,n.performanceClient,n.correlationId)();if(o)return n.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield b(n.updateMetadataWithRegionalInformation.bind(n),g.AuthorityUpdateMetadataWithRegionalInformation,n.logger,n.performanceClient,n.correlationId)(o)),Hh(e,o,!0),"network";throw S(Gd,n.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),Hh(e,n,!1),{source:"config"};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Hh(e,o,!1),{source:"hardcoded_values",metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=VM(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:"cache"}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new oe(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw we(xd)}return null}getEndpointMetadataFromNetwork(){var e=this;return v(function*(){e.performanceClient?.addQueueMeasurement(g.AuthorityGetEndpointMetadataFromNetwork,e.correlationId);const n={},r=e.defaultOpenIdConfigurationEndpoint;e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const o=yield e.networkInterface.sendGetRequestAsync(r,n);return function x3(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}(o.body)?o.body:(e.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in zM?zM[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.AuthorityUpdateMetadataWithRegionalInformation,n.correlationId);const r=n.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==w.AZURE_REGION_AUTO_DISCOVER_FLAG)return n.regionDiscoveryMetadata.region_outcome="2",n.regionDiscoveryMetadata.region_used=r,vt.replaceWithRegionalInformation(e,r);const o=yield b(n.regionDiscovery.detectRegion.bind(n.regionDiscovery),g.RegionDiscoveryDetectRegion,n.logger,n.performanceClient,n.correlationId)(n.authorityOptions.azureRegionConfiguration?.environmentRegion,n.regionDiscoveryMetadata);if(o)return n.regionDiscoveryMetadata.region_outcome="4",n.regionDiscoveryMetadata.region_used=o,vt.replaceWithRegionalInformation(e,o);n.regionDiscoveryMetadata.region_outcome="5"}return e})()}updateCloudDiscoveryMetadata(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.AuthorityUpdateCloudDiscoveryMetadata,n.correlationId);const r=n.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const o=yield b(n.getCloudDiscoveryMetadataFromNetwork.bind(n),g.AuthorityGetCloudDiscoveryMetadataFromNetwork,n.logger,n.performanceClient,n.correlationId)();if(o)return Uv(e,o,!0),"network";throw we(Ld)})()}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||w.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||w.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||w.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Uv(e,n,!1),"config";if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=function d3(t){return Vh(jv.metadata,t)}(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Uv(e,o,!1),"hardcoded_values";this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=VM(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),"cache"):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),vt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const n=Vh(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),we(gc)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),vt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var e=this;return v(function*(){e.performanceClient?.addQueueMeasurement(g.AuthorityGetCloudDiscoveryMetadataFromNetwork,e.correlationId);const n=`${w.AAD_INSTANCE_DISCOVERY_ENDPT}${e.canonicalAuthority}oauth2/v2.0/authorize`,r={};let o=null;try{const i=yield e.networkInterface.sendGetRequestAsync(n,r);let s,a;if(function L3(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}(i.body))s=i.body,a=s.metadata,e.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else{if(!function F3(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}(i.body))return e.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(e.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===w.INVALID_INSTANCE)return e.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),e.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}e.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=Vh(a,e.hostnameAndPort)}catch(i){return e.logger.error(i instanceof Ne?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${i.errorCode}\nError Description: ${i.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${i.name}\nError Description: ${i.message}`),null}return o||(e.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),e.logger.verbose("Creating custom Authority for custom domain scenario."),o=vt.createCloudDiscoveryMetadataFromHost(e.hostnameAndPort)),o})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&oe.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;return n&&"none"!==n.azureCloudInstance&&(r=`${n.azureCloudInstance}/${n.tenant?n.tenant:w.DEFAULT_COMMON_TENANT}/`),r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return w.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw S(_n)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return qM.has(e)}static isPublicCloudAuthority(e){return w.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const o=new oe(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${n}.${w.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=oe.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=vt.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=vt.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=vt.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const o=new oe(e).getUrlComponents();return 0===o.PathSegments.length&&o.HostNameAndPort.endsWith(w.CIAM_AUTH_URL)&&(n=`${n}${o.HostNameAndPort.split(".")[0]}${w.AAD_TENANT_DOMAIN_SUFFIX}`),n}}function iN(t){return t.endsWith(w.FORWARD_SLASH)?t:`${t}${w.FORWARD_SLASH}`}vt.reservedTenantDomains=new Set(["{tenant}","{tenantid}","common","consumers","organizations"]);const gs="no_tokens_found",zh="native_account_unavailable",Jv="refresh_token_expired",ms="bad_token",sN=["interaction_required","consent_required","login_required",ms],G3=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],qh={[gs]:"No refresh token found in the cache. Please sign-in.",[zh]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Jv]:"Refresh token has expired.",[ms]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class bn extends Ne{constructor(e,n,r,o,i,s,a,c){super(e,n,r),Object.setPrototypeOf(this,bn.prototype),this.timestamp=o||w.EMPTY_STRING,this.traceId=i||w.EMPTY_STRING,this.correlationId=s||w.EMPTY_STRING,this.claims=a||w.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function aN(t,e,n){const r=!!t&&sN.indexOf(t)>-1,o=!!n&&G3.indexOf(n)>-1,i=!!e&&sN.some(s=>e.indexOf(s)>-1);return r||i||o}function Zv(t){return new bn(t,qh[t])}class Rn{static setRequestState(e,n,r){const o=Rn.generateLibraryState(e,r);return n?`${o}${w.RESOURCE_DELIM}${n}`:o}static generateLibraryState(e,n){if(!e)throw S(Tc);const r={id:e.createNewGuid()};n&&(r.meta=n);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,n){if(!e)throw S(Tc);if(!n)throw S(Yr);try{const r=n.split(w.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(w.RESOURCE_DELIM):w.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||w.EMPTY_STRING,libraryState:a}}catch{throw S(Yr)}}}class z3{constructor(){if(!window.localStorage)throw Jy(dc)}getItem(e){return window.localStorage.getItem(e)}setItem(e,n){window.localStorage.setItem(e,n)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}class q3{constructor(){if(!window.sessionStorage)throw Jy(dc)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function cN(t,e){if(!e)return null;try{return Rn.parseRequestState(t,e).libraryState.meta}catch{throw S(Yr)}}class W3{getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===n)return c}return""}setItem(e,n,r,o=!0){let i=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=Lax;`;if(r){i+=`expires=${function Q3(t){return new Date((new Date).getTime()+864e5*t).toUTCString()}(r)};`}o&&(i+="Secure;"),document.cookie=i}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");n.push(o[0])}),n}containsKey(e){return this.getKeys().includes(e)}}class Xv extends fs{constructor(e,n,r,o,i,s){super(e,r,o,i),this.cacheConfig=n,this.logger=o,this.internalStorage=new Yv,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new W3,n.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){try{switch(e){case"localStorage":return new z3;case"sessionStorage":return new q3}}catch(n){this.logger.error(n)}return this.cacheConfig.cacheLocation="memoryStorage",new Yv}migrateCacheEntries(){const e=this.browserStorage.getItem("msal.version");e&&this.logger.info(`MSAL.js was last initialized with version ${e}`),e!==ps&&this.browserStorage.setItem("msal.version",ps);const r=`${w.CACHE_PREFIX}.${tt.CLIENT_INFO}`,o=`${w.CACHE_PREFIX}.${tt.ERROR}`,i=`${w.CACHE_PREFIX}.${tt.ERROR_DESC}`,u=[this.browserStorage.getItem(`${w.CACHE_PREFIX}.${tt.ID_TOKEN}`),this.browserStorage.getItem(r),this.browserStorage.getItem(o),this.browserStorage.getItem(i)];[tt.ID_TOKEN,tt.CLIENT_INFO,tt.ERROR,tt.ERROR_DESC].forEach((h,f)=>{const p=u[f];p&&this.setTemporaryCache(h,p,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.cryptoImpl.createNewGuid(),n=this.getItem("msal.account.keys"),r=this.getItem(`msal.token.keys.${this.clientId}`);n&&r?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(i=>{if(this.isCredentialKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);if(a&&a.hasOwnProperty("credentialType"))switch(a.credentialType){case q.ID_TOKEN:if(HM(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,q.ID_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${i}`);break;case q.ACCESS_TOKEN:case q.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(UM(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,q.ACCESS_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${i}`);break;case q.REFRESH_TOKEN:if(BM(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${i} found, saving key to token key map`);const l=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(l,q.REFRESH_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${i}`)}}}if(this.isAccountKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);a&&Xe.isAccountEntity(a)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${i} found, saving key to account key map`),this.addAccountKeyToMap(i,e))}}})}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&"object"==typeof n?n:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,n,r){let o=[];for(let s=0;s<=20;s++)try{this.browserStorage.setItem(e,n),s>0&&this.removeAccessTokenKeys(o.slice(0,s),r);break}catch(a){const c=WM(a);if(!(c.errorCode===Vv&&s<20))throw c;if(o.length||(o=e===`msal.token.keys.${this.clientId}`?JSON.parse(n).accessToken:this.getTokenKeys().accessToken),o.length<=s)throw c;this.removeAccessToken(o[s],r,!1)}}getAccount(e,n,r){this.logger.trace("BrowserCacheManager.getAccount called");const o=this.getCachedAccountEntity(e,n);return this.updateOutdatedCachedAccount(e,o,n,r)}getCachedAccountEntity(e,n){const r=this.getItem(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const o=this.validateAndParseJson(r);return o&&Xe.isAccountEntity(o)?fs.toObject(new Xe,o):null}setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey();e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addAccountKeyToMap(r,n)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem("msal.account.keys");return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();-1===r.indexOf(e)?(r.push(e),this.setItem("msal.account.keys",JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),0===r.length)return void this.removeItem("msal.account.keys");this.setItem("msal.account.keys",JSON.stringify(r),n),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){var r=()=>super.removeAccount,o=this;return v(function*(){r().call(o,e,n),o.removeAccountKeyFromMap(e,n)})()}removeOutdatedAccount(e,n){this.removeItem(e),this.removeAccountKeyFromMap(e,n)}removeIdToken(e,n){super.removeIdToken(e,n),this.removeTokenKey(e,q.ID_TOKEN,n)}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),this.performanceClient?.incrementFields({accessTokensRemoved:1},n),r&&this.removeTokenKey(e,q.ACCESS_TOKEN,n)}removeAccessTokenKeys(e,n){this.logger.trace("removeAccessTokenKey called");const r=this.getTokenKeys();let o=0;if(e.forEach(i=>{const s=r.accessToken.indexOf(i);s>-1&&(r.accessToken.splice(s,1),o++)}),o>0)return this.logger.info(`removed ${o} accessToken keys from tokenKeys map`),void this.setTokenKeys(r,n)}removeRefreshToken(e,n){super.removeRefreshToken(e,n),this.removeTokenKey(e,q.REFRESH_TOKEN,n)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`msal.token.keys.${this.clientId}`);if(e){const n=this.validateAndParseJson(e);if(n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}setTokenKeys(e,n){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(e),n):this.removeItem(`msal.token.keys.${this.clientId}`)}addTokenKey(e,n,r){this.logger.trace("BrowserCacheManager addTokenKey called");const o=this.getTokenKeys();switch(n){case q.ID_TOKEN:-1===o.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(e));break;case q.ACCESS_TOKEN:const i=o.accessToken.indexOf(e);-1!==i&&o.accessToken.splice(i,1),this.logger.trace(`access token ${-1===i?"added to":"updated in"} map`),o.accessToken.push(e);break;case q.REFRESH_TOKEN:-1===o.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${n}`),S(Sc)}this.setTokenKeys(o,r)}removeTokenKey(e,n,r,o=this.getTokenKeys()){switch(this.logger.trace("BrowserCacheManager removeTokenKey called"),n){case q.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const i=o.idToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case q.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const s=o.accessToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case q.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const a=o.refreshToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${n}`),S(Sc)}this.setTokenKeys(o,r)}getIdTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const o=this.validateAndParseJson(r);return o&&HM(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null)}setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=us(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,q.ID_TOKEN,n)}getAccessTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.ACCESS_TOKEN,n),null;const o=this.validateAndParseJson(r);return o&&UM(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=us(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,q.ACCESS_TOKEN,n)}getRefreshTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,q.REFRESH_TOKEN,n),null;const o=this.validateAndParseJson(r);return o&&BM(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=us(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,q.REFRESH_TOKEN,n)}getAppMetadata(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function c3(t,e){return!!e&&0===t.indexOf(qy)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")}(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function a3({environment:t,clientId:e}){return[qy,t,e].join(yt.CACHE_KEY_SEPARATOR).toLowerCase()}(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function o3(t,e){const n=0===t.indexOf(at.CACHE_KEY);let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function l3(t,e){return!!e&&0===t.indexOf("authority-metadata")&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem("wrapper.sku",e),this.internalStorage.setItem("wrapper.version",n)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||w.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||w.EMPTY_STRING]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(tt.ACTIVE_ACCOUNT_FILTERS),r=this.getItem(n);if(!r){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const i=this.generateCacheKey(tt.ACTIVE_ACCOUNT),s=this.getItem(i);if(!s)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const a=this.getAccountInfoFilteredBy({localAccountId:s},e);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(a,e),a):null}const o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(tt.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(tt.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Date.now().toString()};this.setItem(r,JSON.stringify(i),n),this.setItem(o,e.localAccountId,n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r),this.browserStorage.removeItem(o)}getThrottlingCache(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function s3(t,e){let n=!1;t&&(n=0===t.indexOf("throttling"));let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if("localStorage"===this.cacheConfig.cacheLocation){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,n,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){var n=this;return v(function*(){yield n.removeAllAccounts(e),n.removeAppMetadata(e),n.temporaryCacheStorage.getKeys().forEach(r=>{(-1!==r.indexOf(w.CACHE_PREFIX)||-1!==r.indexOf(n.clientId))&&n.removeTemporaryItem(r)}),n.browserStorage.getKeys().forEach(r=>{(-1!==r.indexOf(w.CACHE_PREFIX)||-1!==r.indexOf(n.clientId))&&n.browserStorage.removeItem(r)}),n.internalStorage.clear()})()}clearTokensAndKeysWithClaims(e,n){var r=this;return v(function*(){e.addQueueMeasurement(g.ClearTokensAndKeysWithClaims,n);const o=r.getTokenKeys();let i=0;o.accessToken.forEach(s=>{const a=r.getAccessTokenCredential(s,n);a?.requestedClaimsHash&&s.includes(a.requestedClaimsHash.toLowerCase())&&(r.removeAccessToken(s,n),i++)}),i>0&&r.logger.warning(`${i} access tokens with claims in the cache keys have been removed from the cache.`)})()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):ln.startsWith(e,w.CACHE_PREFIX)||ln.startsWith(e,tt.ADAL_ID_TOKEN)?e:`${w.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:n}}=Rn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`authority.${n}`)}generateNonceKey(e){const{libraryState:{id:n}}=Rn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`nonce.id_token.${n}`)}generateStateKey(e){const{libraryState:{id:n}}=Rn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`request.state.${n}`)}getCachedAuthority(e){const n=this.generateStateKey(e),r=this.getTemporaryCache(n);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,n,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,n,!1);const c=this.generateAuthorityKey(e);this.setTemporaryCache(c,r,!1),i?this.setTemporaryCache("ccs.credential",JSON.stringify({credential:i.homeAccountId,type:"home_account_id"}),!0):o&&this.setTemporaryCache("ccs.credential",JSON.stringify({credential:o,type:"UPN"}),!0)}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(n=>{-1!==n.indexOf(e)&&this.removeTemporaryItem(n)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.correlationId")),this.removeTemporaryItem(this.generateCacheKey("ccs.credential")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const n=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(n);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||w.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(n=>{if(-1===n.indexOf("request.state"))return;const r=this.temporaryCacheStorage.getItem(n);if(!r)return;const o=cN(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const n=Iv(JSON.stringify(e));this.setTemporaryCache("request.params",n,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache("request.params",!0);if(!n)throw P(yh);let r;try{r=JSON.parse(Jn(n))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),P(vh)}if(this.removeTemporaryItem(this.generateCacheKey("request.params")),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw P(Rc);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache("request.native",!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress();return e?n===this.clientId:!!n}getInteractionInProgress(){return this.getTemporaryCache(`${w.CACHE_PREFIX}.interaction.status`,!1)}setInteractionInProgress(e){const n=`${w.CACHE_PREFIX}.interaction.status`;if(e){if(this.getInteractionInProgress())throw P(lh);this.setTemporaryCache(n,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(n)}getLegacyLoginHint(){const e=this.getTemporaryCache(tt.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(tt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const n=this.getTemporaryCache(tt.ID_TOKEN,!0);n&&(this.browserStorage.removeItem(this.generateCacheKey(tt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=n||e;if(r){const o=ko(r,Jn);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,n,r){const o=us(n);if(e!==o){const i=this.getItem(e);if(i)return this.browserStorage.removeItem(e),this.setItem(o,i,r),this.logger.verbose(`Updated an outdated ${n.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${n.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,n){var r=this;return v(function*(){const o=Fh(e.account?.homeAccountId,e.account?.environment,e.idToken,r.clientId,e.tenantId);let i;n.claims&&(i=yield r.cryptoImpl.hashString(n.claims));const s=Uh(e.account?.homeAccountId,e.account.environment,e.accessToken,r.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Jn,void 0,e.tokenType,void 0,n.sshKid,n.claims,i);return r.saveCacheRecord({idToken:o,accessToken:s},e.correlationId)})()}saveCacheRecord(e,n,r){var o=()=>super.saveCacheRecord,i=this;return v(function*(){try{yield o().call(i,e,n,r)}catch(s){if(s instanceof hs&&i.performanceClient&&n)try{const a=i.getTokenKeys();i.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},n)}catch{}throw s}})()}}class o4{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Zr({})}addEventCallback(e,n,r){if(typeof window<"u"){const o=r||function HK(){return Qn()}();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(0===a.length||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}}class Xr extends Ne{constructor(e,n,r,o,i){super(e,n,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,Xr.prototype)}}class Zn{static generateThrottlingStorageKey(e){return`throttling.${JSON.stringify(e)}`}static preProcess(e,n,r){const o=Zn.generateThrottlingStorageKey(n),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void e.removeItem(o,r);throw new Xr(i.errorCodes?.join(" ")||w.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,n,r,o){if(Zn.checkResponseStatus(r)||Zn.checkResponseForRetryAfter(r)){const i={throttleTime:Zn.calculateThrottleTime(parseInt(r.headers["Retry-After"])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Zn.generateThrottlingStorageKey(n),i,o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty("Retry-After")&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(n||60),r+3600))}static removeThrottle(e,n,r,o){const s=this.generateThrottlingStorageKey({clientId:n,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid});e.removeItem(s,r.correlationId)}}const Po="client_id",lN="redirect_uri",uN="response_type",dN="token_type",hN="req_cnf",fN="return_spa_code",eC="brk_client_id",tC="brk_redirect_uri";class ys{static validateRedirectUri(e){if(!e)throw we(Dd)}static validatePrompt(e){const n=[];for(const r in nt)n.push(nt[r]);if(n.indexOf(e)<0)throw we(Nd)}static validateClaims(e){try{JSON.parse(e)}catch{throw we(fc)}}static validateCodeChallengeParams(e,n){if(!e||!n)throw we(pc);this.validateCodeChallengeMethod(n)}static validateCodeChallengeMethod(e){if([dM.PLAIN,dM.S256].indexOf(e)<0)throw we(Pd)}}class Pc{constructor(e,n){this.parameters=new Map,this.performanceClient=n,this.correlationId=e}addResponseTypeCode(){this.parameters.set(uN,encodeURIComponent(w.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(uN,encodeURIComponent(`${w.TOKEN_RESPONSE_TYPE} ${w.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||dK.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e,n=!0,r=es){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=n?[...e||[],...r]:e||[],i=new Ve(o);this.parameters.set("scope",encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(Po,encodeURIComponent(e))}addRedirectUri(e){ys.validateRedirectUri(e),this.parameters.set(lN,encodeURIComponent(e))}addPostLogoutRedirectUri(e){ys.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,n){const r=this.addClientCapabilitiesToClaims(e,n);ys.validateClaims(r),this.parameters.set("claims",encodeURIComponent(r))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){ys.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,n){if(ys.validateCodeChallengeParams(e,n),!e||!n)throw we(pc);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(n))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach(([n,r])=>{!this.parameters.has(n)&&r&&this.parameters.set(n,r)})}addClientCapabilitiesToClaims(e,n){let r;if(e)try{r=JSON.parse(e)}catch{throw we(fc)}else r={};return n&&n.length>0&&(r.hasOwnProperty("access_token")||(r.access_token={}),r.access_token.xms_cc={values:n}),JSON.stringify(r)}addUsername(e){this.parameters.set("username",encodeURIComponent(e))}addPassword(e){this.parameters.set("password",encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(dN,Ie.POP),this.parameters.set(hN,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(dN,Ie.SSH),this.parameters.set(hN,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability","retry-after, h429")}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const n={};n[eC]=e.brokerClientId,n[tC]=e.brokerRedirectUri,this.addExtraQueryParameters(n)}createQueryString(){const e=new Array;return this.parameters.forEach((n,r)=>{e.push(`${r}=${n}`)}),function V4(t,e,n){if(!e)return;const r=t.get(Po);r&&t.has(eC)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(lN)},e)}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}function pN(t,e,n,r,o,i,s){return nC.apply(this,arguments)}function nC(){return(nC=v(function*(t,e,n,r,o,i,s){s?.addQueueMeasurement(g.AuthorityFactoryCreateDiscoveredInstance,i);const a=vt.transformCIAMAuthority(iN(t)),c=new vt(a,e,n,r,o,i,s);try{return yield b(c.resolveEndpointsAsync.bind(c),g.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw S(_n)}})).apply(this,arguments)}class rC{constructor(e,n){this.config=function I3({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){const f={...f3,...n};return{authOptions:E3(t),systemOptions:{...QM,...e},loggerOptions:f,cacheOptions:{...p3,...r},storageInterface:o||new h3(t.clientId,Lh,new Zr(f)),networkInterface:i||g3,cryptoInterface:s||Lh,clientCredentials:a||y3,libraryInfo:{...m3,...c},telemetry:{...C3,...l},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}(e),this.logger=new Zr(this.config.loggerOptions,xM,xv),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n["Content-Type"]=w.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case"home_account_id":try{const r=ds(e.credential);n["X-AnchorMailbox"]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case"UPN":n["X-AnchorMailbox"]=`UPN: ${e.credential}`}return n}executePostToTokenEndpoint(e,n,r,o,i,s){var a=this;return v(function*(){s&&a.performanceClient?.addQueueMeasurement(s,i);const c=yield a.sendPostRequest(o,e,{body:n,headers:r},i);return a.config.serverTelemetryManager&&c.status<500&&429!==c.status&&a.config.serverTelemetryManager.clearTelemetryCache(),c})()}sendPostRequest(e,n,r,o){var i=this;return v(function*(){let s;Zn.preProcess(i.cacheManager,e,o);try{s=yield b(i.networkClient.sendPostRequestAsync.bind(i.networkClient),g.NetworkClientSendPostRequestAsync,i.logger,i.performanceClient,o)(n,r);const a=s.headers||{};i.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:a["x-ms-httpver"]||"",requestId:a["x-ms-request-id"]||""},o)}catch(a){if(a instanceof Gh){const c=a.responseHeaders;throw c&&i.performanceClient?.addFields({httpVerToken:c["x-ms-httpver"]||"",requestId:c["x-ms-request-id"]||"",contentTypeHeader:c["Content-Type"]||void 0,contentLengthHeader:c["Content-Length"]||void 0,httpStatus:a.httpStatus},o),a.error}throw a instanceof Ne?a:S($d)}return Zn.postProcess(i.cacheManager,e,s,o),s})()}updateAuthority(e,n){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(g.UpdateTokenEndpointAuthority,n);const o=`https://${e}/${r.authority.tenant}/`,i=yield pN(o,r.networkClient,r.cacheManager,r.authority.options,r.logger,n,r.performanceClient);r.authority=i})()}createTokenQueryParameters(e){const n=new Pc(e.correlationId,this.performanceClient);return e.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&n.addExtraQueryParameters(e.tokenQueryParameters),n.addCorrelationId(e.correlationId),n.createQueryString()}}class vs{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}generateCnf(e,n){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(g.PopTokenGenerateCnf,e.correlationId);const o=yield b(r.generateKid.bind(r),g.PopTokenGenerateCnf,n,r.performanceClient,e.correlationId)(e),i=r.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:i}})()}generateKid(e){var n=this;return v(function*(){return n.performanceClient?.addQueueMeasurement(g.PopTokenGenerateKid,e.correlationId),{kid:yield n.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}})()}signPopToken(e,n,r){var o=this;return v(function*(){return o.signPayload(e,n,r)})()}signPayload(e,n,r,o){var i=this;return v(function*(){const{resourceRequestMethod:s,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=r,h=(a?new oe(a):void 0)?.getUrlComponents();return i.cryptoUtils.signJwt({at:e,ts:Yn(),m:s?.toUpperCase(),u:h?.HostNameAndPort,nonce:l||i.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:c||void 0,...o},n,u,r.correlationId)})()}}class G4{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class xo{constructor(e,n,r,o,i,s,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,n){if(!e.state||!n)throw S(os,e.state?"Cached State":"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw S(Yr,e.state)}try{o=decodeURIComponent(n)}catch{throw S(Yr,e.state)}if(r!==o)throw S(qd);if(e.error||e.error_description||e.suberror){const i=function z4(t){const n=t.error_uri?.lastIndexOf("code=");return n&&n>=0?t.error_uri?.substring(n+5):void 0}(e);throw aN(e.error,e.error_description,e.suberror)?new bn(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new Xr(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,n){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||w.NOT_AVAILABLE} - Timestamp: ${e.timestamp||w.NOT_AVAILABLE} - Description: ${e.error_description||w.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||w.NOT_AVAILABLE} - Trace ID: ${e.trace_id||w.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new Xr(e.error,r,e.suberror,o,e.status);if(n&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(n&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);throw aN(e.error,e.error_description,e.suberror)?new bn(e.error,e.error_description,e.suberror,e.timestamp||w.EMPTY_STRING,e.trace_id||w.EMPTY_STRING,e.correlation_id||w.EMPTY_STRING,e.claims||w.EMPTY_STRING,o):i}}handleServerTokenResponse(e,n,r,o,i,s,a,c,l){var u=this;return v(function*(){let d,h;if(u.performanceClient?.addQueueMeasurement(g.HandleServerTokenResponse,e.correlation_id),e.id_token){if(d=ko(e.id_token||w.EMPTY_STRING,u.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw S(Kd);if(o.maxAge||0===o.maxAge){const m=d.auth_time;if(!m)throw S(vc);LM(m,o.maxAge)}}u.homeAccountIdentifier=Xe.generateHomeAccountId(e.client_info||w.EMPTY_STRING,n.authorityType,u.logger,u.cryptoObj,d),i&&i.state&&(h=Rn.parseRequestState(u.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const f=u.generateCacheRecord(e,n,r,o,d,s,i);let p;try{if(u.persistencePlugin&&u.serializableCache&&(u.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new G4(u.serializableCache,!0),yield u.persistencePlugin.beforeCacheAccess(p)),a&&!c&&f.account){const m=f.account.generateAccountKey();if(!u.cacheStorage.getAccount(m,o.correlationId,u.logger))return u.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield xo.generateAuthenticationResult(u.cryptoObj,n,f,!1,o,d,h,void 0,l)}yield u.cacheStorage.saveCacheRecord(f,o.correlationId,o.storeInCache)}finally{u.persistencePlugin&&u.serializableCache&&p&&(u.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield u.persistencePlugin.afterCacheAccess(p))}return xo.generateAuthenticationResult(u.cryptoObj,n,f,!1,o,d,h,e,l)})()}generateCacheRecord(e,n,r,o,i,s,a){const c=n.getPreferredCache();if(!c)throw S(Ec);const l=$M(i);let u,d;e.id_token&&i&&(u=Fh(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),d=oC(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let h=null;if(e.access_token){const m=e.scope?Ve.fromString(e.scope):new Ve(o.scopes||[]),y=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,C=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,I=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,D=r+y,F=D+C,Q=I&&I>0?r+I:void 0;h=Uh(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||n.tenant||"",m.printScopes(),D,F,this.cryptoObj.base64Decode,Q,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let f=null;if(e.refresh_token){let m;e.refresh_token_expires_in&&(m=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),f=FM(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,m)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:u,accessToken:h,refreshToken:f,appMetadata:p}}static generateAuthenticationResult(e,n,r,o,i,s,a,c,l){return v(function*(){let f,p,u=w.EMPTY_STRING,d=[],h=null,m=w.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==Ie.POP||i.popKid)u=r.accessToken.secret;else{const D=new vs(e),{secret:F,keyId:Q}=r.accessToken;if(!Q)throw S(_c);u=yield D.signPopToken(F,Q,i)}d=Ve.fromString(r.accessToken.target).asArray(),h=new Date(1e3*Number(r.accessToken.expiresOn)),f=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),r.accessToken.refreshOn&&(p=new Date(1e3*Number(r.accessToken.refreshOn)))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");const y=s?.oid||s?.sub||"",C=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const I=r.account?Bv(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:n.canonicalAuthority,uniqueId:y,tenantId:C,scopes:d,account:I,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:h,extExpiresOn:f,refreshOn:p,correlationId:i.correlationId,requestId:l||w.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||w.EMPTY_STRING,state:a?a.userRequestState:w.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||w.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||w.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})()}}function oC(t,e,n,r,o,i,s,a,c,l,u,d){d?.verbose("setCachedAccount called");const f=t.getAccountKeys().find(I=>I.startsWith(n));let p=null;f&&(p=t.getAccount(f,o,d));const m=p||Xe.createAccount({homeAccountId:n,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),y=m.tenantProfiles||[],C=c||m.realm;if(C&&!y.find(I=>I.tenantId===C)){const I=Hv(n,m.localAccountId,C,i);y.push(I)}return m.tenantProfiles=y,m}function gN(t,e,n){return iC.apply(this,arguments)}function iC(){return(iC=v(function*(t,e,n){return"string"==typeof t?t:t({clientId:e,tokenEndpoint:n})})).apply(this,arguments)}class mN extends rC{constructor(e,n){super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.GetAuthCodeUrl,e.correlationId);const r=yield b(n.createAuthCodeUrlQueryString.bind(n),g.AuthClientCreateQueryString,n.logger,n.performanceClient,e.correlationId)(e);return oe.appendQueryString(n.authority.authorizationEndpoint,r)})()}acquireToken(e,n){var r=this;return v(function*(){if(r.performanceClient?.addQueueMeasurement(g.AuthClientAcquireToken,e.correlationId),!e.code)throw S(Yd);const o=Yn(),i=yield b(r.executeTokenRequest.bind(r),g.AuthClientExecuteTokenRequest,r.logger,r.performanceClient,e.correlationId)(r.authority,e),s=i.headers?.["x-ms-request-id"],a=new xo(r.config.authOptions.clientId,r.cacheManager,r.cryptoUtils,r.logger,r.config.serializableCache,r.config.persistencePlugin,r.performanceClient);return a.validateTokenResponse(i.body),b(a.handleServerTokenResponse.bind(a),g.HandleServerTokenResponse,r.logger,r.performanceClient,e.correlationId)(i.body,r.authority,o,e,n,void 0,void 0,void 0,s)})()}handleFragmentResponse(e,n){if(new xo(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,n),!e.code)throw S(th);return e}getLogoutUri(e){if(!e)throw we(Od);const n=this.createLogoutUrlQueryString(e);return oe.appendQueryString(this.authority.endSessionEndpoint,n)}executeTokenRequest(e,n){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(g.AuthClientExecuteTokenRequest,n.correlationId);const o=r.createTokenQueryParameters(n),i=oe.appendQueryString(e.tokenEndpoint,o),s=yield b(r.createTokenRequestBody.bind(r),g.AuthClientCreateTokenRequestBody,r.logger,r.performanceClient,n.correlationId)(n);let a;if(n.clientInfo)try{const u=Bh(n.clientInfo,r.cryptoUtils.base64Decode);a={credential:`${u.uid}${yt.CLIENT_INFO_SEPARATOR}${u.utid}`,type:"home_account_id"}}catch(u){r.logger.verbose("Could not parse client info for CCS Header: "+u)}const c=r.createTokenRequestHeaders(a||n.ccsCredential),l={clientId:n.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return b(r.executePostToTokenEndpoint.bind(r),g.AuthorizationCodeClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,n.correlationId)(i,s,c,l,n.correlationId,g.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.AuthClientCreateTokenRequestBody,e.correlationId);const r=new Pc(e.correlationId,n.performanceClient);if(r.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Po]||n.config.authOptions.clientId),n.includeRedirectUri?r.addRedirectUri(e.redirectUri):ys.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,n.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(n.config.libraryInfo),r.addApplicationTelemetry(n.config.telemetry.application),r.addThrottling(),n.serverTelemetryManager&&!zv(n.config)&&r.addServerTelemetry(n.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),n.config.clientCredentials.clientSecret&&r.addClientSecret(n.config.clientCredentials.clientSecret),n.config.clientCredentials.clientAssertion){const i=n.config.clientCredentials.clientAssertion;r.addClientAssertion(yield gN(i.assertion,n.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(i.assertionType)}if(r.addGrantType("authorization_code"),r.addClientInfo(),e.authenticationScheme===Ie.POP){const i=new vs(n.cryptoUtils,n.performanceClient);let s;s=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield b(i.generateCnf.bind(i),g.PopTokenGenerateCnf,n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,r.addPopToken(s)}else if(e.authenticationScheme===Ie.SSH){if(!e.sshJwk)throw we(rs);r.addSshJwk(e.sshJwk)}let o;if((!ln.isEmptyObj(e.claims)||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,n.config.authOptions.clientCapabilities),e.clientInfo)try{const i=Bh(e.clientInfo,n.cryptoUtils.base64Decode);o={credential:`${i.uid}${yt.CLIENT_INFO_SEPARATOR}${i.utid}`,type:"home_account_id"}}catch(i){n.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(n.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case"home_account_id":try{const i=ds(o.credential);r.addCcsOid(i)}catch(i){n.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":r.addCcsUpn(o.credential)}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[fN])&&r.addExtraQueryParameters({[fN]:"1"}),r.createQueryString()})()}createAuthCodeUrlQueryString(e){var n=this;return v(function*(){const r=e.correlationId||n.config.cryptoInterface.createNewGuid();n.performanceClient?.addQueueMeasurement(g.AuthClientCreateQueryString,r);const o=new Pc(r,n.performanceClient);o.addClientId(e.embeddedClientId||e.extraQueryParameters?.[Po]||n.config.authOptions.clientId);const i=[...e.scopes||[],...e.extraScopesToConsent||[]];if(o.addScopes(i,!0,n.oidcDefaultScopes),o.addRedirectUri(e.redirectUri),o.addCorrelationId(r),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(n.config.libraryInfo),zv(n.config)||o.addApplicationTelemetry(n.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==nt.SELECT_ACCOUNT)if(e.sid&&e.prompt===nt.NONE)n.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const s=n.extractAccountSid(e.account);let a=n.extractLoginHint(e.account);if(a&&e.domainHint&&(n.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){n.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(a);try{const c=ds(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===nt.NONE){n.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(s);try{const c=ds(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){n.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const c=ds(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else n.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,n.config.authOptions.clientCapabilities),e.embeddedClientId&&o.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),n.addExtraQueryParams(e,o),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===Ie.POP)){const s=new vs(n.cryptoUtils);let a;a=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield b(s.generateCnf.bind(s),g.PopTokenGenerateCnf,n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,o.addPopToken(a)}return o.createQueryString()})()}createLogoutUrlQueryString(e){const n=new Pc(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&n.addCorrelationId(e.correlationId),e.idTokenHint&&n.addIdTokenHint(e.idTokenHint),e.state&&n.addState(e.state),e.logoutHint&&n.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,n),n.createQueryString()}addExtraQueryParams(e,n){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}class xc{constructor(e,n){this.cacheOutcome="0",this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||w.EMPTY_STRING,this.wrapperVer=e.wrapperVer||w.EMPTY_STRING,this.telemetryCacheKey=at.CACHE_KEY+yt.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${at.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&n.push(`broker_error=${r}`);const o=n.join(at.VALUE_SEPARATOR),s=[e,this.getRegionDiscoveryFields()].join(at.VALUE_SEPARATOR);return[at.SCHEMA_VERSION,s,o].join(at.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=xc.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(at.VALUE_SEPARATOR),o=e.errors.slice(0,n).join(at.VALUE_SEPARATOR),i=e.errors.length,a=[i,n<i?at.OVERFLOW_TRUE:at.OVERFLOW_FALSE].join(at.VALUE_SEPARATOR);return[at.SCHEMA_VERSION,e.cacheHits,r,o,a].join(at.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=at.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?n.errors.push(e instanceof Ne?e.subError?e.subError:e.errorCode?e.errorCode:e.toString():e.toString()):n.errors.push(at.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),n=xc.maxErrorsToSend(e);if(n===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(2*n),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,o=0;const i=e.errors.length;for(n=0;n<i;n++){const a=e.failedRequests[2*n+1]||w.EMPTY_STRING,c=e.errors[n]||w.EMPTY_STRING;if(o+=(e.failedRequests[2*n]||w.EMPTY_STRING).toString().length+a.toString().length+c.length+3,!(o<at.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||w.EMPTY_STRING),e.push(this.regionSource||w.EMPTY_STRING),e.push(this.regionOutcome||w.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function q4(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=t,s=new Map([[0,[n,r]],[2,[o,i]]]);let a=[];if(e?.length){if(a=e.split(","),a.length<4)return e}else a=Array.from({length:4},()=>"|");return s.forEach((c,l)=>{2===c.length&&c[0]?.length&&c[1]?.length&&function K4(t){const{skuArr:e,index:n,skuName:r,skuVersion:o}=t;n>=e.length||(e[n]=[r,o].join("|"))}({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(",")}(e)}}class CN{constructor(e,n,r,o,i,s,a,c,l){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=l||Qn(),this.logger=o.clone(Xt.MSAL_SKU,ps,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){var n=this;return v(function*(){if(e){Xe.accountInfoIsEqual(e,n.browserStorage.getActiveAccount(n.correlationId),!1)&&(n.logger.verbose("Setting active account to null"),n.browserStorage.setActiveAccount(null,n.correlationId));try{yield n.browserStorage.removeAccount(Xe.generateAccountCacheKey(e),n.correlationId),n.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{n.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{n.logger.verbose("No account provided in logout request, clearing all cache items.",n.correlationId),yield n.browserStorage.clear(n.correlationId),yield n.browserCrypto.clearKeystore()}catch{n.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(e){return this.logger.verbose("getRedirectUri called"),oe.getAbsoluteUrl(e||this.config.auth.redirectUri,Er())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new xc(r,this.browserStorage)}getDiscoveredAuthority(e){var n=this;return v(function*(){const{account:r}=e,o=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;n.performanceClient.addQueueMeasurement(g.StandardInteractionClientGetDiscoveredAuthority,n.correlationId);const i={protocolMode:n.config.auth.protocolMode,OIDCOptions:n.config.auth.OIDCOptions,knownAuthorities:n.config.auth.knownAuthorities,cloudDiscoveryMetadata:n.config.auth.cloudDiscoveryMetadata,authorityMetadata:n.config.auth.authorityMetadata,skipAuthorityMetadataCache:n.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||n.config.auth.authority,c=r&&(o?.length?"true"===o:n.config.auth.instanceAware)?n.config.auth.authority.replace(oe.getDomainFromUrl(s),r.environment):s,l=vt.generateAuthority(c,e.requestAzureCloudOptions||n.config.auth.azureCloudOptions),u=yield b(pN,g.AuthorityFactoryCreateDiscoveredInstance,n.logger,n.performanceClient,n.correlationId)(l,n.config.system.networkClient,n.browserStorage,i,n.logger,n.correlationId,n.performanceClient);if(r&&!u.isAlias(r.environment))throw we(Bd);return u})()}}const W4=32;function Q4(t,e,n){return sC.apply(this,arguments)}function sC(){return(sC=v(function*(t,e,n){t.addQueueMeasurement(g.GeneratePkceCodes,n);const r=Oo(Y4,g.GenerateCodeVerifier,e,t,n)(t,e,n);return{verifier:r,challenge:yield b(J4,g.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n)}})).apply(this,arguments)}function Y4(t,e,n){try{const r=new Uint8Array(W4);return Oo(bK,g.GetRandomValues,e,t,n)(r),Oh(r)}catch{throw P(Ac)}}function J4(t,e,n,r){return aC.apply(this,arguments)}function aC(){return(aC=v(function*(t,e,n,r){e.addQueueMeasurement(g.GenerateCodeChallengeFromVerifier,r);try{const o=yield b(AM,g.Sha256Digest,n,e,r)(t,e,r);return Oh(new Uint8Array(o))}catch{throw P(Ac)}})).apply(this,arguments)}function cC(t,e,n,r){return lC.apply(this,arguments)}function lC(){return(lC=v(function*(t,e,n,r){n.addQueueMeasurement(g.InitializeBaseRequest,t.correlationId);const o=t.authority||e.auth.authority,i=[...t&&t.scopes||[]],s={...t,correlationId:t.correlationId,authority:o,scopes:i};if(s.authenticationScheme){if(s.authenticationScheme===Ie.SSH){if(!t.sshJwk)throw we(rs);if(!t.sshKid)throw we(Fd)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=Ie.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return e.cache.claimsBasedCachingEnabled&&t.claims&&!ln.isEmptyObj(t.claims)&&(s.requestedClaimsHash=yield DM(t.claims)),s})).apply(this,arguments)}function Z4(t,e,n,r,o){return uC.apply(this,arguments)}function uC(){return(uC=v(function*(t,e,n,r,o){r.addQueueMeasurement(g.InitializeSilentRequest,t.correlationId);const i=yield b(cC,g.InitializeBaseRequest,o,r,t.correlationId)(t,n,r,o);return{...t,...i,account:e,forceRefresh:t.forceRefresh||!1}})).apply(this,arguments)}class Cs extends CN{initializeAuthorizationCodeRequest(e){var n=this;return v(function*(){n.performanceClient.addQueueMeasurement(g.StandardInteractionClientInitializeAuthorizationCodeRequest,n.correlationId);const r=yield b(Q4,g.GeneratePkceCodes,n.logger,n.performanceClient,n.correlationId)(n.performanceClient,n.logger,n.correlationId),o={...e,redirectUri:e.redirectUri,code:w.EMPTY_STRING,codeVerifier:r.verifier};return e.codeChallenge=r.challenge,e.codeChallengeMethod=w.S256_CODE_CHALLENGE_METHOD,o})()}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const n={correlationId:this.correlationId||Qn(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=oe.getAbsoluteUrl(e.postLogoutRedirectUri,Er())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=oe.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Er())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=oe.getAbsoluteUrl(Er(),Er())),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){var n=this;return v(function*(){n.performanceClient.addQueueMeasurement(g.StandardInteractionClientCreateAuthCodeClient,n.correlationId);const r=yield b(n.getClientConfiguration.bind(n),g.StandardInteractionClientGetClientConfiguration,n.logger,n.performanceClient,n.correlationId)(e);return new mN(r,n.performanceClient)})()}getClientConfiguration(e){var n=this;return v(function*(){const{serverTelemetryManager:r,requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}=e;n.performanceClient.addQueueMeasurement(g.StandardInteractionClientGetClientConfiguration,n.correlationId);const c=yield b(n.getDiscoveredAuthority.bind(n),g.StandardInteractionClientGetDiscoveredAuthority,n.logger,n.performanceClient,n.correlationId)({requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}),l=n.config.system.loggerOptions;return{authOptions:{clientId:n.config.auth.clientId,authority:c,clientCapabilities:n.config.auth.clientCapabilities,redirectUri:n.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:n.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:n.correlationId},cacheOptions:{claimsBasedCachingEnabled:n.config.cache.claimsBasedCachingEnabled},cryptoInterface:n.browserCrypto,networkInterface:n.networkClient,storageInterface:n.browserStorage,serverTelemetryManager:r,libraryInfo:{sku:Xt.MSAL_SKU,version:ps,cpu:w.EMPTY_STRING,os:w.EMPTY_STRING},telemetry:n.config.telemetry}})()}initializeAuthorizationRequest(e,n){var r=this;return v(function*(){r.performanceClient.addQueueMeasurement(g.StandardInteractionClientInitializeAuthorizationRequest,r.correlationId);const o=r.getRedirectUri(e.redirectUri),s=Rn.setRequestState(r.browserCrypto,e&&e.state||w.EMPTY_STRING,{interactionType:n}),c={...yield b(cC,g.InitializeBaseRequest,r.logger,r.performanceClient,r.correlationId)({...e,correlationId:r.correlationId},r.config,r.performanceClient,r.logger),redirectUri:o,state:s,nonce:e.nonce||Qn(),responseMode:r.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return c;const l=e.account||r.browserStorage.getActiveAccount(r.correlationId);if(l&&(r.logger.verbose("Setting validated request account",r.correlationId),r.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,r.correlationId),c.account=l),!c.loginHint&&!l){const u=r.browserStorage.getLegacyLoginHint();u&&(c.loginHint=u)}return c})()}}const IN="user_switch",aW={[IN]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Xn extends Ne{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,Xn.prototype),this.name="NativeAuthError",this.ext=r}}function Is(t){return!!(t.ext&&t.ext.status&&("PERSISTENT_ERROR"===t.ext.status||"DISABLED"===t.ext.status)||t.ext&&t.ext.error&&-2147186943===t.ext.error)||"ContentError"===t.errorCode}function dC(t,e,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return Zv(zh);case"USER_INTERACTION_REQUIRED":return new bn(t,e);case"USER_CANCEL":return P(Cr);case"NO_NETWORK":return P(cs)}return new Xn(t,aW[t]||e,n)}class hC extends rC{constructor(e,n){super(e,n)}acquireToken(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.RefreshTokenClientAcquireToken,e.correlationId);const r=Yn(),o=yield b(n.executeTokenRequest.bind(n),g.RefreshTokenClientExecuteTokenRequest,n.logger,n.performanceClient,e.correlationId)(e,n.authority),i=o.headers?.["x-ms-request-id"],s=new xo(n.config.authOptions.clientId,n.cacheManager,n.cryptoUtils,n.logger,n.config.serializableCache,n.config.persistencePlugin);return s.validateTokenResponse(o.body),b(s.handleServerTokenResponse.bind(s),g.HandleServerTokenResponse,n.logger,n.performanceClient,e.correlationId)(o.body,n.authority,r,e,void 0,void 0,!0,e.forceCache,i)})()}acquireTokenByRefreshToken(e){var n=this;return v(function*(){if(!e)throw we(kd);if(n.performanceClient?.addQueueMeasurement(g.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw S(Ic);if(n.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield b(n.acquireTokenWithCachedRefreshToken.bind(n),g.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.logger,n.performanceClient,e.correlationId)(e,!0)}catch(o){if(o instanceof bn&&o.errorCode===gs||o instanceof Xr&&"invalid_grant"===o.errorCode&&"client_mismatch"===o.subError)return b(n.acquireTokenWithCachedRefreshToken.bind(n),g.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.logger,n.performanceClient,e.correlationId)(e,!1);throw o}return b(n.acquireTokenWithCachedRefreshToken.bind(n),g.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.logger,n.performanceClient,e.correlationId)(e,!1)})()}acquireTokenWithCachedRefreshToken(e,n){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(g.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const o=Oo(r.cacheManager.getRefreshToken.bind(r.cacheManager),g.CacheManagerGetRefreshToken,r.logger,r.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,r.performanceClient);if(!o)throw Zv(gs);if(o.expiresOn&&Lv(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw Zv(Jv);const i={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||Ie.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:"home_account_id"}};try{return yield b(r.acquireToken.bind(r),g.RefreshTokenClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof bn&&s.subError===ms){r.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=us(o);r.cacheManager.removeRefreshToken(a,e.correlationId)}throw s}})()}executeTokenRequest(e,n){var r=this;return v(function*(){r.performanceClient?.addQueueMeasurement(g.RefreshTokenClientExecuteTokenRequest,e.correlationId);const o=r.createTokenQueryParameters(e),i=oe.appendQueryString(n.tokenEndpoint,o),s=yield b(r.createTokenRequestBody.bind(r),g.RefreshTokenClientCreateTokenRequestBody,r.logger,r.performanceClient,e.correlationId)(e),a=r.createTokenRequestHeaders(e.ccsCredential),c={clientId:e.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return b(r.executePostToTokenEndpoint.bind(r),g.RefreshTokenClientExecutePostToTokenEndpoint,r.logger,r.performanceClient,e.correlationId)(i,s,a,c,e.correlationId,g.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const o=new Pc(e.correlationId,n.performanceClient);if(o.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Po]||n.config.authOptions.clientId),e.redirectUri&&o.addRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,n.config.authOptions.authority.options.OIDCOptions?.defaultScopes),o.addGrantType("refresh_token"),o.addClientInfo(),o.addLibraryInfo(n.config.libraryInfo),o.addApplicationTelemetry(n.config.telemetry.application),o.addThrottling(),n.serverTelemetryManager&&!zv(n.config)&&o.addServerTelemetry(n.serverTelemetryManager),o.addRefreshToken(e.refreshToken),n.config.clientCredentials.clientSecret&&o.addClientSecret(n.config.clientCredentials.clientSecret),n.config.clientCredentials.clientAssertion){const i=n.config.clientCredentials.clientAssertion;o.addClientAssertion(yield gN(i.assertion,n.config.authOptions.clientId,e.resourceRequestUri)),o.addClientAssertionType(i.assertionType)}if(e.authenticationScheme===Ie.POP){const i=new vs(n.cryptoUtils,n.performanceClient);let s;s=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield b(i.generateCnf.bind(i),g.PopTokenGenerateCnf,n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,o.addPopToken(s)}else if(e.authenticationScheme===Ie.SSH){if(!e.sshJwk)throw we(rs);o.addSshJwk(e.sshJwk)}if((!ln.isEmptyObj(e.claims)||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,n.config.authOptions.clientCapabilities),n.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case"home_account_id":try{const i=ds(e.ccsCredential.credential);o.addCcsOid(i)}catch(i){n.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":o.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&o.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),o.createQueryString()})()}}class lW extends rC{constructor(e,n){super(e,n)}acquireToken(e){var n=this;return v(function*(){try{const[r,o]=yield n.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...es]});return"4"===o&&(n.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new hC(n.config,n.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof rh&&r.errorCode===An)return new hC(n.config,n.performanceClient).acquireTokenByRefreshToken(e);throw r}})()}acquireCachedToken(e){var n=this;return v(function*(){n.performanceClient?.addQueueMeasurement(g.SilentFlowClientAcquireCachedToken,e.correlationId);let r="0";if(e.forceRefresh||!n.config.cacheOptions.claimsBasedCachingEnabled&&!ln.isEmptyObj(e.claims))throw n.setCacheOutcome("1",e.correlationId),S(An);if(!e.account)throw S(Ic);const o=e.account.tenantId||function H3(t){const r=new oe(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case"common":case"organizations":case"consumers":return;default:return r}}(e.authority),i=n.cacheManager.getTokenKeys(),s=n.cacheManager.getAccessToken(e.account,e,i,o,n.performanceClient);if(!s)throw n.setCacheOutcome("2",e.correlationId),S(An);if(function ZK(t){return Number(t)>Yn()}(s.cachedAt)||Lv(s.expiresOn,n.config.systemOptions.tokenRenewalOffsetSeconds))throw n.setCacheOutcome("3",e.correlationId),S(An);s.refreshOn&&Lv(s.refreshOn,0)&&(r="4");const a=e.authority||n.authority.getPreferredCache(),c={account:n.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:s,idToken:n.cacheManager.getIdToken(e.account,e.correlationId,i,o,n.performanceClient),refreshToken:null,appMetadata:n.cacheManager.readAppMetadataFromCache(a)};return n.setCacheOutcome(r,e.correlationId),n.config.serverTelemetryManager&&n.config.serverTelemetryManager.incrementCacheHits(),[yield b(n.generateResultFromCacheRecord.bind(n),g.SilentFlowClientGenerateResultFromCacheRecord,n.logger,n.performanceClient,e.correlationId)(c,e),r]})()}setCacheOutcome(e,n){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},n),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,n){var r=this;return v(function*(){let o;if(r.performanceClient?.addQueueMeasurement(g.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId),e.idToken&&(o=ko(e.idToken.secret,r.config.cryptoInterface.base64Decode)),n.maxAge||0===n.maxAge){const i=o?.auth_time;if(!i)throw S(vc);LM(i,n.maxAge)}return xo.generateAuthenticationResult(r.cryptoUtils,r.authority,e,!0,n,o)})()}}class EN extends Cs{acquireToken(e){var n=this;return v(function*(){n.performanceClient.addQueueMeasurement(g.SilentCacheClientAcquireToken,e.correlationId);const r=n.initializeServerTelemetryManager(61),o=yield b(n.getClientConfiguration.bind(n),g.StandardInteractionClientGetClientConfiguration,n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new lW(o,n.performanceClient);n.logger.verbose("Silent auth client created");try{const a=(yield b(i.acquireCachedToken.bind(i),g.SilentFlowClientAcquireCachedToken,n.logger,n.performanceClient,e.correlationId)(e))[0];return n.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof Oc&&s.errorCode===Nc&&n.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})()}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n?.account)}}class Es extends CN{constructor(e,n,r,o,i,s,a,c,l,u,d,h){super(e,n,r,o,i,s,c,l,h),this.apiId=a,this.accountId=u,this.nativeMessageHandler=l,this.nativeStorageManager=d,this.silentCacheClient=new EN(e,this.nativeStorageManager,r,o,i,s,c,l,h),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const f="ppnbnpeolgkicgegkbkbjmhlideopiji"===this.nativeMessageHandler.getExtensionId()?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=xc.makeExtraSkuString({libraryName:Xt.MSAL_SKU,libraryVersion:ps,extensionName:f,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,"x-client-xtra-sku":this.skus}}acquireToken(e){var n=this;return v(function*(){n.performanceClient.addQueueMeasurement(g.NativeInteractionClientAcquireToken,e.correlationId),n.logger.trace("NativeInteractionClient - acquireToken called.");const r=n.performanceClient.startMeasurement(g.NativeInteractionClientAcquireToken,e.correlationId),o=Yn();try{const i=yield n.initializeNativeRequest(e);try{const u=yield n.acquireTokensFromCache(n.accountId,i);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{n.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...s}=i,a={method:"GetToken",request:s},c=yield n.nativeMessageHandler.sendMessage(a),l=n.validateNativeResponse(c);return yield n.handleNativeResponse(l,i,o).then(u=>(r.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),n.serverTelemetryManager.clearNativeBrokerErrorCode(),u)).catch(u=>{throw r.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}catch(i){throw i instanceof Xn&&n.serverTelemetryManager.setNativeBrokerErrorCode(i.errorCode),i}})()}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:Ve.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}acquireTokensFromCache(e,n){var r=this;return v(function*(){if(!e)throw r.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),S(wc);const o=r.browserStorage.getBaseAccountInfo({nativeAccountId:e},n.correlationId);if(!o)throw S(wc);try{const i=r.createSilentCacheRequest(n,o),s=yield r.silentCacheClient.acquireToken(i),a={...o,idTokenClaims:s?.idTokenClaims,idToken:s?.idToken};return{...s,account:a}}catch(i){throw i}})()}acquireTokenRedirect(e,n){var r=this;return v(function*(){r.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...o}=e;delete o.onRedirectNavigate;const i=yield r.initializeNativeRequest(o),s={method:"GetToken",request:i};try{const l=yield r.nativeMessageHandler.sendMessage(s);r.validateNativeResponse(l)}catch(l){if(l instanceof Xn&&(r.serverTelemetryManager.setNativeBrokerErrorCode(l.errorCode),Is(l)))throw l}r.browserStorage.setTemporaryCache("request.native",JSON.stringify(i),!0);const a={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},c=r.config.auth.navigateToLoginRequestUrl?window.location.href:r.getRedirectUri(e.redirectUri);n.end({success:!0}),yield r.navigationClient.navigateExternal(c,a)})()}handleRedirectPromise(e,n){var r=this;return v(function*(){if(r.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const o=r.browserStorage.getCachedNativeRequest();if(!o)return r.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&e?.addFields({errorCode:"no_cached_request"},n),null;const{prompt:i,...s}=o;i&&r.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),r.browserStorage.removeItem(r.browserStorage.generateCacheKey("request.native"));const a={method:"GetToken",request:s},c=Yn();try{r.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const l=yield r.nativeMessageHandler.sendMessage(a);r.validateNativeResponse(l);const u=r.handleNativeResponse(l,s,c);r.browserStorage.setInteractionInProgress(!1);const d=yield u;return r.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(l){throw r.browserStorage.setInteractionInProgress(!1),l}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,n,r){var o=this;return v(function*(){o.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=ko(e.id_token,Jn),s=o.createHomeAccountIdentifier(e,i),a=o.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},o.correlationId)?.homeAccountId;if(s!==a&&e.account.id!==n.accountId)throw dC(IN);const c=yield o.getDiscoveredAuthority({requestAuthority:n.authority}),l=oC(o.browserStorage,c,s,Jn,o.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,o.logger),u=yield o.generateAuthenticationResult(e,n,i,l,c.canonicalAuthority,r);return o.cacheAccount(l),o.cacheNativeTokens(e,n,s,i,e.access_token,u.tenantId,r),u})()}createHomeAccountIdentifier(e,n){return Xe.generateHomeAccountId(e.client_info||w.EMPTY_STRING,0,this.logger,this.browserCrypto,n)}generateScopes(e,n){return Ve.fromString(e.scope?e.scope:n.scope)}generatePopAccessToken(e,n){var r=this;return v(function*(){if(n.tokenType===Ie.POP&&n.signPopToken){if(e.shr)return r.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new vs(r.browserCrypto),i={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw S(_c);return o.signPopToken(e.access_token,n.keyId,i)}return e.access_token})()}generateAuthenticationResult(e,n,r,o,i,s){var a=this;return v(function*(){const c=a.addTelemetryFromNativeResponse(e),l=Ve.fromString(e.scope?e.scope:n.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||w.EMPTY_STRING,h=u.TenantId||r.tid||w.EMPTY_STRING,f=Bv(o.getAccountInfo(),void 0,r,e.id_token);f.nativeAccountId!==e.account.id&&(f.nativeAccountId=e.account.id);const p=yield a.generatePopAccessToken(e,n),m=n.tokenType===Ie.POP?Ie.POP:Ie.BEARER;return{authority:i,uniqueId:d,tenantId:h,scopes:l.asArray(),account:f,idToken:e.id_token,idTokenClaims:r,accessToken:p,fromCache:!!c&&a.isResponseFromCache(c),expiresOn:new Date(1e3*Number(s+e.expires_in)),tokenType:m,correlationId:a.correlationId,state:e.state,fromNativeBroker:!0}})()}cacheAccount(e){this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,this.correlationId).catch(n=>{this.logger.error(`Error occurred while removing account context from browser storage. ${n}`)})}cacheNativeTokens(e,n,r,o,i,s,a){const c=Fh(r,n.authority,e.id_token||"",n.clientId,o.tid||""),u=a+(n.tokenType===Ie.POP?w.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),d=this.generateScopes(e,n),h=Uh(r,n.authority,i,n.clientId,o.tid||s,d.printScopes(),u,0,Jn,void 0,n.tokenType,void 0,n.keyId);this.nativeStorageManager.saveCacheRecord({idToken:c,accessToken:h},n.correlationId,n.storeInCache)}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw vM(uc,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){var n=this;return v(function*(){n.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=e.authority||n.config.auth.authority;e.account&&(yield n.getDiscoveredAuthority({requestAuthority:r,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));const o=new oe(r);o.validateAsUri();const{scopes:i,...s}=e,a=new Ve(i||[]);a.appendScopes(es);const l={...s,accountId:n.accountId,clientId:n.config.auth.clientId,authority:o.urlString,scope:a.printScopes(),redirectUri:n.getRedirectUri(e.redirectUri),prompt:(()=>{switch(n.apiId){case 863:case 61:return n.logger.trace("initializeNativeRequest: silent request sets prompt to none"),nt.NONE}if(e.prompt)switch(e.prompt){case nt.NONE:case nt.CONSENT:case nt.LOGIN:return n.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw n.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),P(Rh)}else n.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:n.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(l.signPopToken&&e.popKid)throw P(Nh);if(n.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry="MATS",e.authenticationScheme===Ie.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new vs(n.browserCrypto);let h;if(l.keyId)h=n.browserCrypto.base64UrlEncode(JSON.stringify({kid:l.keyId})),l.signPopToken=!1;else{const f=yield b(d.generateCnf.bind(d),g.PopTokenGenerateCnf,n.logger,n.performanceClient,e.correlationId)(u,n.logger);h=f.reqCnfString,l.keyId=f.kid,l.signPopToken=!0}l.reqCnf=h}return n.addRequestSKUs(l),l})()}handleExtraBrokerParams(e){const n=e.extraParameters&&e.extraParameters.hasOwnProperty(eC)&&e.extraParameters.hasOwnProperty(tC)&&e.extraParameters.hasOwnProperty(Po);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[tC],r=e.extraParameters[Po]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}class er{constructor(e,n,r,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(g.NativeMessageHandlerHandshake)}sendMessage(e){var n=this;return v(function*(){n.logger.trace("NativeMessageHandler - sendMessage called.");const r={channel:ns_CHANNEL_ID,extensionId:n.extensionId,responseId:Qn(),body:e};return n.logger.trace("NativeMessageHandler - Sending request to browser extension"),n.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(r)}`),n.messageChannel.port1.postMessage(r),new Promise((o,i)=>{n.resolvers.set(r.responseId,{resolve:o,reject:i})})})()}static createProvider(e,n,r){return v(function*(){e.trace("NativeMessageHandler - createProvider called.");try{const o=new er(e,n,r,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield o.sendHandshakeRequest(),o}catch{const i=new er(e,n,r);return yield i.sendHandshakeRequest(),i}})()}sendHandshakeRequest(){var e=this;return v(function*(){e.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",e.windowListener,!1);const n={channel:ns_CHANNEL_ID,extensionId:e.extensionId,responseId:Qn(),body:{method:"Handshake"}};return e.handshakeEvent.add({extensionId:e.extensionId,extensionHandshakeTimeoutMs:e.handshakeTimeoutMs}),e.messageChannel.port1.onmessage=r=>{e.onChannelMessage(r)},window.postMessage(n,window.origin,[e.messageChannel.port2]),new Promise((r,o)=>{e.handshakeResolvers.set(n.responseId,{resolve:r,reject:o}),e.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(P(Ah)),e.handshakeResolvers.delete(n.responseId)},e.handshakeTimeoutMs)})})()}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const n=e.data;if(n.channel&&n.channel===ns_CHANNEL_ID&&(!n.extensionId||n.extensionId===this.extensionId)&&"Handshake"===n.body.method){const r=this.handshakeResolvers.get(n.responseId);if(!r)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${n.responseId}`);this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(P(Dh))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if("Response"===i){if(!r)return;const s=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),"Success"!==s.status)r.reject(dC(s.code,s.description,s.ext));else{if(!s.result)throw vM(uc,"Event does not contain result.");s.result.code&&s.result.description?r.reject(dC(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result)}this.resolvers.delete(n.responseId)}else if("HandshakeResponse"===i){if(!o)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${n.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,n,r,o){if(n.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Ie.BEARER:case Ie.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class fC{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,n){var r=this;return v(function*(){let o;r.performanceClient.addQueueMeasurement(g.HandleCodeResponse,n.correlationId);try{o=r.authModule.handleFragmentResponse(e,n.state)}catch(i){throw i instanceof Xr&&i.subError===Cr?P(Cr):i}return b(r.handleCodeResponseFromServer.bind(r),g.HandleCodeResponseFromServer,r.logger,r.performanceClient,n.correlationId)(o,n)})()}handleCodeResponseFromServer(e,n){var r=this;return v(function*(o,i,s=!0){if(r.performanceClient.addQueueMeasurement(g.HandleCodeResponseFromServer,i.correlationId),r.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),r.authCodeRequest.code=o.code,o.cloud_instance_host_name&&(yield b(r.authModule.updateAuthority.bind(r.authModule),g.UpdateTokenEndpointAuthority,r.logger,r.performanceClient,i.correlationId)(o.cloud_instance_host_name,i.correlationId)),s&&(o.nonce=i.nonce||void 0),o.state=i.state,o.client_info)r.authCodeRequest.clientInfo=o.client_info;else{const c=r.createCcsCredentials(i);c&&(r.authCodeRequest.ccsCredential=c)}return yield b(r.authModule.acquireToken.bind(r.authModule),g.AuthClientAcquireToken,r.logger,r.performanceClient,i.correlationId)(r.authCodeRequest,o)}).apply(this,arguments)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:"home_account_id"}:e.loginHint?{credential:e.loginHint,type:"UPN"}:null}}function wN(t,e,n){const r=oh(t);if(!r)throw CM(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),P(sh)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),P(ih));return r}class dW extends Cs{constructor(e,n,r,o,i,s,a,c,l,u){super(e,n,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||es,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}acquireTokenPopupAsync(e,n){var r=this;return v(function*(){r.logger.verbose("acquireTokenPopupAsync called");const o=r.initializeServerTelemetryManager(862),i=yield b(r.initializeAuthorizationRequest.bind(r),g.StandardInteractionClientInitializeAuthorizationRequest,r.logger,r.performanceClient,r.correlationId)(e,O.Popup);NM(i.authority);try{const s=yield b(r.initializeAuthorizationCodeRequest.bind(r),g.StandardInteractionClientInitializeAuthorizationCodeRequest,r.logger,r.performanceClient,r.correlationId)(i),a=yield b(r.createAuthCodeClient.bind(r),g.StandardInteractionClientCreateAuthCodeClient,r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:o,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),c=er.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,e.authenticationScheme);let l;c&&(l=r.performanceClient.startMeasurement(g.FetchAccountIdWithNativeBroker,e.correlationId));const u=yield a.getAuthCodeUrl({...i,nativeBroker:c}),d=new fC(a,r.browserStorage,s,r.logger,r.performanceClient),h=r.initiateAuthRequest(u,n);r.eventHandler.emitEvent("msal:popupOpened",O.Popup,{popupWindow:h},null);const f=yield r.monitorPopupForHash(h,n.popupWindowParent),p=Oo(wN,g.DeserializeResponse,r.logger,r.performanceClient,r.correlationId)(f,r.config.auth.OIDCOptions.serverResponseType,r.logger);if(Zn.removeThrottle(r.browserStorage,r.config.auth.clientId,s),p.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),l&&l.end({success:!0,isNativeBroker:!0}),!r.nativeMessageHandler)throw P(Mo);const y=new Es(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,p.accountId,r.nativeStorage,i.correlationId),{userRequestState:C}=Rn.parseRequestState(r.browserCrypto,i.state);return yield y.acquireToken({...i,state:C,prompt:void 0})}return yield d.handleCodeResponse(p,i)}catch(s){throw n.popup?.close(),s instanceof Ne&&(s.setCorrelationId(r.correlationId),o.cacheFailedRequest(s)),s}})()}logoutPopupAsync(e,n,r,o){var i=this;return v(function*(){i.logger.verbose("logoutPopupAsync called"),i.eventHandler.emitEvent("msal:logoutStart",O.Popup,e);const s=i.initializeServerTelemetryManager(962);try{yield i.clearCacheOnLogout(e.account);const c=(yield b(i.createAuthCodeClient.bind(i),g.StandardInteractionClientCreateAuthCodeClient,i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0})).getLogoutUri(e);i.eventHandler.emitEvent("msal:logoutSuccess",O.Popup,e);const l=i.openPopup(c,n);if(i.eventHandler.emitEvent("msal:popupOpened",O.Popup,{popupWindow:l},null),yield i.monitorPopupForHash(l,n.popupWindowParent).catch(()=>{}),o){const u={apiId:962,timeout:i.config.system.redirectNavigationTimeout,noHistory:!1},d=oe.getAbsoluteUrl(o,Er());i.logger.verbose("Redirecting main window to url specified in the request"),i.logger.verbosePii(`Redirecting main window to: ${d}`),yield i.navigationClient.navigateInternal(d,u)}else i.logger.verbose("No main window navigation requested")}catch(a){throw n.popup?.close(),a instanceof Ne&&(a.setCorrelationId(i.correlationId),s.cacheFailedRequest(a)),i.browserStorage.setInteractionInProgress(!1),i.eventHandler.emitEvent("msal:logoutFailure",O.Popup,null,a),i.eventHandler.emitEvent("msal:logoutEnd",O.Popup),a}i.eventHandler.emitEvent("msal:logoutEnd",O.Popup)})()}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),P(is)}monitorPopupForHash(e,n){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),void o(P(Cr));let s="";try{s=e.location.href}catch{}if(!s||"about:blank"===s)return;clearInterval(i);let a="";e&&(a=this.config.auth.OIDCOptions.serverResponseType===ac.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw P(dh);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),P(uh)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:o}){const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=r.popupSize?.width,u=r.popupSize?.height,d=r.popupPosition?.top,h=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Xt.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Xt.POPUP_HEIGHT),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Xt.POPUP_HEIGHT/2+s)),(!h||h<0||h>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,a/2-Xt.POPUP_WIDTH/2+i)),o.open(e,n,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(O.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,n){return`${Xt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){return`${Xt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.account&&e.account.homeAccountId}.${this.correlationId}`}}class TN{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,n){var r=this;return v(function*(){if(r.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){n.redirectStartPage&&(r.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),r.browserStorage.setTemporaryCache("request.origin",n.redirectStartPage,!0)),r.browserStorage.setTemporaryCache("request.correlationId",r.authCodeRequest.correlationId,!0),r.browserStorage.cacheCodeRequest(r.authCodeRequest),r.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:861,timeout:n.redirectTimeout,noHistory:!1};return"function"==typeof n.onRedirectNavigate?(r.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==n.onRedirectNavigate(e)?(r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield n.navigationClient.navigateExternal(e,o))):void r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(r.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield n.navigationClient.navigateExternal(e,o)))}throw r.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),P(is)})()}handleCodeResponse(e,n){var r=this;return v(function*(){r.logger.verbose("RedirectHandler.handleCodeResponse called"),r.browserStorage.setInteractionInProgress(!1);const o=r.browserStorage.generateStateKey(n),i=r.browserStorage.getTemporaryCache(o);if(!i)throw S(os,"Cached State");let s;try{s=r.authModule.handleFragmentResponse(e,i)}catch(u){throw u instanceof Xr&&u.subError===Cr?P(Cr):u}const a=r.browserStorage.generateNonceKey(i),c=r.browserStorage.getTemporaryCache(a);if(r.authCodeRequest.code=s.code,s.cloud_instance_host_name&&(yield b(r.authModule.updateAuthority.bind(r.authModule),g.UpdateTokenEndpointAuthority,r.logger,r.performanceClient,r.authCodeRequest.correlationId)(s.cloud_instance_host_name,r.authCodeRequest.correlationId)),s.nonce=c||void 0,s.state=i,s.client_info)r.authCodeRequest.clientInfo=s.client_info;else{const u=r.checkCcsCredentials();u&&(r.authCodeRequest.ccsCredential=u)}const l=yield r.authModule.acquireToken(r.authCodeRequest,s);return r.browserStorage.cleanRequestByState(n),l})()}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache("ccs.credential",!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class fW extends Cs{constructor(e,n,r,o,i,s,a,c,l,u){super(e,n,r,o,i,s,a,l,u),this.nativeStorage=c}acquireToken(e){var n=this;return v(function*(){const r=yield b(n.initializeAuthorizationRequest.bind(n),g.StandardInteractionClientInitializeAuthorizationRequest,n.logger,n.performanceClient,n.correlationId)(e,O.Redirect);n.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||"",r.account||null);const o=n.initializeServerTelemetryManager(861),i=s=>{s.persisted&&(n.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),n.browserStorage.cleanRequestByState(r.state),n.eventHandler.emitEvent("msal:restoreFromBFCache",O.Redirect))};try{const s=yield b(n.initializeAuthorizationCodeRequest.bind(n),g.StandardInteractionClientInitializeAuthorizationCodeRequest,n.logger,n.performanceClient,n.correlationId)(r),a=yield b(n.createAuthCodeClient.bind(n),g.StandardInteractionClientCreateAuthCodeClient,n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),c=new TN(a,n.browserStorage,s,n.logger,n.performanceClient),l=yield a.getAuthCodeUrl({...r,nativeBroker:er.isNativeAvailable(n.config,n.logger,n.nativeMessageHandler,e.authenticationScheme)}),u=n.getRedirectStartPage(e.redirectStartPage);return n.logger.verbosePii(`Redirect start page: ${u}`),window.addEventListener("pageshow",i),yield c.initiateAuthRequest(l,{navigationClient:n.navigationClient,redirectTimeout:n.config.system.redirectNavigationTimeout,redirectStartPage:u,onRedirectNavigate:e.onRedirectNavigate||n.config.auth.onRedirectNavigate})}catch(s){throw s instanceof Ne&&(s.setCorrelationId(n.correlationId),o.cacheFailedRequest(s)),window.removeEventListener("pageshow",i),n.browserStorage.cleanRequestByState(r.state),s}})()}handleRedirectPromise(){var e=this;return v(function*(n="",r){const o=e.initializeServerTelemetryManager(865);try{if(!e.browserStorage.isInteractionInProgress(!0))return e.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[i,s]=e.getRedirectResponse(n||"");if(!i)return e.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),e.browserStorage.cleanRequestByInteractionType(O.Redirect),"back_forward"!==function hW(){if(typeof window>"u"||typeof window.performance>"u"||"function"!=typeof window.performance.getEntriesByType)return;const t=window.performance.getEntriesByType("navigation");return(t.length?t[0]:void 0)?.type}()?r.event.errorCode="no_server_response":e.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const a=e.browserStorage.getTemporaryCache("request.origin",!0)||w.EMPTY_STRING;if(oe.removeHashFromUrl(a)===oe.removeHashFromUrl(window.location.href)&&e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&function OK(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}(a),yield e.handleResponse(i,o);if(!e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield e.handleResponse(i,o);if(!Ph()||e.config.system.allowRedirectInIframe){e.browserStorage.setTemporaryCache("urlHash",s,!0);const u={apiId:865,timeout:e.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(a&&"null"!==a)e.logger.verbose(`Navigating to loginRequestUrl: ${a}`),d=yield e.navigationClient.navigateInternal(a,u);else{const h=function xK(){const e=new oe(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();e.browserStorage.setTemporaryCache("request.origin",h,!0),e.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=yield e.navigationClient.navigateInternal(h,u)}if(!d)return yield e.handleResponse(i,o)}return null}catch(i){throw i instanceof Ne&&(i.setCorrelationId(e.correlationId),o.cacheFailedRequest(i)),e.browserStorage.cleanRequestByInteractionType(O.Redirect),i}}).apply(this,arguments)}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(n=this.config.auth.OIDCOptions.serverResponseType===ac.QUERY?window.location.search:window.location.hash);let r=oh(n);if(r){try{!function uW(t,e,n){if(!t.state)throw P(bc);const r=cN(e,t.state);if(!r)throw P(ah);if(r.interactionType!==n)throw P(ch)}(r,this.browserCrypto,O.Redirect)}catch(i){return i instanceof Ne&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return function kK(t){t.location.hash="","function"==typeof t.history.replaceState&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const o=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),o&&(r=oh(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,n){var r=this;return v(function*(){const o=e.state;if(!o)throw P(bc);const i=r.browserStorage.getCachedRequest(o);if(r.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw P(Mo);const l=new Es(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,e.accountId,r.nativeStorage,i.correlationId),{userRequestState:u}=Rn.parseRequestState(r.browserCrypto,o);return l.acquireToken({...i,state:u,prompt:void 0}).finally(()=>{r.browserStorage.cleanRequestByState(o)})}const s=r.browserStorage.getCachedAuthority(o);if(!s)throw P(Rc);const a=yield b(r.createAuthCodeClient.bind(r),g.StandardInteractionClientCreateAuthCodeClient,r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:n,requestAuthority:s});return Zn.removeThrottle(r.browserStorage,r.config.auth.clientId,i),new TN(a,r.browserStorage,i,r.logger,r.performanceClient).handleCodeResponse(e,o)})()}logout(e){var n=this;return v(function*(){n.logger.verbose("logoutRedirect called");const r=n.initializeLogoutRequest(e),o=n.initializeServerTelemetryManager(961);try{n.eventHandler.emitEvent("msal:logoutStart",O.Redirect,e),yield n.clearCacheOnLogout(r.account);const i={apiId:961,timeout:n.config.system.redirectNavigationTimeout,noHistory:!1},a=(yield b(n.createAuthCodeClient.bind(n),g.StandardInteractionClientCreateAuthCodeClient,n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0})).getLogoutUri(r);if(n.eventHandler.emitEvent("msal:logoutSuccess",O.Redirect,r),!e||"function"!=typeof e.onRedirectNavigate)return n.browserStorage.getInteractionInProgress()||n.browserStorage.setInteractionInProgress(!0),void(yield n.navigationClient.navigateExternal(a,i));if(!1!==e.onRedirectNavigate(a))return n.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),n.browserStorage.getInteractionInProgress()||n.browserStorage.setInteractionInProgress(!0),void(yield n.navigationClient.navigateExternal(a,i));n.browserStorage.setInteractionInProgress(!1),n.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof Ne&&(i.setCorrelationId(n.correlationId),o.cacheFailedRequest(i)),n.eventHandler.emitEvent("msal:logoutFailure",O.Redirect,null,i),n.eventHandler.emitEvent("msal:logoutEnd",O.Redirect),i}n.eventHandler.emitEvent("msal:logoutEnd",O.Redirect)})()}getRedirectStartPage(e){const n=e||window.location.href;return oe.getAbsoluteUrl(n,Er())}}function pW(t,e,n,r,o){return pC.apply(this,arguments)}function pC(){return(pC=v(function*(t,e,n,r,o){if(e.addQueueMeasurement(g.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),P(is);return o?b(mW,g.SilentHandlerLoadFrame,n,e,r)(t,o,e,r):Oo(yW,g.SilentHandlerLoadFrameSync,n,e,r)(t)})).apply(this,arguments)}function gW(t,e,n,r,o,i,s){return gC.apply(this,arguments)}function gC(){return(gC=v(function*(t,e,n,r,o,i,s){return r.addQueueMeasurement(g.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<qv&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${qv}ms). This may result in timeouts.`);const l=window.setTimeout(()=>{window.clearInterval(u),c(P(hh))},e),u=window.setInterval(()=>{let d="";const h=t.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||"about:blank"===d)return;let f="";h&&(f=s===ac.QUERY?h.location.search:h.location.hash),window.clearTimeout(l),window.clearInterval(u),a(f)},n)}).finally(()=>{Oo(vW,g.RemoveHiddenIframe,o,r,i)(t)})})).apply(this,arguments)}function mW(t,e,n,r){return n.addQueueMeasurement(g.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=SN();window.setTimeout(()=>{s?(s.src=t,o(s)):i("Unable to load iframe")},e)})}function yW(t){const e=SN();return e.src=t,e}function SN(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function vW(t){document.body===t.parentNode&&document.body.removeChild(t)}class CW extends Cs{constructor(e,n,r,o,i,s,a,c,l,u,d){super(e,n,r,o,i,s,c,u,d),this.apiId=a,this.nativeStorage=l}acquireToken(e){var n=this;return v(function*(){n.performanceClient.addQueueMeasurement(g.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&n.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==nt.NONE&&r.prompt!==nt.NO_SESSION&&(n.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${nt.NONE}`),r.prompt=nt.NONE):r.prompt=nt.NONE;const o=yield b(n.initializeAuthorizationRequest.bind(n),g.StandardInteractionClientInitializeAuthorizationRequest,n.logger,n.performanceClient,e.correlationId)(r,O.Silent);NM(o.authority);const i=n.initializeServerTelemetryManager(n.apiId);let s;try{return s=yield b(n.createAuthCodeClient.bind(n),g.StandardInteractionClientCreateAuthCodeClient,n.logger,n.performanceClient,e.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),yield b(n.silentTokenHelper.bind(n),g.SilentIframeClientTokenHelper,n.logger,n.performanceClient,e.correlationId)(s,o)}catch(a){if(a instanceof Ne&&(a.setCorrelationId(n.correlationId),i.cacheFailedRequest(a)),!(s&&a instanceof Ne&&a.errorCode===Xt.INVALID_GRANT_ERROR))throw a;n.performanceClient.addFields({retryError:a.errorCode},n.correlationId);const c=yield b(n.initializeAuthorizationRequest.bind(n),g.StandardInteractionClientInitializeAuthorizationRequest,n.logger,n.performanceClient,e.correlationId)(r,O.Silent);return yield b(n.silentTokenHelper.bind(n),g.SilentIframeClientTokenHelper,n.logger,n.performanceClient,n.correlationId)(s,c)}})()}logout(){return Promise.reject(P(ss))}silentTokenHelper(e,n){var r=this;return v(function*(){const o=n.correlationId;r.performanceClient.addQueueMeasurement(g.SilentIframeClientTokenHelper,o);const i=yield b(r.initializeAuthorizationCodeRequest.bind(r),g.StandardInteractionClientInitializeAuthorizationCodeRequest,r.logger,r.performanceClient,o)(n),s=yield b(e.getAuthCodeUrl.bind(e),g.GetAuthCodeUrl,r.logger,r.performanceClient,o)({...n,nativeBroker:er.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,n.authenticationScheme)}),a=new fC(e,r.browserStorage,i,r.logger,r.performanceClient),c=yield b(pW,g.SilentHandlerInitiateAuthRequest,r.logger,r.performanceClient,o)(s,r.performanceClient,r.logger,o,r.config.system.navigateFrameWait),l=r.config.auth.OIDCOptions.serverResponseType,u=yield b(gW,g.SilentHandlerMonitorIframeForHash,r.logger,r.performanceClient,o)(c,r.config.system.iframeHashTimeout,r.config.system.pollIntervalMilliseconds,r.performanceClient,r.logger,o,l),d=Oo(wN,g.DeserializeResponse,r.logger,r.performanceClient,r.correlationId)(u,l,r.logger);if(d.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw P(Mo);const h=new Es(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,r.apiId,r.performanceClient,r.nativeMessageHandler,d.accountId,r.browserStorage,o),{userRequestState:f}=Rn.parseRequestState(r.browserCrypto,n.state);return b(h.acquireToken.bind(h),g.NativeInteractionClientAcquireToken,r.logger,r.performanceClient,o)({...n,state:f,prompt:n.prompt||nt.NONE})}return b(a.handleCodeResponse.bind(a),g.HandleCodeResponse,r.logger,r.performanceClient,o)(d,n)})()}}class IW extends Cs{acquireToken(e){var n=this;return v(function*(){n.performanceClient.addQueueMeasurement(g.SilentRefreshClientAcquireToken,e.correlationId);const r=yield b(cC,g.InitializeBaseRequest,n.logger,n.performanceClient,e.correlationId)(e,n.config,n.performanceClient,n.logger),o={...e,...r};e.redirectUri&&(o.redirectUri=n.getRedirectUri(e.redirectUri));const i=n.initializeServerTelemetryManager(61),s=yield n.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return b(s.acquireTokenByRefreshToken.bind(s),g.RefreshTokenClientAcquireTokenByRefreshToken,n.logger,n.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(n.correlationId),i.cacheFailedRequest(a),a})})()}logout(){return Promise.reject(P(ss))}createRefreshTokenClient(e){var n=this;return v(function*(){const r=yield b(n.getClientConfiguration.bind(n),g.StandardInteractionClientGetClientConfiguration,n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new hC(r,n.performanceClient)})()}}class EW{constructor(e,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw P(as);const o=e.correlationId||Qn(),i=n.id_token?ko(n.id_token,Jn):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new vt(vt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||Qn()):void 0,c=this.loadAccount(e,r.clientInfo||n.client_info||"",o,i,a),l=this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,o),u=this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,o),d=this.loadRefreshToken(n,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:l,accessToken:u,refreshToken:d},i,a)}loadAccount(e,n,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=Xe.createFromAccountInfo(e.account);return this.storage.setAccount(l,r),l}if(!i||!n&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),P(Eh);const s=Xe.generateHomeAccountId(n,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=oC(this.storage,i,s,Jn,r,o,n,i.hostnameAndPort,a,void 0,void 0,this.logger);return this.storage.setAccount(c,r),c}loadIdToken(e,n,r,o,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const s=Fh(n,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(s,i),s}loadAccessToken(e,n,r,o,i,s,a){if(!n.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!n.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(n.scope||e.scopes&&e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?Ve.fromString(n.scope):new Ve(e.scopes),l=s.expiresOn||n.expires_in+(new Date).getTime()/1e3,u=s.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+(new Date).getTime()/1e3,d=Uh(r,o,n.access_token,this.config.auth.clientId,i,c.printScopes(),l,u,Jn);return this.storage.setAccessTokenCredential(d,a),d}loadRefreshToken(e,n,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const i=FM(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(i,o),i}generateAuthenticationResult(e,n,r,o){let c,i="",s=[],a=null;n?.accessToken&&(i=n.accessToken.secret,s=Ve.fromString(n.accessToken.target).asArray(),a=new Date(1e3*Number(n.accessToken.expiresOn)),c=new Date(1e3*Number(n.accessToken.extendedExpiresOn)));const l=n.account;return{authority:o?o.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:s,account:l.getAccountInfo(),idToken:n.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:n.refreshToken?.familyId||"",tokenType:n?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}}class wW extends mN{constructor(e){super(e),this.includeRedirectUri=!1}}class TW extends Cs{constructor(e,n,r,o,i,s,a,c,l,u){super(e,n,r,o,i,s,c,l,u),this.apiId=a}acquireToken(e){var n=this;return v(function*(){if(!e.code)throw P(wh);const r=yield b(n.initializeAuthorizationRequest.bind(n),g.StandardInteractionClientInitializeAuthorizationRequest,n.logger,n.performanceClient,e.correlationId)(e,O.Silent),o=n.initializeServerTelemetryManager(n.apiId);try{const i={...r,code:e.code},s=yield b(n.getClientConfiguration.bind(n),g.StandardInteractionClientGetClientConfiguration,n.logger,n.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=new wW(s);n.logger.verbose("Auth code client created");const c=new fC(a,n.browserStorage,i,n.logger,n.performanceClient);return yield b(c.handleCodeResponseFromServer.bind(c),g.HandleCodeResponseFromServer,n.logger,n.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(i){throw i instanceof Ne&&(i.setCorrelationId(n.correlationId),o.cacheFailedRequest(i)),i}})()}logout(){return Promise.reject(P(ss))}}function tr(t){const e=t?.idTokenClaims;return e?.tfp||e?.acr?"B2C":e?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===e?.tid?"MSA":"AAD":void 0}function Kh(t,e){try{Mv(t)}catch(n){throw e.end({success:!1},n),n}}class Wh{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new P3(this.logger,this.performanceClient):Lh,this.eventHandler=new o4(this.logger),this.browserStorage=this.isBrowserEnvironment?new Xv(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function B3(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw we(gc)}return{canonicalAuthority:t.authority?iN(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth),this.performanceClient):((t,e)=>new Xv(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Lh,this.logger))(),this.nativeInternalStorage=new Xv(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new EW(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,n){return v(function*(){const r=new Wh(e);return yield r.initialize(n),r})()}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){var n=this;return v(function*(){if(n.logger.trace("initialize called"),n.initialized)return void n.logger.info("initialize has already been called, exiting early.");if(!n.isBrowserEnvironment)return n.logger.info("in non-browser environment, exiting early."),n.initialized=!0,void n.eventHandler.emitEvent("msal:initializeEnd");const r=e?.correlationId||n.getRequestCorrelationId(),o=n.config.system.allowNativeBroker,i=n.performanceClient.startMeasurement(g.InitializeClientApplication,r);if(n.eventHandler.emitEvent("msal:initializeStart"),o)try{n.nativeExtensionProvider=yield er.createProvider(n.logger,n.config.system.nativeBrokerHandshakeTimeout,n.performanceClient)}catch(s){n.logger.verbose(s)}n.config.cache.claimsBasedCachingEnabled||(n.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield b(n.browserStorage.clearTokensAndKeysWithClaims.bind(n.browserStorage),g.ClearTokensAndKeysWithClaims,n.logger,n.performanceClient,r)(n.performanceClient,r)),n.initialized=!0,n.eventHandler.emitEvent("msal:initializeEnd"),i.end({allowNativeBroker:o,success:!0})})()}handleRedirectPromise(e){var n=this;return v(function*(){if(n.logger.verbose("handleRedirectPromise called"),RM(n.initialized),n.isBrowserEnvironment){const r=e||"";let o=n.redirectResponse.get(r);return typeof o>"u"?(o=n.handleRedirectPromiseInternal(e),n.redirectResponse.set(r,o),n.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):n.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return n.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(e){var n=this;return v(function*(){const r=n.getAllAccounts(),o=n.browserStorage.getCachedNativeRequest(),i=o&&er.isNativeAvailable(n.config,n.logger,n.nativeExtensionProvider)&&n.nativeExtensionProvider&&!e,s=i?o?.correlationId:n.browserStorage.getTemporaryCache("request.correlationId",!0)||"",a=n.performanceClient.startMeasurement(g.AcquireTokenRedirect,s);let c;if(n.eventHandler.emitEvent("msal:handleRedirectStart",O.Redirect),i&&n.nativeExtensionProvider){n.logger.trace("handleRedirectPromise - acquiring token from native platform");const l=new Es(n.config,n.browserStorage,n.browserCrypto,n.logger,n.eventHandler,n.navigationClient,865,n.performanceClient,n.nativeExtensionProvider,o.accountId,n.nativeInternalStorage,o.correlationId);c=b(l.handleRedirectPromise.bind(l),g.HandleNativeRedirectPromiseMeasurement,n.logger,n.performanceClient,a.event.correlationId)(n.performanceClient,a.event.correlationId)}else{n.logger.trace("handleRedirectPromise - acquiring token from web flow");const l=n.createRedirectClient(s);c=b(l.handleRedirectPromise.bind(l),g.HandleRedirectPromiseMeasurement,n.logger,n.performanceClient,a.event.correlationId)(e,a)}return c.then(l=>(l?(r.length<n.getAllAccounts().length?(n.eventHandler.emitEvent("msal:loginSuccess",O.Redirect,l),n.logger.verbose("handleRedirectResponse returned result, login success")):(n.eventHandler.emitEvent("msal:acquireTokenSuccess",O.Redirect,l),n.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0,accountType:tr(l.account)})):a.event.errorCode?a.end({success:!1}):a.discard(),n.eventHandler.emitEvent("msal:handleRedirectEnd",O.Redirect),l)).catch(l=>{const u=l;throw n.eventHandler.emitEvent(r.length>0?"msal:acquireTokenFailure":"msal:loginFailure",O.Redirect,null,u),n.eventHandler.emitEvent("msal:handleRedirectEnd",O.Redirect),a.end({success:!1},u),l})})()}acquireTokenRedirect(e){var n=this;return v(function*(){const r=n.getRequestCorrelationId(e);n.logger.verbose("acquireTokenRedirect called",r);const o=n.performanceClient.startMeasurement(g.AcquireTokenPreRedirect,r);o.add({accountType:tr(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=a=>{const c="function"==typeof i?i(a):void 0;return!1!==c?o.end({success:!0}):o.discard(),c};else{const a=n.config.auth.onRedirectNavigate;n.config.auth.onRedirectNavigate=c=>{const l="function"==typeof a?a(c):void 0;return!1!==l?o.end({success:!0}):o.discard(),l}}const s=n.getAllAccounts().length>0;try{let a;return MM(n.initialized,n.config),n.browserStorage.setInteractionInProgress(!0),n.eventHandler.emitEvent(s?"msal:acquireTokenStart":"msal:loginStart",O.Redirect,e),a=n.nativeExtensionProvider&&n.canUseNative(e)?new Es(n.config,n.browserStorage,n.browserCrypto,n.logger,n.eventHandler,n.navigationClient,861,n.performanceClient,n.nativeExtensionProvider,n.getNativeAccountId(e),n.nativeInternalStorage,r).acquireTokenRedirect(e,o).catch(l=>{if(l instanceof Xn&&Is(l))return n.nativeExtensionProvider=void 0,n.createRedirectClient(r).acquireToken(e);if(l instanceof bn)return n.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),n.createRedirectClient(r).acquireToken(e);throw n.browserStorage.setInteractionInProgress(!1),l}):n.createRedirectClient(r).acquireToken(e),yield a}catch(a){throw o.end({success:!1},a),n.eventHandler.emitEvent(s?"msal:acquireTokenFailure":"msal:loginFailure",O.Redirect,null,a),a}})()}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(g.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:tr(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),Kh(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();let i;return this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenStart":"msal:loginStart",O.Popup,e),i=this.canUseNative(e)?this.acquireTokenNative({...e,correlationId:n},862).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:tr(s.account)}),s)).catch(s=>{if(s instanceof Xn&&Is(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e);if(s instanceof bn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):this.createPopupClient(n).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent("msal:loginSuccess",O.Popup,s):this.eventHandler.emitEvent("msal:acquireTokenSuccess",O.Popup,s),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:tr(s.account)}),s)).catch(s=>(this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenFailure":"msal:loginFailure",O.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){var n=this;return v(function*(){const r=n.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:r};let i;return n.ssoSilentMeasurement=n.performanceClient.startMeasurement(g.SsoSilent,r),n.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:tr(e.account)}),Kh(n.initialized,n.ssoSilentMeasurement),n.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement),n.logger.verbose("ssoSilent called",r),n.eventHandler.emitEvent("msal:ssoSilentStart",O.Silent,o),i=n.canUseNative(o)?n.acquireTokenNative(o,863).catch(s=>{if(s instanceof Xn&&Is(s))return n.nativeExtensionProvider=void 0,n.createSilentIframeClient(o.correlationId).acquireToken(o);throw s}):n.createSilentIframeClient(o.correlationId).acquireToken(o),i.then(s=>(n.eventHandler.emitEvent("msal:ssoSilentSuccess",O.Silent,s),n.ssoSilentMeasurement?.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:tr(s.account)}),s)).catch(s=>{throw n.eventHandler.emitEvent("msal:ssoSilentFailure",O.Silent,null,s),n.ssoSilentMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(e){var n=this;return v(function*(){const r=n.getRequestCorrelationId(e);n.logger.trace("acquireTokenByCode called",r);const o=n.performanceClient.startMeasurement(g.AcquireTokenByCode,r);Kh(n.initialized,o),n.eventHandler.emitEvent("msal:acquireTokenByCodeStart",O.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw P(Sh);if(e.code){const i=e.code;let s=n.hybridAuthCodeResponses.get(i);return s?(n.logger.verbose("Existing acquireTokenByCode request found",r),o.discard()):(n.logger.verbose("Initiating new acquireTokenByCode request",r),s=n.acquireTokenByCodeAsync({...e,correlationId:r}).then(a=>(n.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",O.Silent,a),n.hybridAuthCodeResponses.delete(i),o.end({success:!0,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:tr(a.account)}),a)).catch(a=>{throw n.hybridAuthCodeResponses.delete(i),n.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",O.Silent,null,a),o.end({success:!1},a),a}),n.hybridAuthCodeResponses.set(i,s)),yield s}if(e.nativeAccountId){if(n.canUseNative(e,e.nativeAccountId)){const i=yield n.acquireTokenNative({...e,correlationId:r},866,e.nativeAccountId).catch(s=>{throw s instanceof Xn&&Is(s)&&(n.nativeExtensionProvider=void 0),s});return o.end({accountType:tr(i.account),success:!0}),i}throw P(_h)}throw P(Th)}catch(i){throw n.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",O.Silent,null,i),o.end({success:!1},i),i}})()}acquireTokenByCodeAsync(e){var n=this;return v(function*(){return n.logger.trace("acquireTokenByCodeAsync called",e.correlationId),n.acquireTokenByCodeAsyncMeasurement=n.performanceClient.startMeasurement(g.AcquireTokenByCodeAsync,e.correlationId),n.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement),yield n.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>(n.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker}),i)).catch(i=>{throw n.acquireTokenByCodeAsyncMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(e,n){var r=this;return v(function*(){switch(r.performanceClient.addQueueMeasurement(g.AcquireTokenFromCache,e.correlationId),n){case 0:case 1:case 2:const o=r.createSilentCacheClient(e.correlationId);return b(o.acquireToken.bind(o),g.SilentCacheClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw S(An)}})()}acquireTokenByRefreshToken(e,n){var r=this;return v(function*(){switch(r.performanceClient.addQueueMeasurement(g.AcquireTokenByRefreshToken,e.correlationId),n){case 0:case 2:case 3:case 4:const o=r.createSilentRefreshClient(e.correlationId);return b(o.acquireToken.bind(o),g.SilentRefreshClientAcquireToken,r.logger,r.performanceClient,e.correlationId)(e);default:throw S(An)}})()}acquireTokenBySilentIframe(e){var n=this;return v(function*(){n.performanceClient.addQueueMeasurement(g.AcquireTokenBySilentIframe,e.correlationId);const r=n.createSilentIframeClient(e.correlationId);return b(r.acquireToken.bind(r),g.SilentIframeClientAcquireToken,n.logger,n.performanceClient,e.correlationId)(e)})()}logout(e){var n=this;return v(function*(){const r=n.getRequestCorrelationId(e);return n.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),n.logoutRedirect({correlationId:r,...e})})()}logoutRedirect(e){var n=this;return v(function*(){const r=n.getRequestCorrelationId(e);return MM(n.initialized,n.config),n.browserStorage.setInteractionInProgress(!0),n.createRedirectClient(r).logout(e)})()}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return Mv(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(n).logout(e)}catch(n){return Promise.reject(n)}}clearCache(e){var n=this;return v(function*(){if(!n.isBrowserEnvironment)return void n.logger.info("in non-browser environment, returning early.");const r=n.getRequestCorrelationId(e);return n.createSilentCacheClient(r).logout(e)})()}getAllAccounts(e){const n=this.getRequestCorrelationId();return function J3(t,e,n,r,o){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(r,o):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return function Z3(t,e,n,r){if(e.trace("getAccount called"),0===Object.keys(t).length)return e.warning("getAccount: No accountFilter provided"),null;const o=n.getAccountInfoFilteredBy(t,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return function X3(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const o=n.getAccountInfoFilteredBy({username:t},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return function e4(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=n.getAccountInfoFilteredBy({homeAccountId:t},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return function t4(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const o=n.getAccountInfoFilteredBy({localAccountId:t},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();!function n4(t,e,n){e.setActiveAccount(t,n)}(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return function r4(t,e){return t.getActiveAccount(e)}(this.browserStorage,e)}hydrateCache(e,n){var r=this;return v(function*(){r.logger.verbose("hydrateCache called");const o=Xe.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return r.browserStorage.setAccount(o,e.correlationId),e.fromNativeBroker?(r.logger.verbose("Response was from native broker, storing in-memory"),r.nativeInternalStorage.hydrateCache(e,n)):r.browserStorage.hydrateCache(e,n)})()}acquireTokenNative(e,n,r){var o=this;return v(function*(){if(o.logger.trace("acquireTokenNative called"),!o.nativeExtensionProvider)throw P(Mo);return new Es(o.config,o.browserStorage,o.browserCrypto,o.logger,o.eventHandler,o.navigationClient,n,o.performanceClient,o.nativeExtensionProvider,r||o.getNativeAccountId(e),o.nativeInternalStorage,e.correlationId).acquireToken(e)})()}canUseNative(e,n){if(this.logger.trace("canUseNative called"),!er.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case nt.NONE:case nt.CONSENT:case nt.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!(!n&&!this.getNativeAccountId(e)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new dW(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new fW(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new CW(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new EN(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new IW(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new TW(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return bM(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(tt.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent("msal:activeAccountChanged");const n=e.newValue||e.oldValue;if(!n)return;const r=JSON.parse(n);if("object"!=typeof r||!Xe.isAccountEntity(r))return;const i=fs.toObject(new Xe,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent("msal:accountAdded",void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent("msal:accountRemoved",void 0,i))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Qn():w.EMPTY_STRING}loginRedirect(e){var n=this;return v(function*(){const r=n.getRequestCorrelationId(e);return n.logger.verbose("loginRedirect called",r),n.acquireTokenRedirect({correlationId:r,...e||mM})})()}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||mM})}acquireTokenSilent(e){var n=this;return v(function*(){const r=n.getRequestCorrelationId(e),o=n.performanceClient.startMeasurement(g.AcquireTokenSilent,r);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Kh(n.initialized,o),n.logger.verbose("acquireTokenSilent called",r);const i=e.account||n.getActiveAccount();if(!i)throw P(mh);o.add({accountType:tr(i)});const a=JSON.stringify({clientId:n.config.auth.clientId,authority:e.authority||w.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:i.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions}),c=n.activeSilentTokenRequests.get(a);if(typeof c>"u"){n.logger.verbose("acquireTokenSilent called for the first time, storing active request",r);const l=b(n.acquireTokenSilentAsync.bind(n),g.AcquireTokenSilentAsync,n.logger,n.performanceClient,r)({...e,correlationId:r},i).then(u=>(n.activeSilentTokenRequests.delete(a),o.end({success:!0,fromCache:u.fromCache,isNativeBroker:u.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),u)).catch(u=>{throw n.activeSilentTokenRequests.delete(a),o.end({success:!1},u),u});return n.activeSilentTokenRequests.set(a,l),{...yield l,state:e.state}}return n.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.discard(),{...yield c,state:e.state}})()}acquireTokenSilentAsync(e,n){var r=this;return v(function*(){const o=()=>r.trackPageVisibility(e.correlationId);r.performanceClient.addQueueMeasurement(g.AcquireTokenSilentAsync,e.correlationId),r.eventHandler.emitEvent("msal:acquireTokenStart",O.Silent,e),e.correlationId&&r.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);const i=yield b(Z4,g.InitializeSilentRequest,r.logger,r.performanceClient,e.correlationId)(e,n,r.config,r.performanceClient,r.logger),s=e.cacheLookupPolicy||0;return r.acquireTokenSilentNoIframe(i,s).catch(function(){var c=v(function*(l){if(function SW(t,e){const o=!(t instanceof bn&&t.subError!==ms)&&(t.errorCode===Xt.INVALID_GRANT_ERROR||t.errorCode===An)||t.errorCode===gs||t.errorCode===Jv,i=vK.includes(e);return o&&i}(l,s)){if(r.activeIframeRequest){if(5!==s){const[d,h]=r.activeIframeRequest;r.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${h}`,i.correlationId);const f=r.performanceClient.startMeasurement(g.AwaitConcurrentIframe,i.correlationId);f.add({awaitIframeCorrelationId:h});const p=yield d;if(f.end({success:p}),p)return r.logger.verbose(`Parallel iframe request with correlationId: ${h} succeeded. Retrying cache and/or RT redemption`,i.correlationId),r.acquireTokenSilentNoIframe(i,s);throw r.logger.info(`Iframe request with correlationId: ${h} failed. Interaction is required.`),l}return r.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),b(r.acquireTokenBySilentIframe.bind(r),g.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i)}{let d;return r.activeIframeRequest=[new Promise(h=>{d=h}),i.correlationId],r.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),b(r.acquireTokenBySilentIframe.bind(r),g.AcquireTokenBySilentIframe,r.logger,r.performanceClient,i.correlationId)(i).then(h=>(d(!0),h)).catch(h=>{throw d(!1),h}).finally(()=>{r.activeIframeRequest=void 0})}}throw l});return function(l){return c.apply(this,arguments)}}()).then(c=>(r.eventHandler.emitEvent("msal:acquireTokenSuccess",O.Silent,c),e.correlationId&&r.performanceClient.addFields({fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker},e.correlationId),c)).catch(c=>{throw r.eventHandler.emitEvent("msal:acquireTokenFailure",O.Silent,null,c),c}).finally(()=>{document.removeEventListener("visibilitychange",o)})})()}acquireTokenSilentNoIframe(e,n){var r=this;return v(function*(){return er.isNativeAvailable(r.config,r.logger,r.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(r.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),r.acquireTokenNative(e,61).catch(function(){var o=v(function*(i){throw i instanceof Xn&&Is(i)?(r.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),r.nativeExtensionProvider=void 0,S(An)):i});return function(i){return o.apply(this,arguments)}}())):(r.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),b(r.acquireTokenFromCache.bind(r),g.AcquireTokenFromCache,r.logger,r.performanceClient,e.correlationId)(e,n).catch(o=>{if(1===n)throw o;return r.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",O.Silent,e),b(r.acquireTokenByRefreshToken.bind(r),g.AcquireTokenByRefreshToken,r.logger,r.performanceClient,e.correlationId)(e,n)}))})()}}function mC(){return(mC=v(function*(t,e){const n=new eN(t);return yield n.initialize(),Wh.createController(n,e)})).apply(this,arguments)}class Lc{static createPublicClientApplication(e){return v(function*(){const n=yield function _W(t,e){return mC.apply(this,arguments)}(e);return new Lc(e,n)})()}constructor(e,n){this.controller=n||new Wh(new eN(e))}initialize(e){var n=this;return v(function*(){return n.controller.initialize(e)})()}acquireTokenPopup(e){var n=this;return v(function*(){return n.controller.acquireTokenPopup(e)})()}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,n){var r=this;return v(function*(){return r.controller.hydrateCache(e,n)})()}clearCache(e){return this.controller.clearCache(e)}}function DW(){return new Lc({auth:{clientId:"02b077c2-fd29-4c06-a670-7d6d09909e69",authority:"https://login.microsoftonline.com/1146cf6d-9b72-4828-bd04-9f1ccb305586",redirectUri:"http://localhost:4200/"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}})}function bW(){const t=new Map;return t.set("https://graph.microsoft.com/v1.0/me",["user.read"]),{interactionType:O.Redirect,protectedResourceMap:t}}let RW=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=or({type:t,bootstrap:[YK]})}static{this.\u0275inj=Mn({providers:[{provide:xh,useFactory:DW},{provide:kv,useFactory:bW},No,ls,Ov,VK],imports:[Z$,zK,vG,$K]})}}return t})();Y$().bootstrapModule(RW).catch(t=>console.error(t))}},ws=>{ws(ws.s=348)}]);